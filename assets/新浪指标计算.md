xh5_define("plugins.techcharts", ["utils.util", "utils.painter"], function(t, i) {
    "use strict";
    function a(t, i, a) {
        this.cfg = t,
        this.isSC = !0,
        this.proxyCfg = lt({
            iTo: function() {},
            ctn: null,
            titleCtn: null,
            iMgr: void 0,
            titleW: 0 / 0,
            titleGap: 0 / 0,
            withHBg: !0,
            h: 0 / 0,
            mh: 0 / 0,
            eh: 0 / 0,
            lz: 0 / 0,
            fixIdctW: !1,
            onClkMain: void 0,
            stock: void 0,
            usrObj: void 0,
            initMgr: void 0
        }, i),
        this.selfCfg = lt({
            nu: !1,
            h: this.proxyCfg.h,
            mh: this.proxyCfg.mh,
            eh: this.proxyCfg.eh,
            titleW: 0 / 0,
            isBlank: !1,
            ctnId: void 0,
            allowrfs: !0
        }, a),
        this.isBlank = this.selfCfg.isBlank,
        this.proxyCfg.titleW = this.selfCfg.titleW,
        this.symbol = this.proxyCfg.stock.symbol,
        this.aliasymbol = void 0,
        this.name = void 0,
        this.sname = void 0,
        this.alias = void 0,
        this.nu = this.selfCfg.nu,
        this.separate = 0,
        this.urlData = void 0,
        this.cb = void 0,
        this.toReCalc = !1,
        this.selfDataUrl = void 0,
        this.selfDataUrlUpdate = void 0,
        this.df = void 0,
        this.viewState = this.proxyCfg.stock.viewState,
        this.datas = null,
        this.wrap = void 0,
        this.titleCtn = void 0,
        this.titleO = void 0,
        this.indicatorArr = void 0,
        this.line = void 0,
        this.h = this.selfCfg.h,
        this.mh = this.selfCfg.mh,
        this.eh = this.selfCfg.eh,
        this.labelMaxP = 0 / 0,
        this.labelMinP = 0 / 0,
        this.maxPrice = 0 / 0,
        this.minPrice = 0 / 0,
        this.pricePosArr = void 0,
        this.labelPriceCount = 2,
        this.isMain = !0,
        this.oriArr = void 0,
        this.selfArr = [],
        this.disMod = 1,
        this.tkProp = {
            close: "close"
        },
        this.customArr = void 0,
        this.DEFAULT_ARR,
        this.updateId = void 0,
        this.updateCount = 0,
        this.UPDATE_THRESHOLD = 0,
        this.__iOffsetX = 0,
        this.asPChart = !1,
        this.vaObj = void 0,
        this.param = void 0,
        this.lw = 1.3,
        this.ic({
            h: this.h
        })
    }
    function r(t, i) {
        var r = {
            isBlank: !0,
            ctnId: "blankctn_" + t.uid,
            allowrfs: !1,
            h: t.DIMENSION.H_BLK
        };
        a.call(this, t, i, r),
        this.name = "BLANKCTN",
        this.newParam = function() {}
    }
    function s(i, r) {
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#007cc8",
            prop: "adl",
            idct: "ADL"
        }],
        a.call(this, i, r),
        this.name = "ADL",
        this.sname = "T_ADL",
        this.disMod = i.datas.tDataLen;
        var s = "#b82c0c"
          , e = "#2ec196";
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i);
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var r, s, e = 0, h = a.length; h > e; e++) {
                r = a[e],
                s = r.price - (r.avg_price || 0);
                var l = {
                    adl: s
                };
                l[yt + "price"] = r.price,
                this.selfArr.push(l)
            }
        }
        ,
        this.draw = function() {
            if (this.datas) {
                var t = this.line;
                t.clear(!0, i.PARAM.getHd());
                for (var a, r, h, l = this.datas.length, o = i.DIMENSION.w_t / l, n = o * Nt, c = .5 * this.h, f = 0; 2 > f; f++) {
                    r = o * Nt,
                    t.beginPath();
                    for (var d = 0; l > d && (a = this.datas[d],
                    !(a.ignore_price < 0)); d++)
                        h = a.adly,
                        0 == f ? a.adl > 0 && t.drawVStickC(r, h, n, c - h, s) : a.adl < 0 && t.drawVStickC(r, h, n, c - h, e),
                        r += o;
                    t.stroke()
                }
                t.drawBg()
            }
        }
    }
    function e(i, r) {
        this.DEFAULT_ARR = [{
            v: 26,
            color: "#75B2A3",
            prop: "asi",
            idct: "ASI"
        }, {
            v: 10,
            color: "#68A3FF",
            prop: "asit",
            idct: "ASIT"
        }],
        a.call(this, i, r),
        this.name = "ASI";
        var s = Ot.calcREF
          , e = Ot.calcABS
          , h = Ot.calcMAX
          , l = Ot.calcSUM
          , o = Ot.calcMA
          , n = Ot.getArr
          , c = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            for (var a = this.customArr, r = a[0].v, f = a[1].v, d = n(i, "close"), u = n(i, "high"), A = n(i, "low"), p = n(i, "open"), v = s(d, 1), g = e(c(u, v, "-")), m = e(c(A, v, "-")), b = e(c(u, s(A, 1), "-")), w = e(c(v, s(p, 1), "-")), y = [], D = 0, M = g.length; M > D; D++)
                y.push(g[D] > m[D] && g[D] > b[D] ? g[D] + m[D] / 2 + w[D] / 4 : m[D] > b[D] && m[D] > g[D] ? m[D] + g[D] / 2 + w[D] / 4 : b[D] + w[D] / 4);
            var N = c(c(c(c(d, v, "-"), c(c(d, p, "-"), 2, "/"), "+"), v, "+"), s(p, 1), "-")
              , O = c(c(c(N, 16, "*"), y, "/"), h(g, m), "*")
              , S = l(O, r)
              , I = o(S, f);
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var T = 0, k = i.length; k > T; T++)
                this.selfArr[T] = {
                    asi: S[T],
                    asit: I[T]
                }
        }
    }
    function h(i, r) {
        this.DEFAULT_ARR = [{
            v: 11,
            color: "#999999",
            prop: "bbiboll",
            idct: "BBIBOLL"
        }, {
            v: 6,
            color: "#ffac03",
            prop: "upr",
            idct: "UPR"
        }, {
            v: 0 / 0,
            color: "#9922aa",
            prop: "dwn",
            idct: "DWN"
        }],
        a.call(this, i, r),
        this.name = "BBIBOLL",
        "k" != r.type && (this.sname = "T_" + this.name);
        var s = Ot.calcMA
          , e = Ot.calcSTD
          , h = Ot.getArr
          , l = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i)
              , r = this.customArr[0].v
              , o = this.customArr[1].v
              , n = h(a, this.tkProp.close)
              , c = l(l(l(l(s(n, 3), s(n, 6), "+"), s(n, 12), "+"), s(n, 24), "+"), 4, "/")
              , f = l(c, l(e(c, r), o, "*"), "+")
              , d = l(c, l(e(c, r), o, "*"), "-");
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var u = 0, A = a.length; A > u; u++)
                this.selfArr[u] = {
                    bbiboll: c[u],
                    upr: f[u],
                    dwn: d[u]
                },
                this.selfArr[u][Dt] = a[u].volume < 0
        }
    }
    function l(i, r) {
        this.DEFAULT_ARR = [{
            v: 22,
            color: "#fa6d6d",
            prop: "m",
            idct: "M"
        }, {
            color: "#2b55ff"
        }],
        a.call(this, i, r),
        this.name = "BF";
        var s = Ot.calcMA
          , e = Ot.getArr;
        this.initAndCalcAll = function(i) {
            var a = this.customArr
              , r = a[0].v
              , h = e(i, "high")
              , l = s(h, r);
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var o = 0, n = i.length; n > o; o++)
                this.selfArr[o] = {
                    m: l[o]
                }
        }
        ,
        this.draw = function(a, r) {
            function s(t, i, a) {
                for (var r = t.length, s = t[r - 1][i], e = r - 1, h = t.length; h--; ) {
                    var l = t[h][i];
                    a ? l > s && (s = l,
                    e = h) : s > l && (s = l,
                    e = h)
                }
                return e
            }
            if (this.__iOffsetX = isNaN(r) ? this.__iOffsetX : r,
            this.datas) {
                var e = this.line;
                e.clear(!0, i.PARAM.getHd());
                for (var h, l, o, n = Ot.calcREF, c = Ot.getArr, f = c(this.selfArr, "m"), d = n(f, 1), u = this.viewState.start, A = this.viewState.end, p = t.hex2dec(this.customArr[0].color, .5), v = t.hex2dec(this.customArr[1].color, .5), g = u; A > g; g++) {
                    if ("undefined" == typeof h && (h = f[g] - d[g] >= 0 ? 1 : -1,
                    l = h,
                    o = g),
                    h = f[g] - d[g] >= 0 ? 1 : -1,
                    g == A - 1 && (h = -l),
                    h != l) {
                        e.beginPath(),
                        e.moveTo(this.oriArr[g].ix, this.datas[g - u].my),
                        e.lineTo(this.oriArr[o].ix, this.datas[o - u].my);
                        var m;
                        -1 == h ? (m = s(this.oriArr.slice(o, g + 1), "high", !0) + o,
                        e.lineTo(this.oriArr[m].ix, this.oriArr[m].hy),
                        e.newFillStyle([p])) : (m = s(this.oriArr.slice(o, g + 1), "low", !1) + o,
                        e.lineTo(this.oriArr[m].ix, this.oriArr[m].ly),
                        e.newFillStyle([v])),
                        e.fill(),
                        o = g
                    }
                    l = h
                }
                a && e.drawBg(this.__iOffsetX)
            }
        }
    }
    function o(i, r) {
        this.DEFAULT_ARR = [{
            v: 6,
            color: "#FD9C35",
            prop: "bias1",
            idct: "BIAS1"
        }, {
            v: 12,
            color: "#00c1eb",
            prop: "bias2",
            idct: "BIAS2"
        }, {
            v: 24,
            color: "#DD4444",
            prop: "bias3",
            idct: "BIAS3"
        }],
        a.call(this, i, r),
        this.name = "BIAS",
        "k" != r.type && (this.sname = "T_" + this.name),
        this.vaObj = {
            min: 0 / 0,
            max: 0 / 0,
            glv: 0
        };
        var s = Ot.calcMA
          , e = Ot.getArr
          , h = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i)
              , r = this.customArr[0].v
              , l = this.customArr[1].v
              , o = this.customArr[2].v
              , n = e(a, this.tkProp.close)
              , c = h(h(h(n, s(n, r), "-"), s(n, r), "/"), 100, "*")
              , f = h(h(h(n, s(n, l), "-"), s(n, l), "/"), 100, "*")
              , d = h(h(h(n, s(n, o), "-"), s(n, o), "/"), 100, "*");
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var u = 0, A = a.length; A > u; u++)
                this.selfArr[u] = {
                    bias1: c[u],
                    bias2: f[u],
                    bias3: d[u]
                },
                this.selfArr[u][Dt] = a[u].volume < 0
        }
    }
    function n(i, r) {
        this.DEFAULT_ARR = [{
            v: 20,
            color: "#999999",
            prop: "boll",
            idct: "BOLL"
        }, {
            v: 2,
            color: "#ffac03",
            prop: "upper",
            idct: "UPPER"
        }, {
            v: 0 / 0,
            color: "#cc22ba",
            prop: "lower",
            idct: "LOWER"
        }],
        a.call(this, i, r),
        this.name = "BOLL",
        "k" != r.type && (this.sname = "T_" + this.name);
        var s = Ot.getArr
          , e = Ot.calcMA
          , h = Ot.calcSTD
          , l = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i)
              , r = this.customArr[0].v
              , o = this.customArr[1].v
              , n = getArr(a, this.tkProp.close)
              , c = calcMA(n, r)
              , f = operateArr(calcSTD(n, r), o, "*")
              , d = operateArr(c, f, "+")
              , u = operateArr(c, f, "-");
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var A = 0, p = a.length; p > A; A++)
                this.selfArr[A] = {
                    boll: c[A],
                    upper: d[A],
                    lower: u[A]
                },
                this.selfArr[A][Dt] = a[A].volume < 0
        }
    }
    function c(i, r) {
        this.DEFAULT_ARR = [{
            v: 26,
            color: "#E297FF",
            prop: "br",
            idct: "BR"
        }, {
            color: "#666666",
            prop: "ar",
            idct: "AR"
        }],
        a.call(this, i, r),
        this.name = "BRAR",
        this.vaObj = {
            glv: 150
        };
        var s = Ot.calcSUM
          , e = Ot.calcMAX
          , h = Ot.calcREF
          , l = Ot.getArr
          , o = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            var a = this.customArr
              , r = a[0].v
              , n = l(i, "high")
              , c = l(i, "close")
              , f = l(i, "open")
              , d = l(i, "low")
              , u = h(c, 1)
              , A = o(o(s(e(0, o(n, u, "-")), r), s(e(0, o(u, d, "-")), r), "/"), 100, "*")
              , p = o(o(s(o(n, f, "-"), r), s(o(f, d, "-"), r), "/"), 100, "*");
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var v = 0, g = i.length; g > v; v++)
                this.selfArr[v] = {
                    br: A[v],
                    ar: p[v]
                }
        }
    }
    function f(i, r) {
        this.DEFAULT_ARR = [{
            v: 14,
            color: "#FFAC03",
            prop: "cci",
            idct: "CCI"
        }],
        a.call(this, i, r),
        this.name = "CCI",
        this.vaObj = {
            upper: 100,
            lower: -100,
            glv: 0
        };
        var s = Ot.calcAVEDEV
          , e = Ot.calcMA
          , h = Ot.operateArr
          , l = Ot.getArr;
        this.initAndCalcAll = function(i) {
            var a = this.customArr
              , r = 14
              , o = getArr(i, "close")
              , n = getArr(i, "high")
              , c = getArr(i, "low")
              , f = operateArr(operateArr(operateArr(n, c, "+"), o, "+"), 3, "/")
              , d = operateArr(operateArr(f, calcMA(f, r), "-"), operateArr(calcAVEDEV(f, r), .015, "*"), "/");
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var u = 0, A = i.length; A > u; u++)
                this.selfArr[u] = {
                    cci: d[u]
                }
        }
    }
    function d(i, r, s) {
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#ff8400",
            prop: "value",
            idct: "\u7b79\u7801\u6210\u672c"
        }],
        a.call(this, i, r),
        this.name = "CHIPCOST",
        this.lw = 2,
        this.cb = s,
        this.selfDataUrl = "http://zhengu.finance.sina.com.cn/cn/api/openapi.php/ZGService.chipCost?symbol=$symbol&callback=var $cb=";
        var e = "chip_";
        this.selfDataUrlUpdate = "http://" + gt + ".sinajs.cn/etag.php?_=" + (new Date).getTime() + "&list=" + e + "$symbol",
        this.toReCalc = !0,
        this.loadedFlag = {},
        this.loadedFromTo = void 0,
        this.loadUrlData = function() {
            var i = this.getFromToM.get(this);
            if (i) {
                var a = this
                  , r = this.symbol
                  , s = "_touzi_chip_" + r
                  , e = this.selfDataUrl.replace("$symbol", r).replace("$cb", s);
                this.proxyCfg.usrObj.ssl && (e = t.getSUrl(e)),
                t.load(e, function() {
                    var t = window[s].result.data;
                    a.urlData || (a.urlData = {
                        day: []
                    });
                    var i = a.df(t)
                      , r = a.urlData.day;
                    r.splice.apply(r, [0, 0].concat(i)),
                    r.sort(function(t, i) {
                        return t.date - i.date
                    }),
                    a.toReCalc = !0,
                    a.cb(a)
                })
            }
        }
        ,
        this.df = function(t) {
            var i = [];
            if (t) {
                var a = t;
                for (var r in a)
                    a.hasOwnProperty(r) && i.push({
                        value: a[r],
                        date: At.sd(r)
                    })
            }
            return i
        }
        ;
        this.UPDATE_THRESHOLD = 3,
        this.update = function() {
            return
        }
        ,
        this.udf = function(t) {
            if (t) {
                var i, a = t.split(",");
                return a && a.length > 1 && (i = [{
                    date: At.sd(a[0]),
                    value: a[1]
                }]),
                i
            }
        }
        ,
        this.updateData = function(t, i, a) {
            if (t && i && !(i.length < 1)) {
                var r = i[i.length - 1];
                if (t = t[0])
                    if (At.stbd(t.date, r.date))
                        for (var s in t)
                            t.hasOwnProperty(s) && "undefined" != typeof r[s] && (r[s] = t[s]);
                    else
                        t.date > r.date && this.newData(i, t, a)
            }
        }
        ,
        this.setPricePos = function(t) {
            t && (this.labelMaxP = t[0],
            this.labelMinP = t[1],
            this.pricePosArr = t),
            this.createPlayingData()
        }
        ,
        this.initAndCalcAll = function(i) {
            if (this.oriArr = i,
            this.urlData && this.toReCalc) {
                this.toReCalc = !1,
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                for (var a, r = this.urlData.day, s = t.kUtil.adbd(r, i, !1, !1), e = 0, h = i.length; h > e; e++)
                    a = s[e],
                    this.selfArr.push({
                        value: Number(a.value) || Number(i[e].close)
                    })
            }
        }
        ,
        this.loadUrlData()
    }
    function u(i, r, s) {
        function e() {
            (d > i.DIMENSION.w_t || 0 > d) && (d = i.DIMENSION.w_t),
            h.titleO.canvas.style.display = "none",
            h.line.getCanvas().style.zIndex -= 2
        }
        var h = this;
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#007cc8",
            prop: "ditc",
            idct: "DITC"
        }],
        a.call(this, i, r),
        this.name = "DITC",
        this.cb = s;
        var l, o, n = "#c2c2c2", c = !0, f = "https://stock.sina.com.cn/stock/api/openapi.php/StockLevel2Service.getSummarize?symbol=$symbol&type=0&callback=$cb&dpc=1&retcode=0", d = i.DIMENSION.w_t / 2;
        this.loadUrlData = function(i) {
            if (i) {
                var a = h.symbol
                  , r = "_" + a + At.ddt(new Date).getFullYear();
                h.selfDataUrl = f,
                t.load(h.selfDataUrl.replace("$symbol", a).replace("$cb", "var%20" + r + "="), function() {
                    var t = window[r];
                    t && (h.urlData = h.oriArr = t.result.data,
                    h.toReCalc = !0,
                    c = !1,
                    h.cb(h))
                }, function() {})
            }
        }
        ,
        this.initAndCalcAll = function() {
            if (!c && (this.datas || (e(),
            this.datas = []),
            t.ca(this.selfArr),
            h.urlData)) {
                var i, a, r, s = 0, l = h.urlData.length;
                for (i = 0; l > i; i++)
                    s = Math.max(h.urlData[i].volume, s);
                for (i = 0; l > i; i++)
                    r = h.urlData[i],
                    a = r.volume * (d / s),
                    h.selfArr.push({
                        ditc: a,
                        trade: Number(r.trade)
                    })
            }
        }
        ,
        this.setRange = function() {
            if (!c && this.datas) {
                for (var t = h.selfArr.length; this.datas.length > t; )
                    this.datas.length--;
                for (; this.datas.length < t; )
                    this.datas.push({})
            }
        }
        ,
        this.setPricePos = function(t) {
            !t || this.separate > 0 ? (this.labelMinP = o || this.minPrice,
            this.labelMaxP = l || this.maxPrice) : (this.labelMaxP = l = t[0],
            this.labelMinP = o = t[1]),
            this.createPlayingData()
        }
        ,
        this.draw = function() {
            if (this.datas) {
                var t = this.line;
                t.clear(!0, i.PARAM.getHd());
                var a = this.viewState.start
                  , r = this.viewState.end;
                if (4 == a || 5 == r) {
                    var s, e = h.selfArr.length, l = i.DIMENSION.h_t / e, o = Math.min(.6 * l, 2);
                    for (t.newStyle(n, !0, o),
                    s = 0; e > s; s++) {
                        var c = h.selfArr[s]
                          , f = i.DIMENSION.h_t * (h.labelMaxP - c.trade) / (h.labelMaxP - h.labelMinP);
                        t.moveTo(0, f),
                        t.lineTo(c.ditc, f)
                    }
                    t.stroke()
                }
            }
        }
        ,
        h.loadUrlData(!0)
    }
    function A(i, r) {
        this.DEFAULT_ARR = [{
            v: 10,
            desc: "\u5feb\u7ebf\u79fb\u52a8\u5e73\u5747"
        }, {
            v: 50,
            color: "#777777",
            prop: "dif",
            idct: "DIF"
        }, {
            v: 10,
            color: "#FFAC03",
            prop: "difma",
            idct: "DIFMA"
        }],
        a.call(this, i, r),
        this.name = "DMA",
        "k" != r.type && (this.sname = "T_" + this.name),
        this.vaObj = {
            glv: 0
        };
        var s = Ot.calcMA
          , e = Ot.operateArr
          , h = Ot.getArr;
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i)
              , r = getArr(a, this.tkProp.close)
              , l = calcMA(r, 10)
              , o = calcMA(r, 50)
              , n = operateArr(l, o, "-")
              , c = calcMA(n, 10);
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var f = 0, d = a.length; d > f; f++)
                this.selfArr[f] = {
                    dif: n[f],
                    difma: c[f]
                },
                this.selfArr[f][Dt] = a[f].volume < 0
        }
    }
    function p(i, r) {
        this.DEFAULT_ARR = [{
            v: 14,
            color: "#999999",
            prop: "pdi",
            idct: "PDI",
            desc: "DMI"
        }, {
            v: 6,
            color: "#ffac03",
            prop: "mdi",
            idct: "MDI",
            desc: "\u79fb\u52a8\u5e73\u5747"
        }, {
            color: "#cc22ba",
            prop: "adx",
            idct: "ADX"
        }, {
            color: "#2ec196",
            prop: "adxr",
            idct: "ADXR"
        }],
        a.call(this, i, r),
        this.name = "DMI";
        var s = Ot.calcEMA
          , e = Ot.calcMAX
          , h = Ot.calcABS
          , l = Ot.calcREF
          , o = Ot.getArr
          , n = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            for (var a, r, 
c = 14, 
f = 6, 
d = getArr(i, "close"), 
u = getArr(i, "high"), 
A = getArr(i, "low"), 
p = calcEMA(calcMAX(calcMAX(operateArr(u, A, "-"), calcABS(operateArr(u, calcREF(d, 1), "-"))), calcABS(operateArr(A, calcREF(d, 1), "-"))), c), 
v = operateArr(u, calcREF(u, 1), "-"), 
g = operateArr(calcREF(A, 1), A, "-"), m = [], b = [], w = 0, y = v.length; y > w; w++)
                a = v[w],//upMove
                r = g[w],//downMove
                m.push(a > 0 && a > r ? a : 0),
                b.push(r > 0 && r > a ? r : 0);
            m = calcEMA(m, 14),
            b = calcEMA(b, 14);
            var D = operateArr(operateArr(m, 100, "*"), p, "/")
              , M = operateArr(operateArr(b, 100, "*"), p, "/")
              , N = calcEMA(operateArr(operateArr(calcABS(operateArr(M, D, "-")), operateArr(M, D, "+"), "/"), 100, "*"), 6)
              , O = calcEMA(N, 6);
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var S = 0, I = i.length; I > S; S++)
                this.selfArr[S] = {
                    pdi: D[S],
                    mdi: M[S],
                    adx: N[S],
                    adxr: O[S]
                }
        }
    }
    function v(i, r) {
        var s = "pct"
          , e = "oripct"
          , h = "mn";
        this.DEFAULT_ARR = [{
            color: "#fa6d6d",
            prop: s,
            idct: "\u7ea2\u7ebf\uff08\u591a\u7a7a\u4fe1\u53f7\u6536\u76ca\uff09"
        }, {
            color: "#2b55ff",
            prop: e,
            idct: "\u84dd\u7ebf\uff08\u80a1\u4ef7\u81ea\u7136\u6da8\u5e45\uff09"
        }, {
            v: 0 / 0,
            prop: h,
            idct: h,
            color: "#66ccff",
            hidecfg: !0
        }],
        a.call(this, i, r),
        this.name = "DPDK",
        this.alias = "\u5927\u76d8\u591a\u7a7a";
        var l = Ot.getArr
          , o = Ot.calcSUM
          , n = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            var a = 48
              , r = l(i, "close")
              , s = l(i, "high")
              , e = l(i, "low")
              , c = l(i, "volume")
              , f = n(n(n(n(r, e, "+"), s, "+"), 3, "/"), c, "*")
              , d = n(o(f, a), o(c, a), "/")
              , u = function() {
                for (var t = [], i = 0, a = r.length; a > i; i++)
                    t.push(r[i] >= d[i] ? 1 : 0);
                return t
            }();
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var A = 0, p = i.length; p > A; A++)
                this.selfArr[A] = {
                    flag: u[A]
                },
                this.selfArr[A][h] = d[A]
        }
        ,
        this.setRange = function() {
            if (this.datas) {
                for (var t = this.viewState.start, i = this.viewState.end, a = i - t; this.datas.length > a; )
                    this.datas.length--;
                for (; this.datas.length < a; )
                    this.datas.push({});
                for (var r = Number.MAX_VALUE, h = -Number.MAX_VALUE, l = 0, o = 0, n = this.selfArr[t].flag, c = Ot.calcA, f = Ot.getArr, d = 10, u = t; i > u; u++) {
                    var A = this.datas[u - t];
                    A.date = this.oriArr[u].date;
                    var p = this.selfArr[u].flag
                      , v = this.oriArr[u]
                      , g = c(f(this.oriArr.slice(0 > u - d + 1 ? 0 : u - d + 1, u + 1), "close"));
                    u != t ? p == n ? 1 == p && (l = (1 + v.percent) * (1 + l) - 1) : l = 0 == p ? v.open < g ? ((v.open - this.oriArr[u - 1].close) / this.oriArr[u - 1].close + 1) * (1 + l) - 1 : ((g - this.oriArr[u - 1].close) / this.oriArr[u - 1].close + 1) * (1 + l) - 1 : v.open > g ? ((v.close - v.open) / v.open + 1) * (1 + l) - 1 : ((v.close - g) / g + 1) * (1 + l) - 1 : 1 == p && (l = v.open > g ? ((v.close - v.open) / v.open + 1) * (1 + l) - 1 : ((g - v.open) / v.open + 1) * (1 + l) - 1),
                    n = p,
                    u != t && (o = (1 + v.percent) * (1 + o) - 1),
                    A[s] = 100 * l,
                    A[e] = 100 * o;
                    for (var m in this.selfArr[u])
                        if (this.selfArr[u].hasOwnProperty(m)) {
                            if (A[m] = this.selfArr[u][m],
                            "flag" == m)
                                continue;
                            A[m] > h && (h = A[m]),
                            A[m] < r && (r = A[m])
                        }
                }
                this.minPrice = r,
                this.maxPrice = h,
                this.syncI()
            }
        }
        ,
        this.draw = function(a, r) {
            if (this.__iOffsetX = isNaN(r) ? this.__iOffsetX : r,
            this.datas) {
                var s = i.DIMENSION.w_k / Math.max(this.datas.length, i.PARAM.minCandleNum)
                  , e = this.line;
                e.clear(!0, i.PARAM.getHd());
                for (var h, l, o, n, c, f = this.viewState.start, d = this.viewState.end, u = t.hex2dec(this.customArr[0].color), A = t.hex2dec(this.customArr[1].color), p = 0; 2 > p; p++) {
                    for (l = this.datas[0].flag ? 0 : 1,
                    e.newStyle([p ? u : A], !0, s / 2 > 3 ? 3 : s / 2),
                    o = f; d > o; o++)
                        h = this.datas[o - f].flag,
                        h == p && e[h == l ? "lineTo" : "moveTo"](this.oriArr[o].ix, this.datas[o - f].mny),
                        l = h;
                    for (e.stroke(),
                    l = this.datas[0].flag ? 0 : 1,
                    e.newStyle([p ? u : A], !0, 1),
                    o = f; d > o; o++)
                        if (c = this.oriArr[o],
                        h = this.datas[o - f].flag,
                        h == p) {
                            n = ~~(c.ix + .5),
                            n -= .5;
                            var v = (c.hy - c.ly) / 2;
                            e.moveTo(n, this.datas[o - f].mny + v),
                            e.lineTo(n, this.datas[o - f].mny - v)
                        }
                    e.stroke(),
                    l = this.datas[0].flag ? 0 : 1;
                    var g = p ? u : A;
                    for (g = g.match(/\d+/g),
                    g.push(.4),
                    g = "rgba(" + g + ")",
                    e.newFillStyle([g], !0, 1),
                    o = f; d > o; o++) {
                        c = this.oriArr[o],
                        h = this.datas[o - f].flag;
                        var m = c.ix;
                        n = ~~(c.ix + .5),
                        n -= .5;
                        var b = (c.hy - c.ly) / 2;
                        if (h == p && o != d - 1)
                            h != l ? (e.beginPath(),
                            e.moveTo(m, this.datas[o - f].mny + b)) : e.lineTo(m, this.datas[o - f].mny + b);
                        else if (o != f && h != l && o != d - 1 || o == d - 1 && (h == l && h == p || h != l && h != p)) {
                            var w;
                            for (o == d - 1 && h == l ? (w = o,
                            e.lineTo(m, this.datas[o - f].mny + b)) : w = o - 1; w >= f; ) {
                                var y = this.datas[w - f].flag;
                                if (y != p)
                                    break;
                                var D = this.oriArr[w]
                                  , M = D.ix
                                  , N = (D.hy - D.ly) / 2;
                                e.lineTo(M, this.datas[w - f].mny - N),
                                w--
                            }
                            e.closePath(),
                            e.fill()
                        }
                        l = h
                    }
                }
                a && e.drawBg(this.__iOffsetX)
            }
        }
    }
    function g(t, i, a) {
        v.call(this, t, i),
        this.name = "DPDKS",
        this.alias = "\u5927\u76d8\u591a\u7a7a",
        this.cb = a;
        var r = "mn";
        this.drawCalc = function() {
            if (this.datas) {
                this.setRange();
                var t, i, a, s, e = this.datas.length, h = Number.MAX_VALUE, l = -Number.MAX_VALUE;
                for (i = 0; e > i; i++)
                    for (t = this.datas[i],
                    a = this.customArr.length; a--; )
                        s = this.customArr[a].prop,
                        s && s != r && (t[s] > l && (l = t[s]),
                        t[s] < h && (h = t[s]));
                this.labelMaxP = this.maxPrice = l,
                this.labelMinP = this.minPrice = h;
                var o = l - h;
                for (i = 0; e > i; i++)
                    for (t = this.datas[i],
                    a = this.customArr.length; a--; )
                        s = this.customArr[a].prop,
                        s && s != r && (t[s + "y"] = this.h * (l - t[s]) / o)
            }
        }
        ,
        this.draw = function(t, i) {
            if (this.__iOffsetX = isNaN(i) ? this.__iOffsetX : i,
            this.datas) {
                this.line.clear(!0, this.cfg.PARAM.getHd());
                var a = this.h * this.maxPrice / (this.maxPrice - this.minPrice) - .5;
                this.line.newStyle(this.cfg.COLOR.GRID, !0, 2),
                this.line.moveTo(0, a),
                this.line.lineTo(this.cfg.DIMENSION.w_k, a),
                this.line.stroke();
                for (var r, s = this.datas.length, e = this.cfg.DIMENSION.w_k / Math.max(s, this.cfg.PARAM.minCandleNum), h = this.customArr.length; h--; ) {
                    var l = this.customArr[h].prop + "y";
                    r = this.__iOffsetX - e * Mt,
                    this.line.newStyle(this.customArr[h].color, !0, 1.5);
                    for (var o, n = 0; s > n && (o = this.datas[n][l],
                    !isNaN(o)); n++)
                        0 == n ? this.line.moveTo(r, o) : this.line.lineTo(r, o),
                        r += e;
                    this.line.stroke()
                }
                t && this.line.drawBg(this.__iOffsetX)
            }
        }
    }
    function m(i, r) {
        this.DEFAULT_ARR = [{
            v: 14,
            color: "#D96FF0",
            prop: "emv",
            idct: "EMV"
        }, {
            v: 9,
            color: "#F76D6D",
            prop: "maemv",
            idct: "MAEMV"
        }],
        a.call(this, i, r),
        this.name = "EMV",
        this.vaObj = {
            glv: 0
        };
        var s = Ot.calcMA
          , e = Ot.calcREF
          , h = Ot.getArr
          , l = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            var a = this.customArr
              , r = a[0].v
              , o = a[1].v
              , n = h(i, "high")
              , c = h(i, "low")
              , f = h(i, "volume")
              , d = l(s(f, r), f, "/")
              , u = l(n, c, "+")
              , A = l(n, c, "-")
              , p = l(l(l(u, e(u, 1), "-"), u, "/"), 100, "*")
              , v = s(l(l(l(p, d, "*"), A, "*"), s(A, r), "/"), r)
              , g = s(v, o);
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var m = 0, b = i.length; b > m; m++)
                this.selfArr[m] = {
                    emv: v[m],
                    maemv: g[m]
                }
        }
    }
    function b(i, r, s) {
        this.DEFAULT_ARR = [],
        a.call(this, i, r);
        var e = this;
        this.name = "KYZ",
        this.alias = "--",
        this.cc = ["#A48B72", "#C0AF9D", "#747C95", "#ffffff"],
        this.cb = s,
        this.selfDataUrl = "//zhengu.finance.sina.com.cn/cn/api/openapi.php/ZGService.JSFX?symbol=$symbol&callback=$cb&=$rn" + Math.random();
        this.wei = {
            high: 0,
            low: 0,
            cb: 0
        },
        this.weiIndex = {
            high: 0,
            low: 0
        },
        this.weihigh = [],
        this.weilow = [];
        var h, l, o = !1;
        this.loadUrlData = function() {
            var i = this.aliasymbol || this.symbol
              , a = "_yzFinance_" + i
              , s = r.stock.market.toLowerCase() || "cn";
            switch (s) {
            case "hk":
                i = i.replace("rt_hk", "");
                break;
            case "us":
                i = i.replace("gb_", "").replace(/\$/, ".")
            }
            var n = this.selfDataUrl.replace("$symbol", i).replace("$cb", "var%20" + a + "=") + "&market=" + s;
            if (!o) {
                h = t.tUtil.gata(r.usrObj.market);
                var c = function() {
                    t.load(n, function() {
                        var t = window[a];
                        e.wei.cb = t.result.data.cost_avg,
                        window[a] = null,
                        e.urlData = [],
                        e.urlData = t.result.data.pic,
                        e.fM = f(t.result.data.pic1),
                        o = !0,
                        u(r.stock.hq, e.urlData),
                        e.cb(e)
                    })
                }
                  , f = function(t) {
                    var i = {
                        max: -1e3,
                        min: 1e6
                    };
                    if (t.length > 0)
                        for (var a = 0; a < t.length; a++)
                            i.max = Math.max(t[a].high, i.max),
                            i.min = Math.min(t[a].low, i.min);
                    return i
                }
                  , d = function() {
                    var t = e.urlData.length;
                    e.weihigh = [],
                    e.weilow = [];
                    for (var i = 0; t > i; i++) {
                        var a = e.urlData[i];
                        "1" == a.type ? e.weihigh.push(a) : e.weilow.push(a)
                    }
                }
                  , u = function(t, i) {
                    var a = i.length;
                    d();
                    var r = e.weilow.length
                      , s = e.weihigh.length;
                    if (i.length <= 0)
                        return e.wei.high = t.high || t.price,
                        void (e.wei.low = t.low || t.price);
                    if (s > 0 && Number(e.weihigh[s - 1].price) > Number(t.price) && r > 0 && Number(e.weilow[r - 1].price) < Number(t.price))
                        e.wei.high = e.weihigh[s - 1].price,
                        e.wei.low = e.weilow[r - 1].price;
                    else {
                        if (s > 0 && Number(t.price) > Number(e.weihigh[s - 1].price)) {
                            e.wei.low = Number(e.weihigh[s - 1].price);
                            for (var h = a - 1; h >= 0; h--) {
                                if (Number(t.price) < Number(i[h].price)) {
                                    e.wei.high = Number(i[h].price);
                                    break
                                }
                                0 == h && (e.fM.max > 0 ? (console.log(e.fM.max),
                                e.wei.high = Math.max(Number(e.fM.max), Number(t.high))) : e.wei.high = Number(t.high))
                            }
                        }
                        if (r > 0 && Number(t.price) < Number(e.weilow[r - 1].price)) {
                            e.wei.high = Number(e.weilow[r - 1].price);
                            for (var h = a - 1; h >= 0; h--) {
                                if (Number(t.price) > Number(i[h].price)) {
                                    e.wei.low = Number(i[h].price);
                                    break
                                }
                                0 == h && (e.wei.low = e.fM.min > 0 ? Math.min(Number(t.low), Number(e.fM.min)) : Number(t.low))
                            }
                        }
                        0 == r && Number(e.weihigh[s - 1].price) > Number(t.price) && (e.wei.high = Number(e.weihigh[s - 1].price),
                        e.wei.low = Number(t.low)),
                        0 == s && Number(e.weilow[r - 1].price) < Number(t.price) && (e.wei.low = Number(e.weilow[r - 1].price),
                        e.wei.high = Number(t.high)),
                        0 == e.wei.low && (e.wei.low = t.low),
                        0 == e.wei.high && (e.wei.high = t.high)
                    }
                };
                c(),
                l && (clearInterval(l),
                l = null),
                l = setInterval(function() {
                    c()
                }, 6e5)
            }
        }
        ,
        this.initAndCalcAll = function(i) {
            this.urlData && (this.oriArr = this.gdsd(i),
            !this.datas && (this.datas = []),
            t.ca(this.selfArr))
        }
        ,
        this.draw = function() {
            if (this.datas) {
                var t = this.line;
                t.clear(!0, i.PARAM.getHd()),
                t.beginPath(),
                t.newStyle([this.cc[0]]);
                var a = (this.proxyCfg.stock.labelMaxP - this.wei.high) * i.DIMENSION.h_k / (this.proxyCfg.stock.labelMaxP - this.proxyCfg.stock.labelMinP)
                  , r = 0
                  , s = 5;
                for (a = ~~(a + .5),
                a -= .5; r < i.DIMENSION.w_k; )
                    t.moveTo(r, a),
                    r += s,
                    t.lineTo(r, a),
                    r += s;
                t.stroke(),
                t.beginPath(),
                t.newStyle([this.cc[1]]);
                var e = (this.proxyCfg.stock.labelMaxP - this.wei.low) * i.DIMENSION.h_k / (this.proxyCfg.stock.labelMaxP - this.proxyCfg.stock.labelMinP);
                for (r = 0,
                s = 5,
                e = ~~(e + .5),
                e -= .5; r < i.DIMENSION.w_k; )
                    t.moveTo(r, e),
                    r += s,
                    t.lineTo(r, e),
                    r += s;
                if (t.stroke(),
                !(this.wei.cb <= 0)) {
                    t.beginPath(),
                    t.newStyle([this.cc[2]]);
                    var e = (this.proxyCfg.stock.labelMaxP - this.wei.cb) * i.DIMENSION.h_k / (this.proxyCfg.stock.labelMaxP - this.proxyCfg.stock.labelMinP);
                    r = 0,
                    e = ~~(e + .5),
                    e -= .5,
                    t.moveTo(r, e),
                    t.lineTo(i.DIMENSION.w_k, e),
                    t.stroke()
                }
            }
        }
    }
    function w(i, r, s) {
        this.DEFAULT_ARR = [],
        a.call(this, i, r);
        var e = this;
        this.name = "KYZN",
        this.alias = "--",
        this.cc = ["#A48B72", "#C0AF9D", "#747C95", "#ffffff"],
        this.cb = s,
        this.selfDataUrl = "//zhengu.finance.sina.com.cn/cn/api/openapi.php/ZGService.JSFX?symbol=$symbol&callback=$cb&=$rn" + Math.random();
        this.wei = {
            high: 0,
            low: 0,
            cb: 0
        },
        this.weiIndex = {
            high: 0,
            low: 0
        },
        this.weihigh = [],
        this.weilow = [];
        var h, l, o = !1;
        this.loadUrlData = function() {
            var i = this.aliasymbol || this.symbol
              , a = "_yzFinance_" + i
              , s = r.stock.market.toLowerCase() || "cn";
            switch (s) {
            case "hk":
                i = i.replace("rt_hk", ""),
                i = i.replace("hk", "");
                break;
            case "us":
                i = i.replace("gb_", "").replace(/\$/, ".")
            }
            var n = this.selfDataUrl.replace("$symbol", i).replace("$cb", "var%20" + a + "=") + "&market=" + s;
            if (!o) {
                h = t.tUtil.gata(r.usrObj.market);
                var c = function() {
                    t.load(n, function() {
                        var t = window[a];
                        e.wei.cb = t.result.data.cost_avg,
                        window[a] = null,
                        e.urlData = [],
                        e.urlData = t.result.data.pic,
                        e.fM = f(t.result.data.pic1),
                        o = !0,
                        d(e.urlData),
                        u(r.stock.hq, e.urlData),
                        e.cb(e)
                    })
                }
                  , f = function(t) {
                    var i = {
                        max: -1e3,
                        min: 1e6
                    };
                    if (t.length > 0)
                        for (var a = 0; a < t.length; a++)
                            i.max = Math.max(t[a].high, i.max),
                            i.min = Math.min(t[a].low, i.min);
                    return i
                }
                  , d = function(t) {
                    t && t.sort(function(t, i) {
                        return Number(t.price) - Number(i.price)
                    })
                }
                  , u = function(t, i) {
                    var a = i.length;
                    if (0 >= a)
                        return e.wei.high = t.high || t.price,
                        void (e.wei.low = t.low || t.price);
                    for (var r = void 0, s = void 0, h = 0 / 0, l = 0 / 0, o = .1, n = [], c = [], f = 0; f < i.length; f++) {
                        var d = t.price - i[f].price;
                        0 > d ? (s = d,
                        n.unshift(f)) : (r = d,
                        c.push(f))
                    }
                    if (n.length > 0 && c.length > 0) {
                        var u = n.length - 1
                          , A = c.length - 1;
                        l = n[u],
                        h = c[A];
                        var p = (i[l].price - i[h].price) / i[h].price;
                        if (.1 > p)
                            if (i[l].dt > i[h].dt)
                                for (var v = 0, f = c.length - 1; f >= 0; f--) {
                                    var g = (i[n[u]].price - i[c[f]].price) / i[c[f]].price;
                                    if (g > o) {
                                        h = c[f],
                                        v = 1;
                                        break
                                    }
                                    0 != f || v || (h = 0 / 0)
                                }
                            else
                                for (var v = 0, f = n.length - 1; f >= 0; f--) {
                                    var m = (i[n[f]].price - i[c[A]].price) / i[c[A]].price;
                                    if (m > o) {
                                        l = n[f],
                                        v = 1;
                                        break
                                    }
                                    0 != f || v || (l = 0 / 0)
                                }
                    }
                    isNaN(h) || (e.wei.low = i[h].price),
                    isNaN(l) || (e.wei.high = i[l].price),
                    e.wei.low || (e.wei.low = Math.min(e.fM.min, Number(t.low))),
                    e.wei.high || (e.wei.high = Math.max(e.fM.max, Number(t.high)))
                };
                c(),
                l && (clearInterval(l),
                l = null),
                l = setInterval(function() {
                    c()
                }, 6e5)
            }
        }
        ,
        this.initAndCalcAll = function(i) {
            this.urlData && (this.oriArr = this.gdsd(i),
            !this.datas && (this.datas = []),
            t.ca(this.selfArr))
        }
        ,
        this.draw = function() {
            if (this.datas) {
                var t = this.line;
                t.clear(!0, i.PARAM.getHd()),
                t.beginPath(),
                t.newStyle([this.cc[0]]);
                var a = (this.proxyCfg.stock.labelMaxP - this.wei.high) * i.DIMENSION.h_k / (this.proxyCfg.stock.labelMaxP - this.proxyCfg.stock.labelMinP)
                  , r = 0
                  , s = 5;
                for (a = ~~(a + .5),
                a -= .5; r < i.DIMENSION.w_k; )
                    t.moveTo(r, a),
                    r += s,
                    t.lineTo(r, a),
                    r += s;
                t.stroke(),
                t.beginPath(),
                t.newStyle([this.cc[1]]);
                var e = (this.proxyCfg.stock.labelMaxP - this.wei.low) * i.DIMENSION.h_k / (this.proxyCfg.stock.labelMaxP - this.proxyCfg.stock.labelMinP);
                for (r = 0,
                s = 5,
                e = ~~(e + .5),
                e -= .5; r < i.DIMENSION.w_k; )
                    t.moveTo(r, e),
                    r += s,
                    t.lineTo(r, e),
                    r += s;
                if (t.stroke(),
                !(this.wei.cb <= 0)) {
                    t.beginPath(),
                    t.newStyle([this.cc[2]]);
                    var e = (this.proxyCfg.stock.labelMaxP - this.wei.cb) * i.DIMENSION.h_k / (this.proxyCfg.stock.labelMaxP - this.proxyCfg.stock.labelMinP);
                    r = 0,
                    e = ~~(e + .5),
                    e -= .5,
                    t.moveTo(r, e),
                    t.lineTo(i.DIMENSION.w_k, e),
                    t.stroke()
                }
            }
        }
    }
    function y(i, r, s) {
        this.DEFAULT_ARR = [],
        a.call(this, i, r);
        var e = this;
        this.name = "TBS",
        this.alias = "\u5206\u65f6\u591a\u7a7a",
        this.cc = ["#FF4940", "#2FB75B", "#ffffff", "#F0AA36"],
        this.cb = s,
        this.selfDataUrl = "https://izq.sina.com.cn/api/openapi.php/YrService.drawingData?symbol=$symbol&callback=$cb&rn=" + Math.random();
        var h, l, o = !1;
        this.loadUrlData = function() {
            var i = this.aliasymbol || this.symbol
              , a = "_bsFinance_" + i
              , s = this.selfDataUrl.replace("$symbol", i).replace("$cb", "var%20" + a + "=");
            if (!o) {
                h = t.tUtil.gata(r.usrObj.market);
                var n = function() {
                    t.load(s, function() {
                        var t = window[a];
                        window[a] = null,
                        e.urlData = [],
                        t && t.data && t.data.list && t.data.list.length > 0 && (e.urlData = t.data.list),
                        o = !0,
                        e.cb(e)
                    })
                };
                n(),
                l && (clearInterval(l),
                l = null),
                l = setInterval(function() {
                    n()
                }, 6e4)
            }
        }
        ,
        this.initAndCalcAll = function(i) {
            if (this.urlData) {
                this.oriArr = this.gdsd(i),
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var a, s = this.urlData, h = r.stock.realLen;
                0 > h && (h = e.disMod);
                var l = 0;
                for (a = 0; a <= e.disMod && !(a > h); a++)
                    for (var o = l; o < s.length; o++)
                        if (s[o].time === i[4][a].time) {
                            i[4][a].signal = s[o].signal,
                            i[4][a].reverse = s[o].reverse,
                            l++;
                            break
                        }
                for (var n, c = 0, f = this.oriArr.length; f > c; c++)
                    n = this.oriArr[c],
                    this.selfArr.push({
                        signal: n ? Number(n.signal) : ""
                    })
            }
        }
        ,
        this.draw = function(t, a) {
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var r = function(t, i, a, r, s, e, h) {
                    var e = e
                      , l = e[0]
                      , o = e[1]
                      , n = e[2]
                      , c = e[3];
                    t.beginPath(0),
                    t.fillStyle = h,
                    t.arc(i - l + r, a - l + s, l, 0, Math.PI / 2),
                    t.arc(o + r, a - o + s, o, Math.PI / 2, Math.PI),
                    t.arc(n + r, n + s, n, Math.PI, 3 * Math.PI / 2),
                    t.arc(i - c + r, c + s, c, 3 * Math.PI / 2, 2 * Math.PI),
                    t.closePath()
                }
                  , s = this.line;
                s.clear(!0, i.PARAM.getHd());
                var e = this.viewState.start
                  , h = this.viewState.end
                  , l = (h - e) * this.disMod
                  , o = 5
                  , n = 5
                  , c = 5
                  , f = 5;
                if (5 === h && 4 === e)
                    for (var d = this.cfg.DIMENSION.w_t / l, u = 0; 3 > u; u++) {
                        var A = this.cc[u];
                        p = d * Nt;
                        for (var p, v = 0; l > v; v++) {
                            var g = v + this.disMod * e;
                            if (this.oriArr[g].signal) {
                                s.newStyle(A, !0, 0),
                                s.newFillStyle([A]);
                                var m, b, w, y = this.oriArr[g].py;
                                (0 === u && "\u673a\u4f1a" === this.oriArr[g].signal || 1 === u && "\u98ce\u9669" === this.oriArr[g].signal) && (s.moveTo(p, y),
                                s.arc(p, y, 3, 0, 2 * Math.PI),
                                p > this.cfg.DIMENSION.w_t - 50 ? (m = p - 20,
                                o = 0,
                                n = 5) : (m = p + 8,
                                o = 5,
                                n = 0),
                                y > this.cfg.DIMENSION.h_t - 20 ? (b = y - 8,
                                c = 5,
                                f = 5) : 20 > y ? (b = y + 20,
                                o = 5,
                                n = 5,
                                c = 0) : (b = y - 8,
                                o = 5,
                                n = 0),
                                s.fill(),
                                r(s.getG(), 28, 14, m - 8, b - 12, [o, n, c, f]),
                                s.fill(),
                                s.closePath()),
                                2 === u && (m = p > this.cfg.DIMENSION.w_t - 50 ? p - 16 : p + 12,
                                b = y > this.cfg.DIMENSION.h_t - 20 ? y + 2 : 20 > y ? y + 30 : y + 3,
                                w = this.oriArr[g].signal,
                                s.getG().fillText(w, m - 8, b - 12))
                            }
                            p += d
                        }
                        s.stroke(),
                        s.fill()
                    }
            }
        }
    }
    function D(i, r, s) {
        this.DEFAULT_ARR = [],
        a.call(this, i, r);
        var e = this;
        this.name = "HJFZ",
        this.alias = "\u9ec4\u91d1\u53cd\u8f6c",
        this.cc = ["#F0AA36", "#ffffff"],
        this.cb = s,
        this.selfDataUrl = "https://izq.sina.com.cn/api/openapi.php/YrService.drawingData?symbol=$symbol&callback=$cb&rn=" + Math.random();
        var h, l, o = !1;
        this.loadUrlData = function() {
            var i = this.aliasymbol || this.symbol
              , a = "_bsFinance2_" + i
              , s = this.selfDataUrl.replace("$symbol", i).replace("$cb", "var%20" + a + "=");
            if (!o) {
                h = t.tUtil.gata(r.usrObj.market);
                var n = function() {
                    t.load(s, function() {
                        var t = window[a];
                        window[a] = null,
                        e.urlData = [],
                        t && t.data && t.data.list && t.data.list.length > 0 && (e.urlData = t.data.list),
                        o = !0,
                        e.cb(e)
                    })
                };
                n(),
                l && (clearInterval(l),
                l = null),
                l = setInterval(function() {
                    n()
                }, 6e4)
            }
        }
        ,
        this.initAndCalcAll = function(i) {
            if (this.urlData) {
                this.oriArr = this.gdsd(i),
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var a, s = this.urlData, h = r.stock.realLen;
                0 > h && (h = e.disMod);
                var l = 0;
                for (a = 0; a <= e.disMod && !(a > h); a++)
                    for (var o = l; o < s.length; o++)
                        if (s[o].time === i[4][a].time) {
                            i[4][a].signal = s[o].signal,
                            i[4][a].reverse = s[o].reverse,
                            l++;
                            break
                        }
                for (var n, c = 0, f = this.oriArr.length; f > c; c++)
                    n = this.oriArr[c],
                    this.selfArr.push({
                        signal: n ? Number(n.signal) : ""
                    })
            }
        }
        ,
        this.draw = function(t, a) {
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var r = function(t, i, a, r, s, e, h) {
                    var e = e
                      , l = e[0]
                      , o = e[1]
                      , n = e[2]
                      , c = e[3];
                    t.beginPath(0),
                    t.fillStyle = h,
                    t.arc(i - l + r, a - l + s, l, 0, Math.PI / 2),
                    t.arc(o + r, a - o + s, o, Math.PI / 2, Math.PI),
                    t.arc(n + r, n + s, n, Math.PI, 3 * Math.PI / 2),
                    t.arc(i - c + r, c + s, c, 3 * Math.PI / 2, 2 * Math.PI),
                    t.closePath()
                }
                  , s = this.line;
                s.clear(!0, i.PARAM.getHd());
                var e = this.viewState.start
                  , h = this.viewState.end
                  , l = (h - e) * this.disMod
                  , o = 5
                  , n = 5
                  , c = 5
                  , f = 5;
                if (5 === h && 4 === e)
                    for (var d = this.cfg.DIMENSION.w_t / l, u = 0; 2 > u; u++) {
                        var A = this.cc[u];
                        p = d * Nt;
                        for (var p, v = 0; l > v; v++) {
                            var g = v + this.disMod * e;
                            if (this.oriArr[g].signal) {
                                s.newStyle(A, !0, 0),
                                s.newFillStyle([A]);
                                var m, b, w, y = this.oriArr[g].py;
                                0 === u && 1 === this.oriArr[g].reverse && (s.moveTo(p, y),
                                s.arc(p, y, 3, 0, 2 * Math.PI),
                                p > this.cfg.DIMENSION.w_t - 50 ? (m = p - 20,
                                o = 0,
                                n = 5) : (m = p + 8,
                                o = 5,
                                n = 0),
                                y > this.cfg.DIMENSION.h_t - 20 ? (b = y - 8,
                                c = 5,
                                f = 5) : 20 > y ? (b = y + 20,
                                o = 5,
                                n = 5,
                                c = 0) : (b = y - 8,
                                o = 5,
                                n = 0),
                                s.fill(),
                                s.newFillStyle(1 === this.oriArr[g].reverse ? [this.cc[3]] : [A]),
                                r(s.getG(), 28, 14, m - 8, b - 12, [o, n, c, f]),
                                s.fill(),
                                s.closePath()),
                                1 === u && 1 === this.oriArr[g].reverse && (m = p > this.cfg.DIMENSION.w_t - 50 ? p - 16 : p + 12,
                                b = y > this.cfg.DIMENSION.h_t - 20 ? y + 2 : 20 > y ? y + 30 : y + 3,
                                w = 1 === this.oriArr[g].reverse ? "\u8f6c \u2191" : this.oriArr[g].signal,
                                s.getG().fillText(w, m - 7, b - 12))
                            }
                            p += d
                        }
                        s.stroke(),
                        s.fill()
                    }
            }
        }
    }
    function M(i, r, s) {
        var e = "ewi";
        this.DEFAULT_ARR = [{
            color: "#F6C257",
            prop: e,
            idct: "\u7b49\u6743\u91cd"
        }],
        a.call(this, i, r);
        var h = "icn_calc_"
          , l = this;
        this.name = "EWI",
        this.sname = "T_EWI",
        this.alias = "\u7b49\u6743\u91cd",
        this.selfDataUrl = "http://finance.sina.com.cn/finance/touzieql/$symbol.js?" + Math.random(),
        this.selfDataUrlUpdate = "http://" + gt + ".sinajs.cn/etag.php?_=" + (new Date).getTime() + "&list=" + h + "$symbol",
        this.cb = s,
        this.df = function(t) {
            var i = [];
            if (t)
                for (var a in t)
                    t.hasOwnProperty(a) && i.push({
                        ewi: Number(t[a]),
                        time: a
                    });
            return i
        }
        ;
        var o, n = !1;
        this.loadUrlData = function() {
            var i = this.aliasymbol || this.symbol
              , a = "_touziequallyweight_" + i
              , s = this.selfDataUrl.replace("$symbol", i).replace("$cb", "var%20" + a + "=").replace("$rn", String((new Date).getDate()));
            this.proxyCfg.usrObj.ssl && (s = t.getSUrl(s)),
            n || (o = t.tUtil.gata(r.usrObj.market),
            t.load(s, function() {
                var t = window[a];
                window[a] = null,
                l.urlData = {
                    time: []
                };
                var i = l.df(t)
                  , r = l.urlData.time;
                r.splice.apply(r, [0, 0].concat(i)),
                n = !0,
                l.update()
            }))
        }
        ,
        this.udf = function(t) {
            if (t) {
                var i, a = t.split(",");
                return a && a.length > 1 && (i = [{
                    time: a[6].substring(0, 5),
                    ewi: a[2]
                }]),
                i
            }
        }
        ,
        this.update = function() {
            var i = this.symbol
              , a = "hq_str_" + h + i
              , r = this.selfDataUrlUpdate.replace("$symbol", i);
            this.proxyCfg.usrObj.ssl && (r = t.getSUrl(r)),
            t.load(r, function() {
                var t = window[a];
                window[a] = null;
                var i = l.udf(t);
                i && l.urlData && l.urlData.time && l.updateData(i, l.urlData.time)
            })
        }
        ,
        this.updateData = function(i, a) {
            if (i && a && !(a.length < 1)) {
                var s = a[a.length - 1];
                if (i = i[0]) {
                    if (s.time <= i.time)
                        for (var e = t.arrIndexOf(o, i.time), h = t.arrIndexOf(o, s.time), n = h; e >= n; n++)
                            e - n > 0 ? a[a.length] = a[a.length - 1] : a[a.length - 1] = i;
                    l.cb(l),
                    4 == l.viewState.start && 5 == l.viewState.end && r.cbInDC()
                }
            }
        }
        ,
        this.setPricePos = function(t) {
            t && (l.labelMaxP = t[0],
            l.labelMinP = t[1],
            l.pricePosArr = t),
            this.createPlayingData()
        }
        ,
        this.initAndCalcAll = function(i) {
            if (this.urlData) {
                this.oriArr = this.gdsd(i),
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var a, s = this.urlData.time, e = r.stock.realLen;
                0 > e && (e = l.disMod);
                var h = 0;
                for (a = 0; a <= l.disMod && !(a > e); a++)
                    s[a] ? (i[4][a].ewi = s[a].ewi,
                    h = a) : i[4][a].ewi = s[h].ewi;
                for (var o, n = 0, c = this.oriArr.length; c > n; n++)
                    o = this.oriArr[n],
                    this.selfArr.push({
                        ewi: o ? Number(o.ewi) : 1
                    })
            }
        }
        ,
        this.loadUrlData()
    }
    function N(i, r) {
        this.storageVer = "v2",
        a.call(this, i, r);
        var s = this;
        this.name = "EXPMA",
        "k" != r.type && (this.sname = "T_" + this.name);
        var e = ["#2d0674", "#84a8de", "#e80f01", "#f1926f", "#2c0eed"]
          , h = "EMA"
          , l = "ema";
        this.generateSettings = function() {
            if (s.param && s.param.length > 0) {
                s.customArr = [];
                for (var i = 0, a = s.param.length; a > i; i++) {
                    var r = s.param[i].v;
                    !isNaN(r) && r > 0 && s.customArr.push({
                        v: r,
                        color: s.param[i].color || e[i] || "#" + t.randomColor(),
                        prop: l + r,
                        idct: h + r,
                        desc: h
                    })
                }
            }
            (!s.customArr || s.customArr.length < 1) && (s.customArr = [{
                v: 12,
                color: e[0],
                prop: l + "12",
                idct: h + "12",
                desc: h
            }, {
                v: 50,
                color: e[1],
                prop: l + "50",
                idct: h + "50",
                desc: h
            }])
        }
        ;
        var o = Ot.getArr
          , n = Ot.calcEMA;
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i);
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var r = o(a, this.tkProp.close), s = [], e = 0, h = this.customArr.length; h > e; e++)
                s.push(n(r, this.customArr[e].v));
            for (var c = a.length, f = 0, d = s.length; d > f; f++)
                for (var u = this.customArr[f].v, A = 0; c > A; A++) {
                    var p = this.selfArr[A] = this.selfArr[A] || {};
                    a[A].volume < 0 ? p[Dt] = !0 : p[l + u] = s[f][A]
                }
        }
    }
    function O(i, r, s) {
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#990000",
            prop: "mb",
            idct: "\u51c0\u8d85\u5927\u5355"
        }, {
            v: 0 / 0,
            color: "#009900",
            prop: "ms",
            idct: "\u51c0\u5927\u5355"
        }, {
            v: 0 / 0,
            color: "#000099",
            prop: "sb",
            idct: "\u51c0\u4e2d\u5355"
        }, {
            v: 0 / 0,
            color: "#ff0099",
            prop: "ss",
            idct: "\u51c0\u5c0f\u5355"
        }],
        a.call(this, i, r),
        this.name = "TECHFLOW",
        this.separate = 1,
        this.selfDataUrl = "http://stock.finance.sina.com.cn/stock/api/jsonp_v2.php/$cb/StockMixService.getNewRateInfo?symbol=$symbol&___qn=3&from=$from&to=$to",
        this.selfDataUrlUpdate = "http://" + gt + ".sinajs.cn/list=$symbol",
        this.cb = s,
        this.toReCalc = !0,
        this.initAndCalcAll = function(i, a) {
            if (!a && (this.oriArr = i,
            this.urlData)) {
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var r;
                switch (this.viewState.viewId) {
                case 24:
                    r = this.urlData.day;
                    break;
                case 168:
                    r = this.urlData.week;
                    break;
                case 720:
                    r = this.urlData.month
                }
                for (var s, e = t.kUtil.adbd(r, i, !1, !0), h = 0, l = i.length; l > h; h++)
                    s = e[h],
                    this.selfArr.push({
                        mb: s ? Number(s.mb) : 0 / 0,
                        ms: s ? Number(s.ms) : 0 / 0,
                        sb: s ? Number(s.sb) : 0 / 0,
                        ss: s ? Number(s.ss) : 0 / 0
                    })
            }
        }
        ,
        this.setRange = function() {
            if (this.datas) {
                for (var t = this.viewState.start, i = this.viewState.end, a = i - t; this.datas.length > a; )
                    this.datas.length--;
                for (; this.datas.length < a; )
                    this.datas.push({});
                for (var r = Number.MAX_VALUE, s = -Number.MAX_VALUE, e = t; i > e; e++) {
                    var h = this.datas[e - t];
                    h.date = this.oriArr[e].date;
                    var l = 0
                      , o = 0;
                    for (var n in this.selfArr[e])
                        this.selfArr[e].hasOwnProperty(n) && (h[n] = this.selfArr[e][n],
                        h[n] > 0 ? l += h[n] : o += h[n]);
                    s = Math.max(l, o, s),
                    r = Math.min(l, o, r)
                }
                s = Math.max(Math.abs(s), Math.abs(r)),
                r = -s,
                this.minPrice = r,
                this.maxPrice = s
            }
        }
        ,
        this.draw = function(t, a) {
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var r = this.line;
                r.clear(!0, i.PARAM.getHd());
                for (var s, e, h, l, o = this.datas.length, n = i.DIMENSION.w_k / Math.max(o, i.PARAM.minCandleNum), c = this.labelMaxP / (this.labelMaxP - this.labelMinP) * this.h, f = [], d = [], u = this.customArr.length; u--; ) {
                    var A = this.customArr[u].prop + "y";
                    l = this.__iOffsetX - n * Nt,
                    r.newStyle(this.customArr[u].color, !0, l);
                    for (var p = 0; o > p; p++)
                        h = this.datas[p][A],
                        s = h > c ? d[p] || 0 : f[p] || 0,
                        e = c - s,
                        h -= s,
                        r.moveTo(l, e),
                        r.lineTo(l, h),
                        h > c ? (f[p] = f[p] || 0,
                        d[p] = c - h) : (f[p] = c - h,
                        d[p] = d[p] || 0),
                        l += n;
                    r.stroke()
                }
            }
        }
        ,
        this.udf = function(t) {
            if (!t)
                return null;
            var i = t.split(",");
            return {
                mb: Number(i[0]),
                ms: Number(i[1]),
                sb: Number(i[2]),
                ss: Number(i[3]),
                date: At.sd(i[4])
            }
        }
        ,
        this.df = function(t) {
            for (var i = [], a = 0, r = t.length; r > a; a++) {
                var s = At.sd(t[a].d)
                  , e = s.getDate();
                i.push({
                    mb: e,
                    sb: e,
                    ms: e,
                    ss: e,
                    date: s
                })
            }
            return i
        }
        ,
        this.loadUrlData()
    }
    function S(i, r) {
        this.DEFAULT_ARR = [{
            v: 9,
            color: "#888888",
            prop: "k",
            idct: "K"
        }, {
            v: 3,
            color: "#FFAC03",
            prop: "d",
            idct: "D"
        }, {
            v: 3,
            color: "#cc22ba",
            prop: "j",
            idct: "J"
        }],
        a.call(this, i, r),
        this.name = "KDJ",
        this.vaObj = {
            glv: 50,
            upper: 80,
            lower: 20
        };
        var s = Ot.calcSMA
          , e = Ot.calcLLV
          , h = Ot.calcHHV
          , l = Ot.operateArr
          , o = Ot.getArr;
        this.initAndCalcAll = function(i) {
            var a = this.customArr
              , r = a[0].v
              , n = a[1].v
              , c = a[2].v
              , f = o(i, "close")
              , d = o(i, "low")
              , u = o(i, "high")
              , A = l(l(l(f, e(d, r), "-"), l(h(u, r), e(d, r), "-"), "/"), 100, "*")
              , p = s(A, n, 1)
              , v = s(p, c, 1)
              , g = l(l(p, 3, "*"), l(v, 2, "*"), "-");
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var m = 0, b = i.length; b > m; m++)
                this.selfArr[m] = {
                    k: p[m],
                    d: v[m],
                    j: g[m]
                }
        }
    }
    function I(i, r, s) {
        var e = "bar";
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#888887",
            prop: e,
            idct: "\u5927\u5355\u91d1\u989d",
            desc: "\u6587\u5b57\u989c\u8272"
        }],
        a.call(this, i, r, {
            nu: !0
        }),
        this.name = "KFLOW",
        this.alias = "\u4e3b\u529b\u52a8\u5411",
        "sh000001" === this.symbol && (this.aliasymbol = "sh999999"),
        this.vaObj = {
            glv: 0
        },
        this.UPDATE_THRESHOLD = 5,
        this.selfDataUrl = "http://touzi.sina.com.cn/api/openapi.php/MoneyFlowService.getHistoryMoneyFlow?symbol=$symbol&callback=$cb&from=$from&to=$to",
        this.selfDataUrlUpdate = "http://touzi.sina.com.cn/api/openapi.php/MoneyFlowService.getLastMoneyFlow?callback=$cb&symbol=$symbol",
        this.cb = s,
        this.toReCalc = !0,
        this.loadedFlag = {},
        this.df = function(t) {
            if (t && t.result && t.result.data) {
                for (var i, a, r = [], s = t.result.data, h = 0, l = s.length; l > h; h++) {
                    i = s[h],
                    a = i.split(",");
                    var o = {
                        date: At.sd(a[0])
                    };
                    o[e] = Number(a[1]),
                    r.push(o)
                }
                return r
            }
        }
        ;
        var h;
        this.udf = function(t) {
            if (t && t.result && t.result.data) {
                var i = t.result.data;
                if (i && !(i.length < 9)) {
                    i = i.split(",");
                    var a = Number(i[1])
                      , r = {
                        date: At.sd(i[0])
                    };
                    return r[e] = a,
                    h ? r[e + "update"] = a - h[e] || 0 : (h = {},
                    r[e + "update"] = 0),
                    h[e] = a,
                    r
                }
            }
        }
        ;
        var l;
        this.initAndCalcAll = function(i) {
            if (this.oriArr = i,
            this.urlData) {
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var a;
                switch (this.viewState.viewId) {
                case 364:
                case 365:
                case 366:
                case 23:
                case 24:
                case 25:
                    a = this.urlData.day;
                    break;
                case 167:
                case 168:
                case 169:
                    a = this.urlData.week;
                    break;
                case 719:
                case 720:
                case 721:
                    a = this.urlData.month;
                    break;
                default:
                    a = [{
                        bar: 0,
                        date: i[i.length - 1].date
                    }]
                }
                l = t.kUtil.adbd(a, i, !1, !0);
                for (var r, s = 0, h = i.length; h > s; s++) {
                    r = l[s];
                    var o = {};
                    o[e] = r ? Number(r[e]) : 0 / 0,
                    this.selfArr.push(o)
                }
            }
        }
        ,
        this.drawCalc = function() {
            if (this.datas) {
                for (var t = this.viewState.start, i = this.viewState.end, a = i - t; this.datas.length > a; )
                    this.datas.length--;
                for (; this.datas.length < a; )
                    this.datas.push({});
                var r, s, e = Number.MAX_VALUE, h = -Number.MAX_VALUE;
                for (r = t; i > r; r++) {
                    s = this.datas[r - t],
                    s.date = this.oriArr[r].date;
                    for (var l in this.selfArr[r])
                        this.selfArr[r].hasOwnProperty(l) && (s[l] = this.selfArr[r][l],
                        s[l] > h && (h = s[l]),
                        s[l] < e && (e = s[l]))
                }
                e == h ? e = h = 0 : (h = Math.max(Math.abs(h), Math.abs(e)),
                e = -h),
                this.vaObj.min = e,
                this.vaObj.max = h,
                this.labelMaxP = h,
                this.labelMinP = e;
                var o = h - e;
                for (r = 0; a > r; r++) {
                    s = this.datas[r];
                    for (var n = this.customArr.length; n--; ) {
                        var c = this.customArr[n].prop;
                        s[c + "y"] = 0 == o ? this.h >> 1 : this.h * (h - s[c]) / o
                    }
                }
                this.syncI()
            }
        }
        ,
        this.draw = function(t, a) {
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var r = this.line;
                r.clear(!0, i.PARAM.getHd());
                for (var s, e, h, l, o, n = this.datas.length, c = i.DIMENSION.w_k / Math.max(n, i.PARAM.minCandleNum), f = "hollow" == i.datas.candle, d = .6 * c, u = .5 * this.h, A = 0; 2 > A; A++) {
                    for (o = 0 == A ? i.COLOR.K_FALL : i.COLOR.K_RISE,
                    e = this.__iOffsetX - c,
                    r.beginPath(),
                    s = 0; n > s; s++)
                        l = this.datas[s],
                        h = l.bary,
                        0 == A ? h > u && r.drawVStickRect(e, h, d, u - h, i.COLOR.K_FALL, !0) : u >= h && r.drawVStickRect(e, h, d, u - h, i.COLOR.K_RISE, !f),
                        e += c;
                    r.stroke()
                }
                r.drawBg(this.__iOffsetX),
                this.vaObj && this.drawValueRange()
            }
        }
        ,
        this.loadUrlData()
    }
    function T(i, r, s) {
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#888887",
            prop: "bar",
            idct: "\u4e3b\u529b\u8d44\u91d1",
            desc: "\u4e3b\u529b\u8d44\u91d1"
        }, {
            v: 0 / 0,
            color: "#ff1111",
            prop: "super",
            idct: "\u7279\u5927",
            desc: "\u7279\u5927"
        }, {
            v: 0 / 0,
            color: "#ff9f07",
            prop: "big",
            idct: "\u5927",
            desc: "\u5927"
        }, {
            v: 0 / 0,
            color: "#00b5f8",
            prop: "mid",
            idct: "\u4e2d",
            desc: "\u4e2d"
        }, {
            v: 0 / 0,
            color: "#5b0497",
            prop: "small",
            idct: "\u5c0f",
            desc: "\u5c0f"
        }],
        a.call(this, i, r, {
            nu: !0
        }),
        this.name = "KKFLOW",
        this.alias = "\u51c0\u4e70\u5165",
        this.vaObj = {
            glv: 0
        },
        this.UPDATE_THRESHOLD = 5,
        this.selfDataUrl = "http://stock.sina.com.cn/stock/api/openapi.php/TouziService.getStockHistoryFlow?page=1&num=10000&symbol=$symbol&callback=$cb",
        this.selfDataUrlUpdate = "http://stock.sina.com.cn/stock/api/openapi.php/TouziService.getStockFlow?symbol=$symbol&callback=$cb",
        this.cb = s,
        this.toReCalc = !0,
        this.loadedFlag = {},
        this.df = function(t) {
            if (t && t.result && t.result.data) {
                for (var i, a = [], r = t.result.data.data.reverse(), s = 0, e = r.length; e > s; s++) {
                    i = r[s];
                    var h = i.r0_in
                      , l = i.r1_in
                      , o = i.r2_in
                      , n = i.r3_in
                      , c = i.r0_out
                      , f = i.r1_out
                      , d = i.r2_out
                      , u = i.r3_out;
                    a.push({
                        date: At.sd(i.date),
                        "super": h - c,
                        big: l - f,
                        mid: o - d,
                        small: n - u,
                        bar: h + l - c - f
                    })
                }
                return a
            }
        }
        ,
        this.udf = function(t) {
            if (t && t.result && t.result.data) {
                var i = t.result.data;
                if (i) {
                    var a = i.r0_in
                      , r = i.r1_in
                      , s = i.r2_in
                      , e = i.r3_in
                      , h = i.r0_out
                      , l = i.r1_out
                      , o = i.r2_out
                      , n = i.r3_out;
                    return {
                        date: At.sd(i.date),
                        "super": a - h,
                        big: r - l,
                        mid: s - o,
                        small: e - n,
                        bar: a + r - h - l
                    }
                }
            }
        }
        ;
        var e;
        this.initAndCalcAll = function(i) {
            if (this.oriArr = i,
            this.urlData) {
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var a;
                switch (this.viewState.viewId) {
                case 364:
                case 365:
                case 366:
                case 23:
                case 24:
                case 25:
                    a = this.urlData.day;
                    break;
                case 167:
                case 168:
                case 169:
                    a = this.urlData.week;
                    break;
                case 719:
                case 720:
                case 721:
                    a = this.urlData.month;
                    break;
                default:
                    a = [{
                        bar: 0,
                        big: 0,
                        mid: 0,
                        small: 0,
                        "super": 0,
                        date: i[i.length - 1].date
                    }]
                }
                e = t.kUtil.adbd(a, i, !1, !0);
                for (var r, s = 0, h = i.length; h > s; s++) {
                    r = e[s];
                    var l = {
                        bar: r ? Number(r.bar) : 0 / 0,
                        "super": r ? Number(r["super"]) : 0 / 0,
                        big: r ? Number(r.big) : 0 / 0,
                        mid: r ? Number(r.mid) : 0 / 0,
                        small: r ? Number(r.small) : 0 / 0
                    };
                    this.selfArr.push(l)
                }
            }
        }
        ,
        this.drawCalc = function() {
            if (this.datas) {
                for (var t = this.viewState.start, i = this.viewState.end, a = i - t; this.datas.length > a; )
                    this.datas.length--;
                for (; this.datas.length < a; )
                    this.datas.push({});
                var r, s, e = Number.MAX_VALUE, h = -Number.MAX_VALUE, l = {};
                for (r = t; i > r; r++) {
                    s = this.datas[r - t],
                    s.date = this.oriArr[r].date;
                    for (var o in this.selfArr[r])
                        this.selfArr[r].hasOwnProperty(o) && ("bar" === o ? s[o] = this.selfArr[r][o] : (!l[o] && (l[o] = 0),
                        l[o] += this.selfArr[r][o],
                        s[o] = l[o]),
                        s[o] > h && (h = s[o]),
                        s[o] < e && (e = s[o]))
                }
                e == h ? e = h = 0 : (h = Math.max(Math.abs(h), Math.abs(e)),
                e = -h),
                this.vaObj.min = e,
                this.vaObj.max = h,
                this.labelMaxP = h,
                this.labelMinP = e;
                var n = h - e;
                for (r = 0; a > r; r++) {
                    s = this.datas[r];
                    for (var c = this.customArr.length; c--; ) {
                        var f = this.customArr[c].prop;
                        s[f + "y"] = 0 == n ? this.h >> 1 : this.h * (h - s[f]) / n
                    }
                }
                this.syncI()
            }
        }
        ,
        this.draw = function(t, a) {
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var r = this.line;
                r.clear(!0, i.PARAM.getHd());
                for (var s, e, h, l, o, n = this.datas.length, c = i.DIMENSION.w_k / Math.max(n, i.PARAM.minCandleNum), f = "hollow" == i.datas.candle, d = .6 * c, u = .5 * this.h, A = 0; 2 > A; A++) {
                    for (o = 0 == A ? i.COLOR.K_FALL : i.COLOR.K_RISE,
                    e = this.__iOffsetX - c,
                    r.beginPath(),
                    s = 0; n > s; s++)
                        l = this.datas[s],
                        h = l.bary,
                        0 == A ? h > u && r.drawVStickRect(e, h, d, u - h, i.COLOR.K_FALL, !0) : u >= h && r.drawVStickRect(e, h, d, u - h, i.COLOR.K_RISE, !f),
                        e += c;
                    r.stroke()
                }
                for (var p = this.customArr.length; p--; )
                    if ("bar" !== this.customArr[p].prop) {
                        for (e = this.__iOffsetX - .4 * c,
                        r.newStyle(this.customArr[p].color, !0),
                        s = 0; n > s; s++) {
                            l = this.datas[s];
                            var v = l[this.customArr[p].prop + "y"];
                            r.lineTo(e, v),
                            e += c
                        }
                        r.stroke()
                    }
                r.drawBg(this.__iOffsetX)
            }
        }
        ,
        this.loadUrlData()
    }
    function k(i, r, s) {
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#FE6C6A",
            prop: "buy",
            idct: "\u4e70\u5165",
            desc: "\u4e70\u5165"
        }, {
            v: 0 / 0,
            color: "#23B47B",
            prop: "sell",
            idct: "\u5356\u51fa",
            desc: "\u5356\u51fa"
        }, {
            v: 0 / 0,
            color: "#888887",
            prop: "total",
            idct: "\u4eca\u65e5\u4ea4\u6613\u603b\u8ba1",
            desc: "\u4eca\u65e5\u4ea4\u6613\u603b\u8ba1"
        }],
        a.call(this, i, r, {
            nu: !0
        }),
        this.name = "KGSTRADE",
        this.alias = "\u9ad8\u624b\u4ea4\u6613",
        this.vaObj = {
            glv: 0
        },
        this.selfDataUrl = "http://touzi.sina.com.cn/api/openapi.php/TzyGraphService.getGaoShouTradeDetailKx?symbol=$symbol&callback=$cb",
        this.cb = s,
        this.toReCalc = !0,
        this.loadedFlag = {},
        this.df = function(t) {
            if (t && t.result && t.result.data) {
                for (var i, a = [], r = t.result.data, s = 0, e = r.length; e > s; s++)
                    i = r[s],
                    a.push({
                        date: At.sd(i.dt),
                        buy: i.buy,
                        sell: i.sell,
                        total: i.buy + i.sell
                    });
                return a
            }
        }
        ;
        var e;
        this.initAndCalcAll = function(i) {
            if (this.oriArr = i,
            this.urlData) {
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var a;
                switch (this.viewState.viewId) {
                case 364:
                case 365:
                case 366:
                case 23:
                case 24:
                case 25:
                    a = this.urlData.day;
                    break;
                case 167:
                case 168:
                case 169:
                    a = this.urlData.week;
                    break;
                case 719:
                case 720:
                case 721:
                    a = this.urlData.month;
                    break;
                default:
                    a = [{
                        buy: 0,
                        sell: 0,
                        date: i[i.length - 1].date
                    }]
                }
                e = t.kUtil.adbd(a, i, !1, !0);
                for (var r, s = 0, h = i.length; h > s; s++)
                    r = e[s],
                    this.selfArr.push({
                        total: r ? Number(r.total) : 0 / 0,
                        buy: r ? Number(r.buy) : 0 / 0,
                        sell: r ? Number(r.sell) : 0 / 0
                    })
            }
        }
        ,
        this.drawCalc = function() {
            if (this.datas) {
                for (var t = this.viewState.start, i = this.viewState.end, a = i - t; this.datas.length > a; )
                    this.datas.length--;
                for (; this.datas.length < a; )
                    this.datas.push({});
                var r, s, e = Number.MAX_VALUE, h = -Number.MAX_VALUE;
                for (r = t; i > r; r++) {
                    s = this.datas[r - t],
                    s.date = this.oriArr[r].date;
                    for (var l in this.selfArr[r])
                        this.selfArr[r].hasOwnProperty(l) && (s[l] = this.selfArr[r][l],
                        "total" !== l && (s[l] > h && (h = s[l]),
                        s[l] < e && (e = s[l])))
                }
                e == h ? e = h = 0 : (h = Math.max(Math.abs(h), Math.abs(e)),
                e = -h),
                this.vaObj.min = e,
                this.vaObj.max = h,
                this.labelMaxP = h,
                this.labelMinP = e;
                var o = h - e;
                for (r = 0; a > r; r++) {
                    s = this.datas[r];
                    for (var n = this.customArr.length; n--; ) {
                        var c = this.customArr[n].prop;
                        s[c + "y"] = 0 == o ? this.h >> 1 : this.h * (h - s[c]) / o
                    }
                }
                this.syncI()
            }
        }
        ,
        this.draw = function(t, a) {
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var r = this.line
                  , s = r.getG();
                r.clear(!0, i.PARAM.getHd());
                for (var e, h, l, o, n, c, f = this.datas.length, d = i.DIMENSION.w_k / Math.max(f, i.PARAM.minCandleNum), u = "hollow" == i.datas.candle, A = .3 * d, p = .5 * this.h, v = 0; 2 > v; v++) {
                    for (c = this.customArr[v].color,
                    h = this.__iOffsetX - .96 * d,
                    s.textAlign = "center",
                    r.beginPath(),
                    e = 0; f > e; e++)
                        n = this.datas[e],
                        0 == v ? (n.buy && (l = n.buyy,
                        r.drawVStickRect(h, l, A, p - l, c, !u),
                        s.fillText(n.buy, h + .3 * d, p + 12)),
                        h += d) : (h += .47 * d,
                        n.sell && (o = n.selly,
                        r.drawVStickRect(h, p, A, p - o, c, !0),
                        s.fillText(n.sell, h + .3 * d, p - 2)),
                        h += .53 * d);
                    r.stroke()
                }
                r.beginPath(),
                r.newStyle(["#BFBFBF"]),
                r.moveTo(this.__iOffsetX - d, .5 * this.h),
                r.lineTo(h, .5 * this.h),
                r.stroke(),
                r.drawBg(this.__iOffsetX)
            }
        }
        ,
        this.loadUrlData()
    }
    function x(i, r, s) {
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#7d8087",
            prop: "bar",
            idct: "IDT",
            desc: "IDT"
        }, {
            v: 0 / 0,
            color: "#7d8087",
            prop: "dot",
            idct: "SUNSPOT",
            desc: "SUNSPOT"
        }],
        a.call(this, i, r, {
            nu: !0
        }),
        this.name = "SUNSPOT",
        this.alias = "SPT",
        this.vaObj = {
            glv: 0
        },
        this.selfDataUrl = "http://finance.sina.com.cn/touzi/sunstockskx/$symbol.js",
        this.cb = s,
        this.toReCalc = !0,
        this.loadedFlag = {},
        this.loadUrlData = function() {
            var i = this.getFromToM.get(this);
            if (i) {
                var a = this
                  , r = this.symbol
                  , s = "tzy_sunstock_kx_" + r
                  , e = this.selfDataUrl.replace("$symbol", r);
                this.proxyCfg.usrObj.ssl && (e = t.getSUrl(e)),
                t.load(e, function() {
                    var t = window[s];
                    a.urlData || (a.urlData = {
                        day: []
                    });
                    var i = a.df(t)
                      , r = a.urlData.day;
                    r.splice.apply(r, [0, 0].concat(i)),
                    r.sort(function(t, i) {
                        return t.date - i.date
                    }),
                    a.toReCalc = !0,
                    a.cb(a)
                })
            }
        }
        ,
        this.df = function(t) {
            if (t) {
                for (var i, a = [], r = t, s = 0, e = r.length; e > s; s++)
                    i = r[s],
                    a.push({
                        date: At.sd(i.date),
                        bar: i.std_pchg,
                        dot: i.value
                    });
                return a
            }
        }
        ;
        var e;
        this.initAndCalcAll = function(i) {
            if (this.oriArr = i,
            this.urlData) {
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var a;
                switch (this.viewState.viewId) {
                case 364:
                case 365:
                case 366:
                case 23:
                case 24:
                case 25:
                    a = this.urlData.day;
                    break;
                default:
                    a = [{
                        bar: 0,
                        dot: 0,
                        date: i[i.length - 1].date
                    }]
                }
                e = t.kUtil.adbd(a, i, !1, !0);
                for (var r, s = 0, h = i.length; h > s; s++)
                    r = e[s],
                    this.selfArr.push({
                        bar: r ? Number(r.bar) : 0 / 0,
                        dot: r ? Number(r.dot) : 0 / 0
                    })
            }
        }
        ,
        this.drawCalc = function() {
            if (this.datas) {
                for (var t = this.viewState.start, i = this.viewState.end, a = i - t; this.datas.length > a; )
                    this.datas.length--;
                for (; this.datas.length < a; )
                    this.datas.push({});
                var r, s, e = 0, h = -Number.MAX_VALUE;
                for (r = t; i > r; r++) {
                    s = this.datas[r - t],
                    s.date = this.oriArr[r].date,
                    s.percent = this.oriArr[r].percent;
                    for (var l in this.selfArr[r])
                        this.selfArr[r].hasOwnProperty(l) && (s[l] = this.selfArr[r][l],
                        "bar" === l && s[l] > h && (h = s[l]))
                }
                var o = 18;
                this.vaObj.min = e,
                this.vaObj.max = h,
                this.labelMaxP = h * this.h / (this.h - o),
                this.labelMinP = e;
                var n = h - e;
                for (r = 0; a > r; r++) {
                    s = this.datas[r];
                    for (var c = this.customArr.length; c--; ) {
                        var f = this.customArr[c].prop;
                        s[f + "y"] = 0 == n ? this.h : (this.h - o) * (h - s[f]) / n + o
                    }
                }
                this.syncI()
            }
        }
        ,
        this.draw = function(t, a) {
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var r = this.line;
                r.clear(!0, i.PARAM.getHd());
                for (var s, e, h, l, o, n = this.datas.length, c = i.DIMENSION.w_k / Math.max(n, i.PARAM.minCandleNum), f = "hollow" == i.datas.candle, d = ["#FF6655", "#8cdaff"], u = .2 * c, A = this.h, p = 0; 3 > p; p++)
                    for (o = d[p],
                    e = this.__iOffsetX - c,
                    2 == p && r.newFillStyle([this.customArr[1].color]),
                    r.beginPath(),
                    s = 0; n > s; s++)
                        if (l = this.datas[s],
                        2 > p)
                            l.bar && (h = l.bary,
                            0 == p && l.percent >= 0 ? r.drawVStickRect(e + .38 * c, h, u, A - h, o, !f) : 1 == p && l.percent < 0 && r.drawVStickRect(e + .38 * c, h, u, A - h, o, !f)),
                            e += c;
                        else if (2 == p) {
                            if (l.dot) {
                                var v = l.dot;
                                h = l.bary,
                                r.arc(e + .58 * c, h - v - 6, 2 * v, 0, 2 * Math.PI),
                                r.fill(),
                                r.closePath()
                            }
                            e += c
                        }
                r.drawBg(this.__iOffsetX)
            }
        }
        ,
        this.loadUrlData()
    }
    function C(i, r) {
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#007cc8",
            prop: "lb",
            idct: "LB",
            desc: "\u91cf\u6bd4"
        }],
        a.call(this, i, r),
        this.name = "LB",
        this.sname = "T_LB",
        this.alias = "\u91cf\u6bd4",
        this.initAndCalcAll = function(i) {
            this.oriArr = this.gdsd(i),
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var a, r, s = 0, e = i.length, h = 0; e > s; s++) {
                r = 5e4,
                a = 0,
                !isNaN(i[s][0].lastfive) && i[s][0].lastfive > 0 && (r = i[s][0].lastfive);
                for (var l = 0, o = 0; l < this.disMod; l++) {
                    var n = Number(i[s][l].volume) < 0 ? 0 : Number(i[s][l].volume);
                    a += n,
                    0 >= n ? (h = 0 == l ? 0 : this.selfArr[this.selfArr.length - 1].lb,
                    o++) : h = l == this.disMod - 1 ? a / r / (l - o) : a / r / (l - o + 1),
                    0 > h && (h = 0),
                    this.selfArr.push({
                        ignore_price: i[s][l].price,
                        lb: h
                    })
                }
            }
        }
        ,
        this.draw = function(t) {
            if (this.datas) {
                this.line.clear(!0, this.cfg.PARAM.getHd());
                for (var i, a = this.datas.length, r = this.cfg.DIMENSION.w_t / a, s = this.customArr.length; s--; ) {
                    var e = this.customArr[s].prop + "y";
                    i = r * Nt,
                    this.line.newStyle(this.customArr[s].color, !0, 1.3);
                    for (var h = 0; a > h && !(this.datas[h].ignore_price < 0); h++)
                        0 == h || h % this.disMod == 0 ? this.line.moveTo(i, this.datas[h][e]) : this.line.lineTo(i, this.datas[h][e]),
                        i += r;
                    this.line.stroke()
                }
                t && this.line.drawBg()
            }
        }
    }
    function _(i, r) {
        a.call(this, i, r);
        var s = this;
        this.name = "MA",
        "k" != r.type && (this.sname = "T_" + this.name);
        var e = ["#FC9CB8", "#12BDD9", "#EE2F72", "#8CBB0D", "#0DC168", "#978d52"]
          , h = "MA"
          , l = "ma";
        this.generateSettings = function() {
            if (s.param && s.param.length > 0) {
                s.customArr = [];
                for (var i = 0, a = s.param.length; a > i; i++) {
                    var r = s.param[i].v;
                    !isNaN(r) && r > 0 && s.customArr.push({
                        v: r,
                        color: s.param[i].color || e[i] || "#" + t.randomColor(),
                        prop: l + r,
                        idct: h + r,
                        desc: h
                    })
                }
            }
            (!s.customArr || s.customArr.length < 1) && (s.customArr = [{
                v: 5,
                color: e[0],
                prop: l + "5",
                idct: h + "5",
                desc: h
            }, {
                v: 10,
                color: e[1],
                prop: l + "10",
                idct: h + "10",
                desc: h
            }, {
                v: 20,
                color: e[2],
                prop: l + "20",
                idct: h + "20",
                desc: h
            }, {
                v: 30,
                color: e[3],
                prop: l + "30",
                idct: h + "30",
                desc: h
            }])
        }
        ,
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i);
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var r = this.tkProp.close, s = a.length, e = 0, h = this.customArr.length; h > e; e++)
                for (var o, n = 0, c = Math.floor(this.customArr[e].v), f = 0; s > f; f++) {
                    var d = a[f];
                    if (n += Number(d[r]),
                    f >= c - 1) {
                        o = n / c;
                        var u = a[f - c + 1];
                        n -= Number(u[r])
                    } else
                        o = n / (f + 1);
                    var A = this.selfArr[f] = this.selfArr[f] || {};
                    a[f].volume < 0 ? A[Dt] = !0 : A[l + c] = o
                }
        }
    }
    function P(i, r) {
        this.DEFAULT_ARR = [{
            v: 12,
            color: "#5465ff",
            prop: "dif",
            idct: "DIF"
        }, {
            v: 26,
            color: "#ec52f5",
            prop: "dea",
            idct: "DEA"
        }, {
            v: 9,
            color: "#b03030",
            prop: "bar",
            idct: "MACD"
        }],
        a.call(this, i, r),
        this.name = "MACD",
        "k" != r.type && (this.sname = "T_" + this.name);
        var s = "#b82c0c"
          , e = "#2ec196"
          , h = Ot.calcEMA
          , l = Ot.operateArr
          , o = Ot.getArr;
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i)
              , r = this.customArr[0].v
              , s = this.customArr[1].v
              , e = this.customArr[2].v
              , n = o(a, this.tkProp.close)
              , c = l(h(n, r), h(n, s), "-")
              , f = h(c, e)
              , d = l(l(c, f, "-"), 2, "*");
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var u = 0, A = a.length; A > u; u++)
                this.selfArr[u] = {
                    dif: c[u],
                    dea: f[u],
                    bar: d[u]
                },
                this.selfArr[u][Dt] = a[u].volume < 0
        }
        ,
        this.draw = function(t, a) {
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var h = this.line;
                h.clear(!0, i.PARAM.getHd());
                var l, o;
                "k" == r.type ? (l = i.DIMENSION.w_k,
                o = i.PARAM.minCandleNum) : (l = i.DIMENSION.w_t,
                o = 1);
                for (var n, c, f = this.datas.length, d = l / Math.max(f, o), u = "k" == r.type ? this.__iOffsetX - d * Mt : d * Nt, A = 0; 2 > A; A++) {
                    var p = this.customArr[A].prop + "y";
                    for (c = u,
                    this.line.newStyle(this.customArr[A].color, !0, 1.3),
                    n = 0; f > n; n++)
                        0 == n ? this.line.moveTo(c, this.datas[n][p]) : this.line.lineTo(c, this.datas[n][p]),
                        c += d;
                    this.line.stroke()
                }
                var v, g = this.labelMaxP / (this.labelMaxP - this.labelMinP) * this.h;
                c = u;
                var m, b = 1;
                for (h.newStyle(s, !0, b),
                n = 0; f > n; n++)
                    v = this.datas[n].bary,
                    g >= v && (m = ~~(c + .5),
                    m -= .5,
                    h.moveTo(m, g),
                    h.lineTo(m, v)),
                    c += d;
                for (h.stroke(),
                c = u,
                h.newStyle(e, !0, b),
                n = 0; f > n; n++)
                    v = this.datas[n].bary,
                    v > g && (m = ~~(c + .5),
                    m -= .5,
                    h.moveTo(m, g),
                    h.lineTo(m, v)),
                    c += d;
                h.stroke();
                var w = this.h / 2 - .5;
                h.newStyle(this.cfg.COLOR.GRID, !0, 1),
                h.moveTo(0, w),
                h.lineTo(this.cfg.DIMENSION.w_k, w),
                h.stroke(),
                h.drawBg(this.__iOffsetX)
            }
        }
    }
    function R(i, r) {
        this.DEFAULT_ARR = [{
            v: 30,
            color: "#99cf17",
            prop: "obv",
            idct: "OBV"
        }, {
            v: 0 / 0,
            color: "#00c1eb",
            prop: "obvma",
            idct: "OBVMA"
        }];
        var s = {
            nu: !0
        };
        a.call(this, i, r, s),
        this.name = "OBV",
        "k" != r.type && (this.sname = "T_" + this.name),
        this.initAndCalcAll = function(i) {
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            var a, r, s, e = this.customArr[0].v, h = i[0];
            s = isNaN(h.prevclose) || h.close > h.prevclose ? h.volume : -h.volume,
            a = h.close == h.prevclose ? 0 : s,
            r = a,
            this.selfArr.push({
                obv: a,
                obvma: a
            });
            for (var l = 1, o = i.length; o > l; l++) {
                h = i[l];
                var n = {};
                this.selfArr.push(n),
                s = h.close > i[l - 1].close ? Number(h.volume) : h.close == i[l - 1].close ? 0 : -Number(h.volume),
                a = s + this.selfArr[l - 1].obv,
                n.obv = a,
                r += a,
                l >= e ? (r -= this.selfArr[l - e].obv,
                n.obvma = r / e) : n.obvma = r / (l + 1)
            }
        }
    }
    function E(t, i, a) {
        I.call(this, t, i, {
            nu: !0
        }),
        this.selfDataUrl = "https://touzi.sina.com.cn/api/openapi.php/TouziFreeService.getAllMoneyFlow?symbol=$symbol&callback=$cb&from=$from&to=$to",
        this.selfDataUrlUpdate = "http://touzi.sina.com.cn/api/openapi.php/TouziFreeService.getLastMoneyFlow?callback=$cb&symbol=$symbol",
        this.cb = a,
        this.loadUrlData()
    }
    function U(i, r) {
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#12BDD9",
            prop: "iy",
            idct: "Position"
        }],
        a.call(this, i, r, {
            nu: !0
        }),
        this.name = "POSITION",
        this.sname = "T_POSITION",
        this.alias = "\u6301\u4ed3\u91cf",
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i);
            this.oriArr = a,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var r = 0, s = a.length; s > r; r++) {
                var e = a[r].inventory || a[r].holdPosition;
                this.selfArr.push({
                    iy: 0 > e ? 0 / 0 : e
                })
            }
        }
    }
    function L(t, i, r) {
        this.DEFAULT_ARR = [{
            v: 0 / 0,
            color: "#ff0099",
            prop: "ss",
            idct: "\u51c0\u5c0f\u5355"
        }],
        a.call(this, t, i);
        var s = this;
        this.name = "Press",
        this.separate = 1,
        this.cb = r,
        this.initAndCalcAll = function(t, i) {
            i || (this.oriArr = t,
            this.urlData && !this.datas && (this.datas = []))
        }
        ,
        this.setRange = function() {
            if (o && this.datas) {
                for (; this.datas.length > 3; )
                    this.datas.length--;
                for (; this.datas.length < 3; )
                    this.datas.push({});
                var t, i, a = this.oriArr[this.oriArr.length - 1].close;
                for (t = o.length; t-- && (i = o[t],
                !(i.p >= a)); )
                    ;
                i.p == a ? (console.log(o[t - 1].p, o[t - 1].v),
                console.log(a, i.v),
                console.log(o[t + 1].p, o[t + 1].v)) : (console.log(o[t].p, o[t].v),
                console.log(a, i.v),
                console.log(o[t + 1].p, o[t + 1].v)),
                console.log("-----------------------");
                for (var r = 0; 3 > r; r++)
                    this.datas[r].v = o[t - r - 1].v,
                    this.datas[r].p = o[t - r - 1].p;
                console.log(this.datas)
            }
        }
        ,
        this.draw = function() {
            if (this.datas) {
                var i = this.line;
                i.clear(!0, t.PARAM.getHd());
                for (var a, r, s, e, h = this.datas.length, l = t.DIMENSION.w_k / Math.max(h, t.PARAM.minCandleNum), o = this.labelMaxP / (this.labelMaxP - this.labelMinP) * this.h, n = [], c = [], f = this.customArr.length; f--; ) {
                    var d = this.customArr[f].prop + "y";
                    e = l * Nt,
                    i.newStyle(this.customArr[f].color, !0, e);
                    for (var u = 0; h > u; u++)
                        s = this.datas[u][d],
                        a = s > o ? c[u] || 0 : n[u] || 0,
                        r = o - a,
                        s -= a,
                        i.moveTo(e, r),
                        i.lineTo(e, s),
                        s > o ? (n[u] = n[u] || 0,
                        c[u] = o - s) : (n[u] = o - s,
                        c[u] = c[u] || 0),
                        e += l;
                    i.stroke()
                }
            }
        }
        ;
        var e, h = "ff.sinajs.cn", l = {
            ssl: !0,
            authtype: "A_hq"
        }, o = [], n = function(t) {
            var i, a, r = t["2cn_" + s.symbol].split(","), e = 65;
            for (i = 0; 10 > i; i++)
                a = o[i] || {},
                o[i] = a,
                a.v = r[e - i],
                a.p = r[e - i - 10];
            for (e = 26,
            i = 10; 20 > i; i++)
                a = o[i] || {},
                o[i] = a,
                a.v = r[e + i],
                a.p = r[e + i - 10]
        };
        this.loadUrlData = function() {
            if (IO.WebPush4 && this.symbol && !e) {
                var t = ["2cn", this.symbol].join("_");
                e = new IO.WebPush4(h,t,n,l)
            }
        }
        ,
        this.loadUrlData()
    }
    function F(i, r) {
        this.DEFAULT_ARR = [{
            v: 12,
            color: "#EE2F72",
            prop: "psy",
            idct: "PSY"
        }, {
            v: 6,
            color: "#00c1eb",
            prop: "psyma",
            idct: "PSYMA"
        }],
        a.call(this, i, r),
        this.name = "PSY",
        "k" != r.type && (this.sname = "T_" + this.name),
        this.vaObj = {
            min: 0,
            max: 100,
            upper: 75,
            lower: 25
        },
        this.initAndCalcAll = function(i) {
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            var a = this.customArr[0].v
              , r = this.customArr[1].v
              , s = i[0]
              , e = isNaN(s.prevclose) || s.prevclose < s.close ? 1 : 0
              , h = e
              , l = e / a * 100
              , o = l;
            this.selfArr.push({
                psy: l,
                psyma: l
            });
            for (var n = [e], c = 1, f = i.length; f > c; c++) {
                s = i[c];
                var d = {};
                this.selfArr.push(d),
                e = s.close > i[c - 1].close ? 1 : 0,
                n.push(e),
                h += e,
                c >= a && (h -= n[c - a]),
                l = h / a * 100,
                d.psy = l,
                o += l,
                c >= r ? (o -= this.selfArr[c - r].psy,
                d.psyma = o / r) : d.psyma = o / (c + 1)
            }
        }
    }
    function H(i, r, s) {
        var e = "rgl";
        this.DEFAULT_ARR = [{
            color: "#2D0674",
            prop: e,
            idct: "\u7ea2\u7eff\u89d2\u7ebf"
        }],
        a.call(this, i, r),
        this.name = "RGL",
        this.sname = "T_RGL",
        this.alias = "\u7ea2\u7eff\u89d2\u7ebf",
        this.separate = 1;
        var h = "icn_calc_"
          , l = this;
        this.selfDataUrl = "http://finance.sina.com.cn/finance/touziline/$symbol.js?" + Math.random(),
        this.selfDataUrlUpdate = "http://" + gt + ".sinajs.cn/etag.php?_=" + (new Date).getTime() + "&list=" + h + "$symbol",
        this.cb = s,
        this.df = function(t) {
            var i = [];
            if (t)
                for (var a in t)
                    t.hasOwnProperty(a) && i.push({
                        rgl: Number(t[a]),
                        time: a
                    });
            return i
        }
        ;
        var o, n = !1;
        this.loadUrlData = function() {
            var i = this.aliasymbol || this.symbol
              , a = "_touziredgreenline_" + i
              , s = this.selfDataUrl.replace("$symbol", i).replace("$cb", "var%20" + a + "=").replace("$rn", String((new Date).getDate()));
            this.proxyCfg.usrObj.ssl && (s = t.getSUrl(s)),
            n || (o = t.tUtil.gata(r.usrObj.market),
            t.load(s, function() {
                var t = window[a];
                l.urlData = {
                    time: []
                };
                var i = l.df(t)
                  , r = l.urlData.time;
                r.splice.apply(r, [0, 0].concat(i)),
                n = !0,
                l.update()
            }))
        }
        ,
        this.udf = function(t) {
            if (t) {
                var i, a = t.split(",");
                return a && a.length > 1 && (i = [{
                    time: a[6].substring(0, 5),
                    rgl: a[3] - a[4]
                }]),
                i
            }
        }
        ,
        this.update = function() {
            var i = this.symbol
              , a = "hq_str_" + h + i
              , r = this.selfDataUrlUpdate.replace("$symbol", i);
            this.proxyCfg.usrObj.ssl && (r = t.getSUrl(r)),
            t.load(r, function() {
                var t = window[a];
                window[a] = null;
                var i = l.udf(t);
                i && l.urlData && l.urlData.time && l.updateData(i, l.urlData.time)
            })
        }
        ,
        this.updateData = function(i, a) {
            if (i && a && !(a.length < 1)) {
                var s = a[a.length - 1];
                if (i = i[0]) {
                    if (s.time < i.time)
                        for (var e = t.arrIndexOf(o, i.time), h = t.arrIndexOf(o, s.time), n = h; e >= n; n++)
                            e - n > 0 ? (a[a.length] = a[a.length - 1],
                            console.log(e, n, r.stock.realLen)) : a[a.length - 1] = i;
                    else
                        a[a.length - 1].rgl += i.rgl;
                    l.cb(l),
                    4 == l.viewState.start && 5 == l.viewState.end && r.cbInDC(),
                    this.syncI()
                }
            }
        }
        ,
        this.initAndCalcAll = function(i) {
            if (this.urlData) {
                this.oriArr = this.gdsd(i),
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var a, s = this.urlData.time, e = r.stock.realLen;
                for (0 > e && (e = l.disMod),
                a = 0; a < l.disMod && !(a > e); a++)
                    s[a] && (i[4][a].rgl = s[a].rgl);
                for (var h, o = 0, n = this.oriArr.length; n > o; o++)
                    h = this.oriArr[o],
                    this.selfArr.push({
                        rgl: h ? Number(h.rgl) : 1
                    })
            }
        }
        ,
        this.createPlayingData = function() {
            if (this.datas) {
                var t = this.h % 2 == 0 ? this.h : this.h + 1;
                this.labelMaxP = Math.abs(Math.abs(this.labelMaxP) > Math.abs(this.labelMinP) ? this.labelMaxP : this.labelMinP),
                this.labelMinP = -this.labelMaxP;
                for (var i, a = this.labelMaxP - this.labelMinP, r = 0, s = this.datas.length; s > r; r++) {
                    i = this.datas[r];
                    for (var e = this.customArr.length; e--; ) {
                        var h = this.customArr[e].prop;
                        i[h + "y"] = t / 2 * (this.labelMaxP - i[h]) / a
                    }
                }
            }
        }
        ,
        this.draw = function() {
            if (this.datas) {
                var t = this.line;
                t.clear(!0, i.PARAM.getHd());
                var a = this.datas.length
                  , r = i.DIMENSION.w_t / a
                  , s = i.DIMENSION.h_t
                  , e = r * Nt;
                s = s % 2 == 0 ? s : s + 1;
                for (var h, l, o, n, c = s / 2, f = 0; 2 > f; f++) {
                    n = 1 == f ? i.COLOR.T_FALL : i.COLOR.T_RISE,
                    h = 0,
                    t.beginPath();
                    for (var d = 0; a > d; d++)
                        o = this.datas[d],
                        l = o.rgly + s / 4,
                        0 == f ? o.rgl > 0 && t.drawVStickC(h, l, e, c - l, n) : o.rgl < 0 && t.drawVStickC(h, l, e, c - l, n),
                        h += r;
                    t.stroke()
                }
                t.drawBg()
            }
        }
        ,
        this.loadUrlData()
    }
    function B(i, r) {
        this.DEFAULT_ARR = [{
            v: 12,
            color: "#F17147",
            prop: "roc",
            idct: "ROC"
        }, {
            v: 6,
            color: "#406BEA",
            prop: "maroc",
            idct: "MAROC"
        }],
        a.call(this, i, r),
        this.name = "ROC",
        "k" != r.type && (this.sname = "T_" + this.name),
        this.vaObj = {
            glv: 0
        };
        var s = Ot.calcMA
          , e = Ot.calcREF
          , h = Ot.getArr
          , l = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i)
              , r = this.customArr[0].v
              , o = this.customArr[1].v
              , n = h(a, this.tkProp.close)
              , c = l(l(l(n, e(n, r), "-"), 100, "*"), e(n, r), "/")
              , f = s(c, o);
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var d = 0, u = a.length; u > d; d++)
                this.selfArr[d] = {
                    roc: c[d],
                    maroc: f[d]
                },
                this.selfArr[d][Dt] = a[d].volume < 0
        }
    }
    function X(i, r) {
        this.DEFAULT_ARR = [{
            v: 6,
            color: "#999999",
            prop: "rsi1",
            idct: "RSI1"
        }, {
            v: 12,
            color: "#ffac03",
            prop: "rsi2",
            idct: "RSI2"
        }, {
            v: 24,
            color: "#9A2574",
            prop: "rsi3",
            idct: "RSI3"
        }],
        a.call(this, i, r),
        this.name = "RSI",
        "k" != r.type && (this.sname = "T_" + this.name),
        this.vaObj = {
            min: 0,
            max: 100,
            upper: 70,
            lower: 30
        };
        var s = Ot.calcREF
          , e = Ot.calcMAX
          , h = Ot.calcSMA
          , l = Ot.calcABS
          , o = Ot.operateArr
          , n = Ot.getArr;
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i)
              , r = this.customArr[0].v
              , c = this.customArr[1].v
              , f = this.customArr[2].v
              , d = n(a, this.tkProp.close)
              , u = s(d, 1)
              , A = o(d, u, "-")
              , p = e(A, 0)
              , v = l(A)
              , g = o(o(h(p, r, 1), h(v, r, 1), "/"), 100, "*")
              , m = o(o(h(p, c, 1), h(v, c, 1), "/"), 100, "*")
              , b = o(o(h(p, f, 1), h(v, f, 1), "/"), 100, "*");
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var w = 0, y = a.length; y > w; w++)
                this.selfArr[w] = {
                    rsi1: g[w],
                    rsi2: m[w],
                    rsi3: b[w]
                },
                this.selfArr[w][Dt] = a[w].volume < 0
        }
    }
    function j(i, r) {
        var s = "ignore_pct"
          , e = "ignore_oripct";
        this.DEFAULT_ARR = [{
            v: 4,
            color: "#777777",
            prop: "sar",
            idct: "SAR",
            desc: "\u5929\u6570"
        }, {
            v: 2,
            color: "#b82c0c",
            desc: "\u53c2\u6570"
        }, {
            v: 20,
            color: "#008040",
            desc: "\u53cd\u5411\u4e34\u754c"
        }, {
            color: "#777777",
            idct: "SAR\u64cd\u4f5c\u6536\u76ca",
            prop: s
        }, {
            color: "#777777",
            idct: "\u533a\u95f4\u80a1\u4ef7\u6536\u76ca",
            prop: e
        }],
        a.call(this, i, r),
        this.name = "SAR";
        var h = Ot.calcSAR;
        this.initAndCalcAll = function(i) {
            var a = this.customArr
              , r = h(i, a[0].v, a[1].v, a[2].v);
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var s = 0, e = i.length; e > s; s++)
                this.selfArr[s] = {
                    ignore_minmax: r.direction[s],
                    sar: r.data[s]
                }
        }
        ,
        this.setRange = function() {
            if (this.datas) {
                for (var t = this.viewState.start, i = this.viewState.end, a = i - t; this.datas.length > a; )
                    this.datas.length--;
                for (; this.datas.length < a; )
                    this.datas.push({});
                for (var r = Number.MAX_VALUE, h = -Number.MAX_VALUE, l = 0, o = 0, n = this.selfArr[t].ignore_minmax, c = t; i > c; c++) {
                    var f = this.oriArr[c]
                      , d = this.selfArr[c].ignore_minmax
                      , u = this.datas[c - t];
                    u.date = f.date,
                    c != t ? d == n ? 1 == d && (l = (1 + f.percent) * (1 + l) - 1) : l = 0 == d ? ((f.close - this.oriArr[c - 1].close) / this.oriArr[c - 1].close + 1) * (1 + l) - 1 : ((f.close - f.close) / f.close + 1) * (1 + l) - 1 : 1 == d && (l = ((f.close - f.close) / f.close + 1) * (1 + l) - 1),
                    n = d,
                    c != t && (o = (1 + f.percent) * (1 + o) - 1),
                    u[s] = 100 * l,
                    u[e] = 100 * o;
                    for (var A in this.selfArr[c])
                        if (this.selfArr[c].hasOwnProperty(A)) {
                            if (u[A] = this.selfArr[c][A],
                            0 == A.indexOf(yt))
                                continue;
                            u[A] > h && (h = u[A]),
                            u[A] < r && (r = u[A])
                        }
                }
                this.minPrice = r,
                this.maxPrice = h,
                this.syncI()
            }
        }
        ,
        this.draw = function(t, a) {
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var r = this.line;
                r.clear(!0, i.PARAM.getHd());
                var s = this.datas.length
                  , e = i.DIMENSION.w_k / Math.max(s, i.PARAM.minCandleNum)
                  , h = Math.max(.1 * e, .1);
                h > 2 && (h = 2);
                for (var l, o = this.__iOffsetX - e * Mt, n = this.customArr[0].prop + "y", c = this.customArr, f = 0; 2 > f; f++) {
                    l = o,
                    this.line.newStyle(0 == f ? c[2].color : c[1].color, !0, 2);
                    for (var d = 0; s > d; d++)
                        this.datas[d].ignore_minmax == f && this.line.drawDot(l, this.datas[d][n], h, !0),
                        l += e;
                    this.line.stroke()
                }
                t && r.drawBg(this.__iOffsetX)
            }
        }
    }
    function V(i, r, s) {
        function e(t, i, a) {
            if (typeof t.length < 1)
                return [];
            for (var r, s = n.gata(a), e = t, h = [], l = 0, o = 0, c = s.length; c > o; o++) {
                r = {},
                h[h.length] = r,
                r.trade_time = s[o],
                r.trade_buy = r.trade_sell = r.trade_total = 0;
                for (var f = l, d = e.length; d > f; f++) {
                    var u = e[f]
                      , A = u.time;
                    if (A == s[o]) {
                        r.trade_buy = u.buy,
                        r.trade_sell = u.sell,
                        r.trade_total = u.total,
                        e.splice(f, 1);
                        break
                    }
                    A > s[o] && (r.trade_buy = 0,
                    r.trade_sell = 0,
                    r.trade_total = 0)
                }
            }
            return h[0].trade_index = c - 1,
            h
        }
        var h = this;
        a.call(this, i, r, {
            nu: !0
        }),
        this.name = "TTopTrade",
        this.alias = "\u9ad8\u624b\u4ea4\u6613",
        this.selfDataUrlUpdate = "http://touzi.sina.com.cn/api/openapi.php/TzyGraphService.getGaoShouTradeDetail?callback=$cb&symbol=$symbol&$rn",
        this.selfDataUrl = "http://touzi.sina.com.cn/api/openapi.php/TzyGraphService.getGaoShouTradeDetailMore?callback=$cb&symbol=$symbol&$rn",
        this.cb = s;
        var l = [{
            v: 0 / 0,
            color: "#ff1111",
            prop: "trade_total",
            idct: "\u4eca\u65e5\u4ea4\u6613\u603b\u8ba1"
        }, {
            v: 0 / 0,
            color: "#ff9f07",
            prop: "trade_buy",
            idct: "\u4e70\u5165"
        }, {
            v: 0 / 0,
            color: "#00b5f8",
            prop: "trade_sell",
            idct: "\u5356\u51fa"
        }]
          , o = "top_trade_"
          , n = t.tUtil;
        this.generateSettings = function() {
            if (h.param && h.param.length > 0) {
                h.customArr = [];
                for (var i = 0, a = h.param.length; a > i; i++)
                    h.customArr.push({
                        vol: 0 / 0,
                        color: h.param[i].color || l[i].color || "#" + t.randomColor(),
                        prop: l[i].prop,
                        idct: l[i].idct
                    })
            }
            (!h.customArr || h.customArr.length < 1) && (h.customArr = l)
        }
        ,
        this.udf = function(t) {
            var i = []
              , a = [];
            if (t) {
                for (var s = t.result.data, h = s.length, l = 0; h > l; l++)
                    i.push({
                        total: Number(s[l].total),
                        time: s[l].time,
                        buy: Number(s[l].buy),
                        sell: Number(s[l].sell),
                        date: At.sd(s[l].dt)
                    });
                a = e(i, r.stock.hq.date, "CN", !0)
            }
            return a
        }
        ;
        var c, f = !1;
        this.loadUrlData = function() {
            if (r.stock.hq) {
                var i = this.aliasymbol || this.symbol
                  , a = "_touziTopTrade_" + i
                  , s = this.selfDataUrl.replace("$symbol", i).replace("$cb", "var%20" + a + "=").replace("$rn", String((new Date).getDate()));
                this.proxyCfg.usrObj.ssl && (s = t.getSUrl(s)),
                f || (c = t.tUtil.gata(r.usrObj.market),
                t.load(s, function() {
                    var t = window[a];
                    h.urlData = {
                        time: []
                    };
                    var i = h.df(t)
                      , r = h.urlData.time;
                    r.splice.apply(r, [0, 0].concat(i)),
                    f = !0,
                    h.update()
                }))
            }
        }
        ,
        this.df = function(t) {
            var i = []
              , a = [];
            if (t)
                for (var s = t.result.data, h = s.length, l = 0; h > l; l++) {
                    i[l] = [];
                    for (var o = 0; o < s[l].length; o++)
                        i[l].push({
                            total: Number(s[l][o].total),
                            time: s[l][o].time,
                            buy: s[l][o].buy,
                            sell: s[l][o].sell,
                            date: At.sd(s[l][o].dt)
                        });
                    var n;
                    n = r.stock ? r.stock.hq.date : s[h - 1][0].date,
                    a[l] = e(i[l], n, "CN")
                }
            return a
        }
        ,
        this.update = function() {
            var i = this.symbol
              , a = "hq_str_" + o + i
              , r = this.selfDataUrlUpdate.replace("$symbol", i).replace("$cb", "var " + a + "=").replace("$rn", String((new Date).getDate()));
            this.proxyCfg.usrObj.ssl && (r = t.getSUrl(r)),
            t.load(r, function() {
                var t = window[a];
                window[a] = null;
                var i = h.udf(t);
                i && h.urlData && h.urlData.time && h.updateData(i, h.urlData.time)
            })
        }
        ,
        this.updateData = function(t, i) {
            !t || !i || i.length < 1 || (t = t[0],
            t && (h.cb(h),
            4 == h.viewState.start && 5 == h.viewState.end,
            this.syncI()))
        }
        ,
        this.initAndCalcAll = function(i) {
            if (this.urlData) {
                this.oriArr = this.gdsd(i),
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var a, s, e, l, o = this.urlData.time, n = r.stock.realLen;
                for (0 > n && (n = h.disMod),
                a = 0; a < o.length; a++)
                    for (s = 0; s < h.disMod; s++)
                        o[a][s] && (i[a][s].trade_total = o[a][s].trade_total,
                        i[a][s].trade_buy = o[a][s].trade_buy,
                        i[a][s].trade_sell = o[a][s].trade_sell,
                        i[a][s].trade_time = o[a][s].trade_time);
                for (a = 0,
                l = this.oriArr.length; l > a; a++)
                    e = this.oriArr[a],
                    this.selfArr.push({
                        trade_total: e.trade_total ? Number(e.trade_total) : 0,
                        trade_buy: e.trade_buy ? Number(e.trade_buy) : 0,
                        trade_sell: e.trade_sell ? Number(e.trade_sell) : 0,
                        trade_time: e.trade_time ? e.trade_time : 0
                    })
            }
        }
        ,
        this.draw = function(t) {
            if (this.__iOffsetX = isNaN(t) ? this.__iOffsetX : t,
            this.datas) {
                var a = this.line;
                a.clear(!0, i.PARAM.getHd());
                for (var r, s, e, h, l, o = this.datas.length, n = i.DIMENSION.w_t / o, c = 0, f = .6 * n, d = .5 * this.h, u = 0; 2 > u; u++) {
                    switch (c) {
                    case 0:
                        l = i.COLOR.T_RISE;
                        break;
                    case 1:
                        l = i.COLOR.T_FALL
                    }
                    for (s = 0,
                    a.beginPath(),
                    r = 0; o > r; r++)
                        h = this.datas[r],
                        e = h.trade_totaly,
                        h.trade_total > 0 && (h.trade_buy > 0 && a.drawVStickC(s, e, f, d - e, l),
                        h.trade_sell > 0 && a.drawVStickC(s, e, f, d - e, l)),
                        s += n;
                    a.stroke()
                }
                a.drawBg(this.__iOffsetX)
            }
        }
        ,
        this.loadUrlData()
    }
    function z(i, r, s) {
        var e = this
          , h = 2e4;
        a.call(this, i, r, {
            nu: !0
        }),
        this.name = "TFLOW",
        this.sname = "T_TFLOW",
        this.alias = "\u51c0\u4e70\u5165",
        this.urls = {
            oned: "http://stock.finance.sina.com.cn/stock/api/jsonp.php/$cb/StockLevel2Service.getLv2ZhiShuminline?random=$rn",
            onec: "http://stock.finance.sina.com.cn/stock/api/jsonp.php/$cb/StockLevel2Service.getLv2Adayminline?symbol=$symbol&___qn=3&random=$rn",
            c: "http://stock.finance.sina.com.cn/stock/api/jsonp.php/$cb/StockLevel2Service.getLv2A5dayminline?symbol=$symbol&random=$rn",
            d: "http://stock.finance.sina.com.cn/stock/api/jsonp.php/$cb/StockLevel2Service.getLv2ZhiShu5dayminline?random=$rn"
        };
        var l, o = !0;
        this.cb = s;
        var n = 0
          , c = [{
            v: 0 / 0,
            color: "#ff1111",
            prop: "mb",
            idct: "\u7279\u5927"
        }, {
            v: 0 / 0,
            color: "#ff9f07",
            prop: "ms",
            idct: "\u5927"
        }, {
            v: 0 / 0,
            color: "#00b5f8",
            prop: "sb",
            idct: "\u4e2d"
        }, {
            v: 0 / 0,
            color: "#5b0497",
            prop: "ss",
            idct: "\u5c0f"
        }]
          , f = null;
        this.generateSettings = function() {
            for (var i in e.urls)
                e.urls.hasOwnProperty(i) && (e.urls[i] = t.getSUrl(e.urls[i]));
            if (e.param && e.param.length > 0) {
                e.customArr = [];
                for (var a = 0, r = e.param.length; r > a; a++)
                    e.customArr.push({
                        v: 0 / 0,
                        color: e.param[a].color || c[a].color || "#" + t.randomColor(),
                        prop: c[a].prop,
                        idct: c[a].idct
                    })
            }
            (!e.customArr || e.customArr.length < 1) && (e.customArr = c)
        }
        ;
        var d = function(t) {
            var i, a = String(t).split("|"), r = [];
            i = a.slice(1, a.length);
            for (var s = 0, e = {}, h = []; s < i.length; s++)
                h = i[s].split(","),
                h[0] > "11:30" && h[0] < "13:00" || (e = {
                    time: h[0],
                    mb: Number(h[1]),
                    ms: Number(h[2]),
                    sb: Number(h[3]),
                    ss: Number(h[4])
                },
                r.push(e));
            return r
        };
        this.df = function(t) {
            for (var i, a = String(t).split("R"), r = [], s = 0, e = a.length, h = []; e > s; s++) {
                i = String(a[s]).split("|");
                var l = [];
                h = i.slice(1, i.length);
                for (var o = 0, n = {}, c = []; o < h.length; o++)
                    c = h[o].split(","),
                    c[0] > "11:30" && c[0] < "13:00" || (n = {
                        time: c[0],
                        mb: Number(c[1]),
                        ms: Number(c[2]),
                        sb: Number(c[3]),
                        ss: Number(c[4])
                    },
                    0 == o && (n.date = i.slice(0, 1)[0]),
                    l.push(n));
                r.push(l)
            }
            return r
        }
        ,
        this.loadUrlData = function(i) {
            if (i && r.stock.hq) {
                var a = e.symbol
                  , s = "_" + a + At.ddt(new Date).getFullYear();
                e.selfDataUrl = l ? r.stock.dp ? e.urls.oned : e.urls.onec : r.stock.dp ? e.urls.d : e.urls.c,
                r.stock.hq.isUpdateTime || (clearInterval(this.updateId),
                this.updateId = null),
                t.load(e.selfDataUrl.replace("$symbol", a).replace("$cb", "var%20" + s + "="), function() {
                    var t = window[s];
                    return t && t.__ERROR ? (e.urlData[4] = f,
                    void (n = 1)) : void (t && (l ? e.urlData[4] = d(t) : e.urlData = e.df(t),
                    f = e.urlData[4],
                    e.toReCalc = !0,
                    e.cb(e),
                    e.tFlowLen = e.urlData.length,
                    l = !0))
                }, function() {
                    n = 1
                })
            }
        }
        ,
        this.initAndCalcAll = function(i) {
            if (r.stock.hq && o && (e.loadUrlData(!0),
            o = !1),
            this.oriArr = this.gdsd(i),
            1 != n && this.urlData) {
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                var a, s, h = i.length, l = [], c = this.urlData.length, f = 0;
                for (a = 0; h > a; a++)
                    for (s = f; c > s; s++)
                        i[a][0] && i[a][0].date && this.urlData[a][0] && t.dateUtil.ds(i[a][0].date, "-") == this.urlData[a][0].date ? (f++,
                        l.push(this.urlData[s])) : s >= c - 1 && l.push([]);
                for (a = 0; h > a; a++)
                    for (var d, u, A = a >= h - 1 ? 1e-7 : 1e-6, p = 0; p < this.disMod; p++) {
                        u = i[a][p],
                        this.urlData[a][p] && (d = this.urlData[a][p]),
                        a >= h - 1 && p > r.stock.hq.index && (d = null);
                        var v = {
                            mb: this.urlData[a][p] ? Number(this.urlData[a][p].mb) : d ? d.mb : A,
                            ms: this.urlData[a][p] ? Number(this.urlData[a][p].ms) : d ? d.ms : A,
                            sb: this.urlData[a][p] ? Number(this.urlData[a][p].sb) : d ? d.sb : A,
                            ss: this.urlData[a][p] ? Number(this.urlData[a][p].ss) : d ? d.ss : A
                        };
                        a == h - 1 && p == this.disMod - 1 && r.stock.hq.time > "15:00" && (v = this.urlData[a][p - 1]),
                        this.selfArr.push(v)
                    }
            }
        }
        ,
        this.drawCalc = function() {
            if (this.datas) {
                for (var t = this.viewState.start * this.disMod, i = this.viewState.end * this.disMod, a = i - t; this.datas.length > a; )
                    this.datas.length--;
                for (; this.datas.length < a; )
                    this.datas.push({});
                var r, s, e = Number.MAX_VALUE, h = -Number.MAX_VALUE;
                for (r = t; i > r; r++) {
                    s = this.datas[r - t],
                    s.date = this.oriArr[r].date;
                    for (var l in this.selfArr[r])
                        this.selfArr[r].hasOwnProperty(l) && (s[l] = this.selfArr[r][l],
                        s[l] > h && (h = s[l]),
                        s[l] < e && (e = s[l]))
                }
                this.labelMaxP = h,
                this.labelMinP = e;
                var o = h - e;
                for (r = 0; a > r; r++) {
                    s = this.datas[r];
                    for (var n = this.customArr.length; n--; ) {
                        var c = this.customArr[n].prop;
                        s[c + "y"] = this.h * (h - s[c]) / o
                    }
                }
            }
        }
        ,
        this.draw = function(t) {
            if (this.datas) {
                r.stock.hq && r.stock.hq.isUpdateTime && !this.updateId && (this.updateId = setInterval(e.loadUrlData, h, !0)),
                this.line.clear(!0, this.cfg.PARAM.getHd());
                var i = 1.5;
                this.h > 90 ? i = 1.4 : this.h < 50 && (i = 1.3);
                for (var a, s = this.datas.length, l = this.cfg.DIMENSION.w_t / s, o = this.customArr.length; o--; ) {
                    var n = this.customArr[o].prop + "y";
                    a = l * Nt,
                    this.line.newStyle(this.customArr[o].color, !0, i);
                    for (var c = 0; s > c; c++)
                        1e-7 != this.datas[c][this.customArr[o].prop] && (0 == c || c % this.disMod == 0 ? this.line.moveTo(a, this.datas[c][n]) : this.line.lineTo(a, this.datas[c][n]),
                        a += l);
                    this.line.stroke()
                }
                t && this.line.drawBg()
            }
        }
        ,
        this.updateId = setInterval(e.loadUrlData, h, !0),
        r.stock.hq || this.loadUrlData(!0)
    }
    function G(i, r) {
        this.DEFAULT_ARR = [{
            color: "#007cc8",
            prop: "tor",
            idct: "TOR"
        }],
        a.call(this, i, r),
        this.name = "TOR",
        this.alias = "\u6362\u624b\u7387";
        var s = !1
          , e = r.stock.extraDataObj.rsAmount;
        this.initAndCalcAll = function(i) {
            if (e) {
                this.oriArr = i,
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                for (var a, h, l = 0, o = i.length; o > l; l++) {
                    a = i[l];
                    for (var n = 0, c = e.length; c > n; n++)
                        if (a.date >= e[n].date) {
                            h = e[n].amount;
                            break
                        }
                    this.selfArr[l] = {
                        tor: a.volume / h
                    }
                }
            } else if (!s) {
                s = !0;
                var f = this;
                setTimeout(function() {
                    e = r.stock.extraDataObj.rsAmount,
                    f.initAndCalcAll(i),
                    s = !1
                }, 3e3)
            }
        }
    }
    function K(i, r) {
        this.DEFAULT_ARR = [{
            v: 12,
            color: "#d6c84b",
            prop: "trix",
            idct: "TRIX"
        }, {
            v: 9,
            color: "#26bcd5",
            prop: "matrix",
            idct: "MATRIX"
        }],
        a.call(this, i, r),
        this.name = "TRIX",
        "k" != r.type && (this.sname = "T_" + this.name);
        var s = Ot.calcMA
          , e = Ot.calcEMA
          , h = Ot.getArr
          , l = Ot.operateArr
          , o = Ot.calcREF;
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i)
              , r = this.customArr[0].v
              , n = this.customArr[1].v
              , c = h(a, this.tkProp.close)
              , f = e(e(e(c, r), r), r)
              , d = o(f, 1)
              , u = l(l(l(f, d, "-"), d, "/"), 100, "*")
              , A = s(u, n);
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var p = 0, v = a.length; v > p; p++)
                this.selfArr[p] = {
                    trix: u[p],
                    matrix: A[p]
                },
                this.selfArr[p][Dt] = a[p].volume < 0
        }
    }
    function Y(t, i, a) {
        z.call(this, t, i, {
            nu: !0
        }),
        this.urls = {
            oned: "http://stock.sina.com.cn/stock/api/jsonp.php/$cb/TouziService.getMinuteFlow?random=$rn",
            onec: "http://stock.sina.com.cn/stock/api/jsonp.php/$cb/TouziService.getStockMinuteFlow?symbol=$symbol&random=$rn",
            c: "http://stock.sina.com.cn/stock/api/jsonp.php/$cb/TouziService.getStockHistoryMinuteFlow?symbol=$symbol&random=$rn",
            d: "http://stock.sina.com.cn/stock/api/jsonp.php/$cb/TouziService.getHistoryMinuteFlow?symbol=$symbol&random=$rn"
        },
        this.cb = a,
        i.stock.hq || this.loadUrlData(!0)
    }
    function W(i, r, s) {
        var e = "pct";
        this.DEFAULT_ARR = [{
            color: "#333333",
            prop: e,
            idct: ""
        }],
        this.name = "\u76d8\u4e2d\u5f02\u52a8",
        a.call(this, i, r),
        this.selfDataUrl = "https://quotes.sina.cn/cn/api/openapi.php/PriceChangeService.getPlateHq?point=top&id=$id&callback=var imtdata=",
        this.selfNewUrl = "https://quotes.sina.cn/cn/api/openapi.php/PriceChangeService.getPlateHqCron?callback=var imtfunc=",
        this.cb = s,
        this.timeList = t.tUtil.gta();
        var h;
        this.loadUrlData = function() {
            var i, a = this, r = this.selfNewUrl, s = "", e = function() {
                t.load(r, function() {
                    var r = imtfunc.result.data.split("=");
                    r.length > 1 && r[1] && (i = JSON.parse(r[1]),
                    s = i[i.length - 1].id),
                    t.load(a.selfDataUrl.replace("$id", s), function() {
                        var t = imtdata.result.data;
                        a.urlData = null,
                        a.urlData = t.concat(i),
                        a.cb(a),
                        h && (clearInterval(h),
                        h = null),
                        h = setInterval(function() {
                            var t = document.getElementById("imtctx");
                            t && e()
                        }, 3e4)
                    })
                })
            };
            a.urlData || e()
        }
        ,
        this.initAndCalcAll = function(i) {
            this.urlData && (this.oriArr = this.gdsd(i),
            !this.datas && (this.datas = []),
            t.ca(this.selfArr))
        }
        ,
        this.draw = function() {
            var t = this
              , a = this.cfg.DIMENSION.w_k / 240
              , s = this.line;
            if (this.urlData && !(this.urlData.length < 1)) {
                s.clear(!0, i.PARAM.getHd());
                const e = document.createElement("div");
                e.style.position = "absolute",
                e.style.top = "0px",
                e.style.zIndex = 999,
                e.id = "imtctx";
                var h = document.getElementById("imtctx")
                  , l = document.getElementById(r.usrObj.domid);
                if (l) {
                    h || l.appendChild(e);
                    var o = ["rgba(5, 170, 59, .1)", "rgba(253, 67, 49, .1)"]
                      , n = ["rgba(5, 170, 59)", "rgba(253, 67, 49)"]
                      , c = this.viewState.start
                      , f = this.oriArr.slice(c * this.disMod);
                    h = document.getElementById("imtctx"),
                    h.innerHTML = "";
                    for (var d = 60, u = 20, A = -1, p = 0; p < this.urlData.length; p++) {
                        var v = this.urlData[p];
                        if (!v)
                            return;
                        var g = t.timeList.indexOf(v.min);
                        if (!f[g])
                            return;
                        var m = s.getG()
                          , b = 2 == v.type ? n[0] : n[1];
                        m.strokeStyle = b,
                        m.fillStyle = 2 == v.type ? o[0] : o[1];
                        var w = f[g].change;
                        if (p > 0) {
                            var y = a * (g - A);
                            d > y ? w > 0 ? u < this.cfg.DIMENSION.h_t - 60 ? u = this.cfg.DIMENSION.h_t - 40 : u -= 22 : u > 80 ? u = 20 : u += 22 : u = w > 0 ? this.cfg.DIMENSION.h_t - 40 : 20
                        } else
                            u = w > 0 ? this.cfg.DIMENSION.h_t - 40 : 20;
                        var D = 0;
                        g > 180 && (D = -d),
                        m.strokeRect(g * a + D, u, d, 20),
                        m.fillRect(g * a + D, u, d, 20);
                        var M = m.measureText(v.index_name).width;
                        m.textAlign = "center",
                        m.font = "10px " + this.cfg.STYLE.FONT_FAMILY,
                        s.drawTxt(v.index_name, g * a + (d - M) / 2 + D, u + 5, {
                            color: b
                        }),
                        A = g,
                        m.beginPath(),
                        m.lineWidth = .5,
                        m.moveTo(g * a, u),
                        m.lineTo(g * a, f[g].py),
                        m.stroke(),
                        m.beginPath(),
                        m.arc(g * a, f[g].py, 2, 0, 2 * Math.PI),
                        m.fill();
                        const N = document.createElement("div")
                          , O = N.style;
                        O.position = "absolute",
                        O.width = d + "px",
                        O.height = "20px",
                        O.backgroundColor = "rgba(0,0,0,0)",
                        O.zIindex = 99,
                        O.top = u + "px",
                        O.left = g * a + D + 4 + "px",
                        N.dataset.index = p,
                        h.appendChild(N),
                        N.addEventListener("click", function(i) {
                            var a = i.target.dataset.index;
                            console.log(t.urlData[a]),
                            window.__mini__ && window.__minigotDetail__(t.urlData[a].index_code)
                        })
                    }
                }
            }
        }
        ,
        this.loadUrlData()
    }
    function q(i, r, s) {
        var e = "pct";
        this.base64png = ["data:image/png;base64,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", "data:image/png;base64,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", "data:image/png;base64,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"],
        this.DEFAULT_ARR = [{
            color: "#333333",
            prop: e,
            idct: ""
        }],
        this.cc = ["#508CEE", "#FB2F3B", "#F4B85B"],
        a.call(this, i, r),
        this.name = "BS",
        this.separate = 1,
        this.selfDataUrl = "https://finance.sina.com.cn/finance/hq/upbs/$symbol.js?_=$rn",
        this.selfHqUrl = "https://hq.sinajs.cn/?list=wxbs_",
        this.cb = s,
        this.df = function(t) {
            var i = [];
            if (t) {
                var a = t;
                for (var r in a)
                    a.hasOwnProperty(r) && i.push({
                        flag: a[r],
                        date: At.sd(r)
                    })
            }
            return i
        }
        ,
        this.loadUrlData = function() {
            var i = this
              , a = this.symbol
              , r = "_touzibullbear_" + a
              , s = this.selfDataUrl.replace("$symbol", a).replace("$rn", String((new Date).getDate()))
              , e = this.selfHqUrl + a;
            i.urlData || t.load(e, function() {
                var e = window["hq_str_wxbs_" + a];
                t.load(s, function() {
                    var t = window[r];
                    if (e) {
                        var a = e.split(",");
                        t[a[0]] || (t[a[0]] = a[1])
                    }
                    i.urlData || (i.urlData = {
                        day: []
                    }),
                    i.urlData.day = i.df(t),
                    i.toReCalc = !0,
                    i.cb(i)
                })
            })
        }
        ,
        this.initAndCalcAll = function(i) {
            if (this.urlData) {
                this.oriArr = this.gdsd(i),
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                for (var a, r = this.urlData.day, s = t.kUtil.adbd(r, i, !1, !1), e = 0, h = i.length; h > e; e++)
                    a = s[e],
                    this.selfArr.push({
                        flag: a ? Number(a.flag) : 1,
                        isFake: a ? !!a.isFake : !0
                    })
            }
        }
        ,
        this.img = [null, null, null],
        this.draw = function(t, a) {
            function r(t, i, a, r, s) {
                t.moveTo(i, a + s),
                t.lineTo(i - r, a + Math.sqrt(3) * r + s),
                t.lineTo(i + r, a + Math.sqrt(3) * r + s),
                t.lineTo(i, a + s)
            }
            function s(t, i, a, r, s) {
                t.moveTo(i, a - s),
                t.lineTo(i - r, a - Math.sqrt(3) * r - s),
                t.lineTo(i + r, a - Math.sqrt(3) * r - s),
                t.lineTo(i, a - s)
            }
            var e = this;
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var h = this.line;
                h.clear(!0, i.PARAM.getHd());
                for (var l = this.viewState.start, o = this.viewState.end, n = o - l, c = this.cfg.DIMENSION.w_k / n, f = c * Mt, d = l; o > d; d++) {
                    var u = this.datas[d - l];
                    if (!u.isFake) {
                        var A = this.cc[u.flag]
                          , p = u.flag > 0 ? this.oriArr[d].ly + 12 : this.oriArr[d].hy - 14 - 12
                          , v = this.oriArr[d].ix;
                        h.newStyle(A, !0, 0),
                        h.newFillStyle([A]),
                        h.moveTo(f, p),
                        u.flag > 0 ? r(h, this.oriArr[d].ix, this.oriArr[d].ly + 2, 3, 2) : s(h, this.oriArr[d].ix, this.oriArr[d].hy - 2, 3, 2),
                        h.fill();
                        var g = 14
                          , m = 7;
                        2 == u.flag && (g = 24,
                        m = 12),
                        this.img[u.flag] ? h.getG().drawImage(e.img[u.flag], v - m, p, g, g) : (this.img[u.flag] = new Image,
                        this.img[u.flag].onload = function() {
                            h.getG().drawImage(e.img[u.flag], v - m, p, g, g)
                        }
                        ,
                        this.img[u.flag].src = this.base64png[u.flag]),
                        h.fill(),
                        h.closePath()
                    }
                    f += c
                }
                var b = h.getG();
                b.font = i.STYLE.FONT_SIZE + "px " + i.STYLE.FONT_FAMILY,
                b.fillStyle = "#000000",
                e.img[2] ? b.drawImage(e.img[2], 3, 0, 16, 16) : (e.img[2] = new Image,
                e.img[2].onload = function() {
                    b.drawImage(e.img[2], 3, 0, 16, 16)
                }
                ,
                e.img[2].src = e.base64png[2]),
                b.fillText("\u4e94\u661f\u4e70\u70b9\uff0c\u63d0\u5347\u6210\u529f\u7387", 20, 13)
            }
        }
        ,
        this.loadUrlData()
    }
    function Z(i, r, s) {
        var e = "pct"
          , h = "oripct";
        this.DEFAULT_ARR = [{
            color: "#fa6d6d",
            prop: e,
            idct: "\u7ea2\u7ebf\uff08\u591a\u7a7a\u4fe1\u53f7\u6536\u76ca\uff09"
        }, {
            color: "#2b55ff",
            prop: h,
            idct: "\u84dd\u7ebf\uff08\u80a1\u4ef7\u81ea\u7136\u6da8\u5e45\uff09"
        }],
        a.call(this, i, r),
        this.name = "TZY",
        this.separate = 1,
        this.selfDataUrl = "http://finance.sina.com.cn/finance/hq/$symbol.js?_=$rn";
        var l = "dkfz_";
        this.selfDataUrlUpdate = "http://" + gt + ".sinajs.cn/etag.php?_=" + (new Date).getTime() + "&list=" + l + "$symbol",
        this.cb = s,
        this.toReCalc = !0,
        this.loadedFlag = {},
        this.loadedFromTo = void 0,
        this.df = function(t) {
            var i = [];
            if (t) {
                var a = t;
                for (var r in a)
                    a.hasOwnProperty(r) && i.push({
                        flag: a[r],
                        date: At.sd(r)
                    })
            }
            return i
        }
        ,
        this.loadUrlData = function() {
            var i = this.getFromToM.get(this);
            if (i) {
                var a = i[0]
                  , r = i[1]
                  , s = this
                  , e = this.symbol
                  , h = "_touzibullbear_" + e
                  , l = this.selfDataUrl.replace("$symbol", e).replace("$cb", "var%20" + h + "=").replace("$from", a).replace("$to", r).replace("$rn", String((new Date).getDate()));
                this.proxyCfg.usrObj.ssl && (l = t.getSUrl(l)),
                t.load(l, function() {
                    var t = window[h];
                    s.urlData || (s.urlData = {
                        day: []
                    });
                    var i = s.df(t)
                      , a = s.urlData.day;
                    a.splice.apply(a, [0, 0].concat(i)),
                    a.sort(function(t, i) {
                        return t.date - i.date
                    }),
                    s.toReCalc = !0,
                    s.cb(s)
                })
            }
        }
        ,
        this.udf = function(t) {
            if (t) {
                var i, a = t.split(",");
                return a && a.length > 1 && (i = [{
                    date: At.sd(a[0]),
                    flag: a[1]
                }]),
                i
            }
        }
        ;
        var o = !0;
        this.UPDATE_THRESHOLD = 3,
        this.update = function() {
            if (o)
                o = !1;
            else {
                if (++this.updateCount < this.UPDATE_THRESHOLD)
                    return;
                this.updateCount >= this.UPDATE_THRESHOLD && (this.updateCount = 0)
            }
            var i = this
              , a = this.symbol
              , r = "hq_str_" + l + a
              , s = this.selfDataUrlUpdate.replace("$symbol", a);
            this.proxyCfg.usrObj.ssl && (s = t.getSUrl(s)),
            t.load(s, function() {
                var t = window[r]
                  , a = i.udf(t);
                a && i.doUpdate(a)
            })
        }
        ,
        this.updateData = function(t, i, a) {
            if (t && i && !(i.length < 1)) {
                var r = i[i.length - 1];
                if (t = t[0])
                    if (At.stbd(t.date, r.date))
                        for (var s in t)
                            t.hasOwnProperty(s) && ("undefined" != typeof r[s] && (r[s] = t[s]),
                            r.isFake = !1);
                    else
                        t.date > r.date && this.newData(i, t, a)
            }
        }
        ,
        this.initAndCalcAll = function(i) {
            if (this.oriArr = i,
            this.urlData && this.toReCalc) {
                this.toReCalc = !1,
                !this.datas && (this.datas = []),
                t.ca(this.selfArr);
                for (var a, r = this.urlData.day, s = t.kUtil.adbd(r, i, !1, !1), e = 0, h = i.length; h > e; e++)
                    a = s[e],
                    this.selfArr.push({
                        flag: a ? Number(a.flag) : 1,
                        isFake: a ? !!a.isFake : !0
                    })
            }
        }
        ,
        this.setRange = function() {
            if (this.datas) {
                for (var t = this.viewState.start, i = this.viewState.end, a = i - t; this.datas.length > a; )
                    this.datas.length--;
                for (; this.datas.length < a; )
                    this.datas.push({});
                for (var r = 0, s = 0, l = this.selfArr[t].flag, o = Ot.calcA, n = Ot.getArr, c = 10, f = t; i > f; f++) {
                    var d = this.datas[f - t];
                    d.date = this.oriArr[f].date;
                    var u = this.selfArr[f].flag
                      , A = this.oriArr[f]
                      , p = o(n(this.oriArr.slice(0 > f - c + 1 ? 0 : f - c + 1, f + 1), "close", function(t) {
                        return +t.toFixed(2)
                    }))
                      , v = A.close.toFixed(2)
                      , g = A.open.toFixed(2);
                    if (f != t) {
                        var m = this.oriArr[f - 1].close.toFixed(2);
                        u == l ? 1 == u && (r = (1 + (v - m) / m) * (1 + r) - 1) : r = 0 == u ? p > g ? ((g - m) / m + 1) * (1 + r) - 1 : ((p - m) / m + 1) * (1 + r) - 1 : g > p ? ((v - g) / g + 1) * (1 + r) - 1 : ((v - p) / p + 1) * (1 + r) - 1
                    } else
                        1 == u && (r = g > p ? ((v - g) / g + 1) * (1 + r) - 1 : ((v - p) / p + 1) * (1 + r) - 1);
                    l = u,
                    f != t && (s = (1 + A.percent) * (1 + s) - 1),
                    d[e] = 100 * r,
                    d[h] = 100 * s;
                    for (var b in this.selfArr[f])
                        this.selfArr[f].hasOwnProperty(b) && (d[b] = this.selfArr[f][b])
                }
                this.syncI()
            }
        }
        ,
        this.draw = function(a, r) {
            function s(t, i, a) {
                for (var r = t.length, s = t[r - 1][i], e = r - 1, h = t.length; h--; ) {
                    var l = t[h][i];
                    a ? l > s && (s = l,
                    e = h) : s > l && (s = l,
                    e = h)
                }
                return e
            }
            function e(t, i, a, r, s) {
                t.moveTo(i, a + s),
                t.lineTo(i - r, a + Math.sqrt(3) * r + s),
                t.lineTo(i + r, a + Math.sqrt(3) * r + s),
                t.lineTo(i, a + s)
            }
            function h(t, i, a, r, s) {
                t.moveTo(i, a - s),
                t.lineTo(i - r, a - Math.sqrt(3) * r - s),
                t.lineTo(i + r, a - Math.sqrt(3) * r - s),
                t.lineTo(i, a - s)
            }
            if (this.__iOffsetX = isNaN(r) ? this.__iOffsetX : r,
            this.datas) {
                var l = this.line;
                l.clear(!0, i.PARAM.getHd());
                var o, n, c, f = this.viewState.start, d = this.viewState.end, u = t.hex2dec(this.customArr[0].color, .5), A = t.hex2dec(this.customArr[1].color, .5);
                c = f,
                n = this.datas[0].flag;
                for (var p = f; d > p; p++)
                    if (this.datas[p - f].isFake && p != d - 1)
                        c = p;
                    else {
                        if (o = this.datas[p - f].flag,
                        o != n) {
                            l.beginPath();
                            var v = (this.oriArr[p].ix + this.oriArr[p - 1].ix) / 2
                              , g = (this.oriArr[p].cy + this.oriArr[p - 1].cy) / 2;
                            if (c != f)
                                var m = (this.oriArr[c].ix + this.oriArr[c - 1].ix) / 2
                                  , b = (this.oriArr[c].cy + this.oriArr[c - 1].cy) / 2;
                            else
                                m = this.oriArr[c].ix,
                                b = this.oriArr[c].cy;
                            if (l.moveTo(v, g),
                            l.lineTo(m, b),
                            1 == n) {
                                var w = s(this.oriArr.slice(c, p), "high", !0) + c;
                                l.lineTo(this.oriArr[w].ix, this.oriArr[w].hy);
                                var y = this.oriArr[p].cy == this.oriArr[w].hy;
                                y ? l.newStyle([u]) : l.newFillStyle([u])
                            } else
                                w = s(this.oriArr.slice(c, p), "low", !1) + c,
                                l.lineTo(this.oriArr[w].ix, this.oriArr[w].ly),
                                y = this.oriArr[p].cy == this.oriArr[w].ly,
                                y ? l.newStyle([A]) : l.newFillStyle([A]);
                            y ? l.stroke() : l.fill(),
                            c = p
                        }
                        (p == d - 1 && !this.datas[p - f].isFake || p == d - 2 && this.datas[p - f + 1].isFake) && (l.beginPath(),
                        v = this.oriArr[p].ix,
                        g = this.oriArr[p].cy,
                        o != n ? (m = (this.oriArr[p].ix + this.oriArr[p - 1].ix) / 2,
                        b = (this.oriArr[p].cy + this.oriArr[p - 1].cy) / 2,
                        l.moveTo(v, g),
                        l.lineTo(m, b),
                        1 == o ? (l.lineTo(this.oriArr[p].ix, this.oriArr[p].hy),
                        y = this.oriArr[p].cy == this.oriArr[p].hy,
                        y ? l.newStyle([u]) : l.newFillStyle([u])) : (l.lineTo(this.oriArr[p].ix, this.oriArr[p].ly),
                        y = this.oriArr[p].cy == this.oriArr[p].ly,
                        y ? l.newStyle([A]) : l.newFillStyle([A]))) : (f == c ? (m = this.oriArr[c].ix,
                        b = this.oriArr[c].cy) : (m = (this.oriArr[c].ix + this.oriArr[c - 1].ix) / 2,
                        b = (this.oriArr[c].cy + this.oriArr[c - 1].cy) / 2),
                        l.moveTo(v, g),
                        l.lineTo(m, b),
                        1 == o ? (w = s(this.oriArr.slice(c, p + 1), "high", !0) + c,
                        l.lineTo(this.oriArr[w].ix, this.oriArr[w].hy),
                        y = this.oriArr[p].cy == this.oriArr[w].hy,
                        y ? l.newStyle([u]) : l.newFillStyle([u])) : (w = s(this.oriArr.slice(c, p + 1), "low", !1) + c,
                        l.lineTo(this.oriArr[w].ix, this.oriArr[w].ly),
                        y = this.oriArr[p].cy == this.oriArr[w].ly,
                        y ? l.newStyle([A]) : l.newFillStyle([A]))),
                        y ? l.stroke() : l.fill()),
                        n = o
                    }
                var D = i.DIMENSION.w_k / Math.max(this.datas.length, i.PARAM.minCandleNum);
                D = D > 5 ? 5 : D,
                D = 2 > D ? 2 : D;
                var M = 3
                  , N = this.customArr[0].color
                  , O = this.customArr[1].color;
                for (n = this.datas[0].flag,
                l.beginPath(),
                p = f; d > p; p++)
                    o = this.datas[p - f].flag,
                    o != n && 1 == o && e(l, this.oriArr[p].ix, this.oriArr[p].ly, D, M),
                    n = o;
                for (l.newFillStyle([N]),
                l.fill(),
                n = this.datas[0].flag,
                l.beginPath(),
                p = f; d > p; p++)
                    o = this.datas[p - f].flag,
                    o != n && 0 == o && h(l, this.oriArr[p].ix, this.oriArr[p].hy, D, M),
                    n = o;
                l.newFillStyle([O]),
                l.fill();
                var S = "\u8f6c\u591a\uff0c\u5efa\u8bae\u5173\u6ce8"
                  , I = "\u8f6c\u7a7a\uff0c\u98ce\u9669\u8f83\u9ad8"
                  , T = l.getG();
                T.font = i.STYLE.FONT_SIZE + "px " + i.STYLE.FONT_FAMILY;
                var k = T.measureText(S).width
                  , x = 10 / Math.sqrt(3)
                  , C = 10
                  , _ = 5
                  , P = x * _;
                T.beginPath(),
                T.fillStyle = N,
                T.fillText(S, P, C),
                P += k + x * (_ - 2),
                T.fillStyle = O,
                T.fillText(I, P, C),
                P = x * (_ - 1.5),
                l.beginPath(),
                l.newFillStyle([N]),
                e(l, P, 1, x, 0),
                l.fill(),
                P += k + x * (_ - 2),
                l.beginPath(),
                l.newFillStyle([O]),
                h(l, P, C + 1, x, 0),
                l.fill(),
                a && l.drawBg(this.__iOffsetX)
            }
        }
        ,
        this.loadUrlData()
    }
    function Q(t, i, a) {
        Z.call(this, t, i),
        this.name = "TZYS",
        this.alias = "\u591a\u7a7a\u53cd\u8f6c",
        this.cb = a,
        this.drawCalc = function() {
            if (this.datas) {
                this.setRange();
                var t, i, a, r, s = this.datas.length, e = Number.MAX_VALUE, h = -Number.MAX_VALUE;
                for (i = 0; s > i; i++)
                    for (t = this.datas[i],
                    a = this.customArr.length; a--; )
                        r = this.customArr[a].prop,
                        r && (t[r] > h && (h = t[r]),
                        t[r] < e && (e = t[r]));
                this.labelMaxP = this.maxPrice = h,
                this.labelMinP = this.minPrice = e;
                var l = h - e;
                for (i = 0; s > i; i++)
                    for (t = this.datas[i],
                    a = this.customArr.length; a--; )
                        r = this.customArr[a].prop,
                        r && (t[r + "y"] = this.h * (h - t[r]) / l)
            }
        }
        ,
        this.draw = function(t, i) {
            if (this.__iOffsetX = isNaN(i) ? this.__iOffsetX : i,
            this.datas) {
                this.line.clear(!0, this.cfg.PARAM.getHd());
                var a = this.h * this.maxPrice / (this.maxPrice - this.minPrice) - .5;
                this.line.newStyle(this.cfg.COLOR.GRID, !0, 2),
                this.line.moveTo(0, a),
                this.line.lineTo(this.cfg.DIMENSION.w_k, a),
                this.line.stroke();
                for (var r, s = this.datas.length, e = this.cfg.DIMENSION.w_k / Math.max(s, this.cfg.PARAM.minCandleNum), h = this.customArr.length; h--; ) {
                    var l = this.customArr[h].prop + "y";
                    r = this.__iOffsetX - e * Mt,
                    this.line.newStyle(this.customArr[h].color, !0, 1.5);
                    for (var o = 0; s > o; o++)
                        0 == o ? this.line.moveTo(r, this.datas[o][l]) : this.line.lineTo(r, this.datas[o][l]),
                        r += e;
                    this.line.stroke()
                }
                t && this.line.drawBg(this.__iOffsetX)
            }
        }
    }
    function J(i, r) {
        this.DEFAULT_ARR = [{
            v: 26,
            color: "#75B2A3",
            prop: "vr",
            idct: "VR"
        }, {
            v: 6,
            color: "#F8B82E",
            prop: "mavr",
            idct: "MAVR"
        }],
        a.call(this, i, r),
        this.name = "VR",
        "k" != r.type && (this.sname = "T_" + this.name),
        this.vaObj = {
            upper: 200,
            lower: 70,
            glv: 350
        };
        var s = Ot.calcMA
          , e = Ot.calcSUM
          , h = Ot.calcREF
          , l = Ot.getArr
          , o = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            for (var a = this.gdsd(i), r = this.customArr[0].v, n = this.customArr[1].v, c = l(a, this.tkProp.close), f = l(a, "volume"), d = h(c, 1), u = [], A = [], p = [], v = 0, g = c.length; g > v; v++)
                u.push(c[v] > d[v] ? f[v] : 0),
                A.push(c[v] < d[v] ? f[v] : 0),
                p.push(c[v] == d[v] ? f[v] : 0);
            u = e(u, r),
            A = e(A, r),
            p = e(p, r);
            var m = o(o(o(o(u, 2, "*"), p, "+"), 100, "*"), o(o(A, 2, "*"), p, "+"), "/")
              , b = s(m, n);
            this.oriArr = a,
            this.datas ? t.ca(this.datas) : this.datas = [],
            t.ca(this.selfArr);
            for (var w = 0, y = a.length; y > w; w++)
                this.selfArr[w] = {
                    vr: m[w],
                    mavr: b[w]
                },
                this.selfArr[w][Dt] = a[w].volume < 0
        }
    }
    function $(i, r) {
        this.DEFAULT_ARR = [{
            v: 10,
            color: "#3D85C6",
            prop: "wr1",
            idct: "WR1"
        }, {
            v: 6,
            color: "#84C84B",
            prop: "wr2",
            idct: "WR2"
        }],
        a.call(this, i, r),
        this.name = "WR",
        this.vaObj = {
            min: 0,
            max: 100,
            upper: 80,
            lower: 20
        };
        var s = Ot.calcHHV
          , e = Ot.calcLLV
          , h = Ot.getArr
          , l = Ot.operateArr;
        this.initAndCalcAll = function(i) {
            var a = this.customArr
              , r = a[0].v
              , o = a[1].v
              , n = h(i, "close")
              , c = h(i, "high")
              , f = h(i, "low")
              , d = l(l(l(s(c, r), n, "-"), 100, "*"), l(s(c, r), e(f, r), "-"), "/")
              , u = l(l(l(s(c, o), n, "-"), 100, "*"), l(s(c, o), e(f, o), "-"), "/");
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var A = 0, p = i.length; p > A; A++)
                this.selfArr[A] = {
                    wr1: d[A],
                    wr2: u[A]
                }
        }
    }
    function tt(i, r) {
        this.DEFAULT_ARR = [{
            v: 24,
            color: "#fe6623",
            prop: "wvad",
            idct: "WVAD"
        }, {
            v: 6,
            color: "#00c1eb",
            prop: "wvadma",
            idct: "WVADMA"
        }],
        a.call(this, i, r),
        this.name = "WVAD",
        this.vaObj = {
            glv: 0
        };
        var s = Ot.calcSUM
          , e = Ot.calcMA
          , h = Ot.operateArr
          , l = Ot.getArr;
        this.initAndCalcAll = function(i) {
            var a = this.customArr
              , r = a[0].v
              , o = a[1].v
              , n = l(i, "close")
              , c = l(i, "open")
              , f = l(i, "high")
              , d = l(i, "low")
              , u = l(i, "volume")
              , A = h(s(h(h(h(n, c, "-"), h(f, d, "-"), "/"), u, "*"), r), 1e4, "/")
              , p = e(A, o);
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var v = 0, g = i.length; g > v; v++)
                this.selfArr[v] = {
                    wvad: A[v],
                    wvadma: p[v]
                }
        }
    }
    function it(i, r) {
        this.storageVer = "v3",
        a.call(this, i, r, {
            nu: !0
        }),
        this.name = "VOLUME",
        this.alias = "\u6210\u4ea4";
        var s = this
          , e = "volume"
          , h = "MA"
          , l = "#888887";
        !function() {
            var t = function() {
                var t = [{
                    color: l
                }, {
                    v: 5,
                    color: "#FC9CB8"
                }, {
                    v: 10,
                    color: "#12BDD9"
                }];
                pt.save({
                    uid: [s.cfg.uid, (new Date).getTime()].join("|"),
                    key: s.STORAGE_PREFIX + (s.sname || s.name) + "_" + s.storageVer,
                    value: t
                })
            };
            pt.load({
                uid: [s.cfg.uid, (new Date).getTime(), Math.floor(987654321 * Math.random() + 1)].join("|"),
                key: s.STORAGE_PREFIX + (s.sname || s.name) + "_" + s.storageVer
            }, function(i) {
                i || t()
            }, !0)
        }(),
        this.generateSettings = function() {
            var i = s.name.toLowerCase()
              , a = "MA"
              , r = l;
            if (s.customArr = [],
            s.param && s.param.length > 0) {
                r = s.param[0].color || l;
                for (var o = 0, n = s.param.length; n > o; o++) {
                    var c = s.param[o].v;
                    !isNaN(c) && c > 0 && s.customArr.push({
                        v: c,
                        color: s.param[o].color || "#" + t.randomColor(),
                        prop: i + c,
                        idct: a + c,
                        desc: h
                    })
                }
            }
            s.customArr.reverse(),
            s.customArr.push({
                v: 0 / 0,
                color: r,
                prop: e,
                idct: "VOL"
            }),
            s.customArr.reverse()
        }
        ,
        this.initAndCalcAll = function(i) {
            this.oriArr = i,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var a = s.name.toLowerCase(), r = i.length, h = 0, l = this.customArr.length; l > h; h++)
                for (var o, n = 0, c = this.customArr[h].v, f = 0; c && r > f; f++) {
                    var d = i[f];
                    if (n += Number(d[e]),
                    f >= c - 1) {
                        o = n / c;
                        var u = i[f - c + 1];
                        n -= Number(u[e])
                    } else
                        o = n / (f + 1);
                    var A = this.selfArr[f] = this.selfArr[f] || {};
                    A[a + c] = o
                }
        }
        ,
        this.drawCalc = function() {
            if (this.datas) {
                for (var i = this.viewState.start, a = this.viewState.end, r = a - i; this.datas.length > r; )
                    this.datas.length--;
                for (; this.datas.length < r; )
                    this.datas.push({});
                var s, e, h = -Number.MAX_VALUE, l = 0;
                for (s = i; a > s; s++) {
                    e = this.datas[s - i],
                    e.volume = this.oriArr[s].volume,
                    e.volume > h && (h = e.volume);
                    for (var o in this.selfArr[s])
                        this.selfArr[s].hasOwnProperty(o) && (e[o] = this.selfArr[s][o],
                        e[o] > h && (h = e[o]))
                }
                0 > h && (h = 0);
                var n = t.xh5_ADJUST_HIGH_LOW.c(h, l, 0, !0);
                h = n[0];
                var c = h - l;
                for (s = i; a > s; s++) {
                    e = this.datas[s - i];
                    var f = this.oriArr[s];
                    e.date = f.date,
                    e.kke_cs = f.kke_cs,
                    e.voly = ut.vp(f.volume, h, this.h);
                    for (var d = this.customArr.length; d--; ) {
                        var u = this.customArr[d].prop;
                        e[u + "y"] = this.h * (h - e[u]) / c
                    }
                }
                this.labelMaxP = h,
                this.labelMinP = l,
                this.syncI()
            }
        }
        ,
        this.draw = function(t, a) {
            if (this.__iOffsetX = isNaN(a) ? this.__iOffsetX : a,
            this.datas) {
                var r = this.line;
                r.clear(!0, i.PARAM.getHd());
                for (var s, e, h, l, o = this.datas.length, n = i.DIMENSION.w_k / Math.max(o, i.PARAM.minCandleNum), c = this.h, f = .6 * n, d = "hollow" == i.datas.candle, u = 0; 2 > u; u++) {
                    l = 0 == u ? i.COLOR.K_FALL : i.COLOR.K_RISE,
                    s = (Math.floor(n - .5) - f) / 2,
                    r.beginPath();
                    for (var A = 0; o > A; A++)
                        h = this.datas[A],
                        e = h.voly,
                        0 == u ? -1 == h.kke_cs && r.drawVStickRect(s, e, f, c - e, l, !0) : h.kke_cs >= 0 && r.drawVStickRect(s, e, f, c - e, l, !d),
                        s += n;
                    r.stroke()
                }
                for (var p = 1, v = this.customArr.length; v > p; p++) {
                    var g = this.customArr[p].prop + "y";
                    s = this.__iOffsetX - n * Mt,
                    r.newStyle(this.customArr[p].color, !0, 1.3);
                    for (var m = 0; o > m; m++)
                        0 == m ? r.moveTo(s, this.datas[m][g]) : r.lineTo(s, this.datas[m][g]),
                        s += n;
                    r.stroke()
                }
                r.drawBg(this.__iOffsetX)
            }
        }
    }
    function at(i, r) {
        this.storageVer = "v2",
        a.call(this, i, r, {
            nu: !0
        }),
        this.name = "TVOL",
        this.sname = "T_TVOL",
        this.alias = "\u6210\u4ea4";
        var s = this
          , e = "volume"
          , h = "MA"
          , l = "#888887";
        !function() {
            var t = function() {
                var t = [{
                    color: l
                }, {
                    v: 10,
                    color: "#12BDD9"
                }];
                pt.save({
                    uid: [s.cfg.uid, (new Date).getTime()].join("|"),
                    key: s.STORAGE_PREFIX + (s.sname || s.name) + "_" + s.storageVer,
                    value: t
                })
            };
            pt.load({
                uid: [s.cfg.uid, (new Date).getTime(), Math.floor(987654321 * Math.random() + 1)].join("|"),
                key: s.STORAGE_PREFIX + (s.sname || s.name) + "_" + s.storageVer
            }, function(i) {
                i || t()
            }, !0)
        }(),
        this.generateSettings = function() {
            var i = s.name.toLowerCase()
              , a = "MA"
              , r = l;
            if (s.customArr = [],
            s.param && s.param.length > 0) {
                r = s.param[0].color || l;
                for (var o = 0, n = s.param.length; n > o; o++) {
                    var c = s.param[o].v;
                    !isNaN(c) && c > 0 && s.customArr.push({
                        v: c,
                        color: s.param[o].color || "#" + t.randomColor(),
                        prop: i + c,
                        idct: a + c,
                        desc: h
                    })
                }
            }
            s.customArr.reverse(),
            s.customArr.push({
                v: 0 / 0,
                color: r,
                prop: e,
                idct: "VOL"
            }),
            s.customArr.reverse()
        }
        ,
        this.initAndCalcAll = function(i) {
            var a = this.gdsd(i);
            this.oriArr = a,
            !this.datas && (this.datas = []),
            t.ca(this.selfArr);
            for (var r = s.name.toLowerCase(), h = a.length, l = 0, o = this.customArr.length; o > l; l++)
                for (var n, c = 0, f = this.customArr[l].v, d = 0; f && h > d; d++) {
                    var u = a[d];
                    if (c += Number(u[e]),
                    d >= f - 1) {
                        n = c / f;
                        var A = a[d - f + 1];
                        c -= Number(A[e])
                    } else
                        n = c / (d + 1);
                    var p = this.selfArr[d] = this.selfArr[d] || {};
                    p[r + f] = n
                }
        }
        ,
        this.drawCalc = function() {
            if (this.datas) {
                for (var i = this.viewState.start * this.disMod, a = this.viewState.end * this.disMod, r = a - i; this.datas.length > r; )
                    this.datas.length--;
                for (; this.datas.length < r; )
                    this.datas.push({});
                var s, e, h = -Number.MAX_VALUE;
                for (s = i; a > s; s++) {
                    e = this.datas[s - i],
                    e.volume = this.oriArr[s].volume,
                    e.volume > h && (h = e.volume);
                    for (var l in this.selfArr[s])
                        this.selfArr[s].hasOwnProperty(l) && (e[l] = this.selfArr[s][l],
                        e[l] > h && (h = e[l]))
                }
                0 > h && (h = 0);
                var o = t.xh5_ADJUST_HIGH_LOW.c(h, 0, 0, !0);
                h = o[0];
                var n;
                for (s = i; a > s; s++) {
                    e = this.datas[s - i];
                    var c = this.oriArr[s];
                    n = 0 == s ? c.prevclose || c.price : this.oriArr[s - 1].price,
                    e.kke_cs = c.price > n ? 1 : c.price < n ? -1 : 0,
                    e.price = c.price,
                    e.voly = ut.vp(c.volume, h, this.h),
                    this.h - e.voly < .5 && c.volume > 0 && (e.voly = Math.floor(e.voly),
                    e.voly -= 1);
                    for (var f = this.customArr.length; f--; ) {
                        var d = this.customArr[f].prop;
                        e[d + "y"] = this.h * (h - e[d]) / h
                    }
                }
                this.labelMaxP = h,
                this.labelMinP = 0,
                this.syncI()
            }
        }
        ,
        this.draw = function() {
            if (this.datas) {
                var t = this.line;
                t.clear(!0, i.PARAM.getHd());
                for (var a, r, s, e, h = this.datas.length, l = i.DIMENSION.w_t / h, o = this.h, n = l * Nt, c = -1, f = 0; 3 > f; f++) {
                    switch (c) {
                    case -1:
                        e = i.COLOR.T_FALL;
                        break;
                    case 0:
                        e = i.COLOR.T_N;
                        break;
                    case 1:
                        e = i.COLOR.T_RISE
                    }
                    a = 0,
                    t.beginPath();
                    for (var d = 0; h > d; d++)
                        s = this.datas[d],
                        s.volume >= 0 && (r = s.voly,
                        s.kke_cs == c && t.drawVStickC(a, r, n, o - r, e)),
                        a += l;
                    t.stroke(),
                    c++
                }
                for (var u = 1, A = this.customArr.length; A > u; u++) {
                    var p = this.customArr[u].prop + "y";
                    a = n,
                    t.newStyle(this.customArr[u].color, !0, 1.3);
                    for (var v = 0; h > v; v++)
                        s = this.datas[v],
                        s.volume >= 0 && (0 == v ? t.moveTo(a, s[p]) : t.lineTo(a, s[p])),
                        a += l;
                    t.stroke()
                }
                t.drawBg()
            }
        }
    }
    function rt(i) {
        function a() {
            var i = {
                BBIBOLL: h,
                BOLL: n,
                CHIPCOST: d,
                DITC: u,
                EXPMA: N,
                MA: _,
                PRESS: L,
                SAR: j,
                TZY: Z,
                BS: q,
                KYZ: b,
                KYZN: w,
                DPDK: v,
                TBS: y,
                IMT: W,
                HJFZ: D,
                EWI: M,
                RGL: H,
                TECHFLOW: O
            };
            St.auth(i);
            var a = []
              , r = !0
              , e = function() {
                for (; g.length; )
                    g.length--;
                for (var t = a.length; t--; ) {
                    var i = a[t];
                    g.push({
                        name: i.name,
                        param: i.param
                    })
                }
            }
              , l = function(t) {
                if (r) {
                    var i = f.datas.isT ? s.tDb.get() : s.kDb.get();
                    i && (t.initAndCalcAll(i, !1),
                    t.setRange(),
                    t.setPricePos(null),
                    t.draw())
                }
            }
              , o = function(r) {
                if (r) {
                    var s = r.name;
                    if (s) {
                        s = s.toUpperCase();
                        for (var h, o = a.length; o--; )
                            if (a[o].name == s) {
                                h = a[o];
                                break
                            }
                        if (!h) {
                            if (!t.isFunc(i[s]))
                                return;
                            h = new i[s](f,I,l),
                            h.asPChart = !0,
                            a.push(h)
                        }
                        h.newParam(r.param),
                        e(),
                        St.doStc(r)
                    }
                }
            }
              , A = function(t, i) {
                if (t) {
                    var r = t.name;
                    if (r) {
                        r = r.toUpperCase();
                        for (var s = a.length; s--; )
                            if (a[s].name == r) {
                                var h = a.splice(s, 1)[0];
                                return h.rfs(),
                                h.getFromToM.reset(h),
                                !i && e(),
                                void St.doStc(t, !0)
                            }
                    }
                }
            }
              , p = function() {
                for (var t, i = a.length; i--; )
                    t = a[i],
                    t.clearDraw()
            };
            this.linkData = function(t) {
                if (r) {
                    var i = f.datas.isT ? s.tDb.get() : s.kDb.get();
                    if (i)
                        for (var e, h = a.length; h--; )
                            e = a[h],
                            e.initAndCalcAll(i, t),
                            t && e.update()
                }
            }
            ,
            this.setDataRange = function() {
                if (r)
                    for (var t, i = a.length; i--; )
                        t = a[i],
                        t.setRange(),
                        t.selfDataUrl && t.loadUrlData()
            }
            ,
            this.getMaxMin = function() {
                var t = Number.MAX_VALUE
                  , i = -Number.MAX_VALUE
                  , s = !1;
                if (r)
                    for (var e, h = a.length; h--; )
                        e = a[h],
                        e.separate > 0 || isNaN(e.minPrice) || isNaN(e.maxPrice) || (t = Math.min(e.minPrice, t),
                        i = Math.max(e.maxPrice, i),
                        s = !0);
                return s ? [i, t] : !1
            }
            ,
            this.setPricePos = function(t) {
                if (r)
                    for (var i, s = a.length; s--; )
                        i = a[s],
                        i.setPricePos(t)
            }
            ,
            this.allDraw = function(t) {
                if (r)
                    for (var i, s = a.length; s--; )
                        i = a[s],
                        i.draw(!1, t)
            }
            ,
            this.onResize = function() {
                for (var t, i = a.length; i--; )
                    t = a[i],
                    t.resize({
                        h: f.DIMENSION.h_k,
                        mh: f.DIMENSION.H_MA4K
                    }),
                    r && (t.createPlayingData(),
                    t.draw())
            }
            ,
            this.indirectI = function(t, i, s) {
                r || (t = 0 / 0);
                for (var e, h = [], l = a.length; l--; )
                    e = a[l],
                    h.push(e.interact(t, i, s));
                return h
            }
            ,
            this.getLog = function() {
                return g.reverse() || null
            }
            ,
            this.getExistingCharts = function() {
                return a
            }
            ,
            this.clear = function() {
                for (var t = a.length; t--; )
                    A(a[t], !0)
            }
            ,
            this.createChart = function(i, a) {
                !t.isArr(i) && (i = [i]);
                for (var r = 0, s = i.length; s > r; r++)
                    o(i[r]);
                c(!0, a)
            }
            ,
            this.removeChart = function(i) {
                if (!i) {
                    i = [];
                    for (var r = a.length; r--; )
                        i.push({
                            name: a[r].name
                        })
                }
                !t.isArr(i) && (i = [i]);
                for (var s = 0, e = i.length; e > s; s++)
                    A(i[s]);
                c()
            }
            ,
            this.showHide = function(t) {
                var i = t.v;
                r !== i && (r = i,
                r || p())
            }
        }
        var r, s = i.stockData, e = i.iMgr, l = i.titleArea, o = i.chartArea, c = i.cb, f = i.cfg, A = i.type, p = i.usrObj, g = [], m = {
            edit: function(t) {
                r.createChart(t)
            },
            remove: function(t) {
                r.removeChart(t)
            }
        }, S = function(i, a) {
            if (f.custom.allow_indicator_edit)
                if (ht)
                    ht.sendOriginalData({
                        name: i.name,
                        data: i.customArr,
                        defaultData: i.DEFAULT_ARR
                    }, m),
                    t.sudaLog(),
                    ht.show(a);
                else {
                    var r = f.custom.indicatorpanel_url;
                    p.ssl && (r = t.getSUrl(r, !0)),
                    ht = new et({
                        url: r,
                        z: 10001
                    },nt(S, null, i, a))
                }
        }, I = {
            stock: s,
            cbInDC: c,
            onClkTT: S,
            ctn: o,
            titleCtn: l,
            titleW: 0 / 0,
            titleGap: 5,
            style: {
                position: "absolute",
                top: 0
            },
            iMgr: e,
            withHBg: !1,
            mh: f.DIMENSION.H_MA4K,
            lz: f.PARAM.G_Z_INDEX + 1,
            usrObj: p,
            type: A
        };
        return r = new a
    }
    function st(i) {
        function a() {
            var i = {
                ASI: e,
                BBIBOLL: h,
                BIAS: o,
                BOLL: n,
                BRAR: c,
                CCI: f,
                DMA: A,
                DMI: p,
                DPDK: v,
                DPDKS: g,
                EMV: m,
                EXPMA: N,
                KDJ: S,
                KFLOW: I,
                KKFLOW: T,
                KGSTRADE: k,
                SUNSPOT: x,
                MA: _,
                MACD: P,
                OBV: R,
                PKFLOW: E,
                PSY: F,
                ROC: B,
                RSI: X,
                SAR: j,
                TRIX: K,
                TZY: Z,
                TZYS: Q,
                VR: J,
                VOLUME: it,
                WR: $,
                WVAD: tt,
                TOR: G,
                ADL: s,
                LB: C,
                POSITION: U,
                TFLOW: z,
                TTFLOW: Y,
                TVOL: at,
                TTOPTRADE: V,
                BLANKCTN: r
            };
            St.auth(i);
            var a;
            lt = [];
            var l = function() {
                for (; H.length; )
                    H.length--;
                for (var t = lt.length; t--; ) {
                    var i = lt[t];
                    H.push({
                        name: i.name,
                        param: i.param
                    })
                }
            }
              , d = function(t) {
                var i = M.datas.isT ? u.tDb.get() : u.kDb.get();
                i && (t.initAndCalcAll(i),
                t.drawCalc(),
                t.draw(!0))
            }
              , b = function(t) {
                for (var i, a = lt.length; a--; )
                    if (lt[a].name == t) {
                        i = lt[a];
                        break
                    }
                return i
            }
              , D = function(s) {
                if (s) {
                    var e = s.name;
                    if (e) {
                        e = e.toUpperCase(),
                        "BLANKCTN" != e && (st = e);
                        var h = b(e);
                        if (!h) {
                            var o = i[e];
                            if (!t.isFunc(o))
                                return;
                            o === r && a ? (h = a,
                            h.wrap.style.display = "") : (h = new o(M,At,d),
                            o === r && (a = h)),
                            lt.push(h),
                            w.appendChild(h.wrap)
                        }
                        h.newParam(s.param),
                        l(),
                        St.doStc(s)
                    }
                }
            }
              , O = function(t, i) {
                if (t) {
                    var a = t.name;
                    if (a) {
                        a = a.toUpperCase();
                        for (var r = lt.length; r--; )
                            if (lt[r].name == a) {
                                var s = lt.splice(r, 1)[0];
                                return s.rfs(),
                                s.getFromToM.reset(s),
                                !i && l(),
                                void St.doStc(t, !0)
                            }
                    }
                }
            };
            this.linkData = function(t) {
                var i = M.datas.isT ? u.tDb.get() : u.kDb.get();
                if (i)
                    for (var a, r = lt.length; r--; )
                        a = lt[r],
                        a.initAndCalcAll(i),
                        t && a.update()
            }
            ,
            this.setDataRange = function() {
                for (var t, i = lt.length; i--; )
                    t = lt[i],
                    t.drawCalc(),
                    t.selfDataUrl && t.loadUrlData()
            }
            ,
            this.allDraw = function(t) {
                for (var i, a = lt.length; a--; )
                    i = lt[a],
                    i.draw(!0, t)
            }
            ,
            this.onResize = function(t) {
                for (var i, a, r = lt.length; r--; )
                    a = lt[r],
                    i = t ? M.DIMENSION.H_T_G : a.h,
                    a.resize({
                        h: i,
                        eh: M.DIMENSION.H_T_B
                    }),
                    a.drawCalc(),
                    a.draw(!0)
            }
            ,
            this.indirectI = function(t, i, a) {
                for (var r, s = lt.length; s--; )
                    r = lt[s],
                    r.interact(t, i, a)
            }
            ,
            this.getLog = function() {
                return H.reverse() || null
            }
            ,
            this.getExistingCharts = function() {
                return lt
            }
            ,
            this.clear = function() {
                for (var t = lt.length; t--; )
                    O(lt[t], !0)
            }
            ,
            this.createChart = function(i, a) {
                !t.isArr(i) && (i = [i]);
                for (var r = 0, s = i.length; s > r; r++)
                    D(i[r]);
                y(!0, a, i)
            }
            ,
            this.removeChart = function(i) {
                if (!i) {
                    i = [];
                    for (var a = lt.length; a--; )
                        i.push({
                            name: lt[a].name
                        })
                }
                !t.isArr(i) && (i = [i]);
                for (var r = 0, s = i.length; s > r; r++)
                    O(i[r]);
                y(!0)
            }
        }
        var l, d, u = i.stockData, b = i.iMgr, w = i.subArea, y = i.cb, D = i.type, M = i.cfg, O = i.usrObj, L = i.initMgr, H = [], W = function(i, a, r, s, e) {
            if (!t.$CONTAINS(a, b.iHLineO.body) && a.appendChild(b.iHLineO.body),
            i.datas) {
                var h = i.labelMaxP - s / i.h * (i.labelMaxP - i.labelMinP);
                if (i.nu) {
                    var l = t.strUtil.nu(i.labelMaxP);
                    h /= l[0]
                }
                b.iToD({
                    mark: h,
                    x: r,
                    y: s,
                    ox: M.DIMENSION.posX,
                    oy: M.DIMENSION.H_T_T,
                    e: e
                })
            }
        };
        switch (D) {
        case "t":
            var q = O.tchartobject.t;
            d = q || bt;
            break;
        case "p":
            d = ["LB", "POSITION", "TVOL", "MACD"];
            break;
        default:
            var rt = O.tchartobject.k;
            d = rt || mt
        }
        var st, lt, ot, ct = "BLANKCTN", ft = function() {
            if (M.custom.tchart_tap && lt && st) {
                var t = lt.length;
                if (!(t > 2)) {
                    for (var i = t; i--; )
                        if (ct == String(lt[i].name)) {
                            ot = i;
                            break
                        }
                    if ("undefined" != typeof ot || 2 != t) {
                        var a = d.length;
                        for (i = a; i--; )
                            if (st == d[i]) {
                                l.removeChart(),
                                ++i >= a && (i = 0);
                                var r = d[i];
                                l.createChart(1 == t ? {
                                    name: r
                                } : 0 == ot ? [{
                                    name: ct
                                }, {
                                    name: r
                                }] : [{
                                    name: r
                                }, {
                                    name: ct
                                }]);
                                break
                            }
                    }
                }
            }
        }, dt = {
            edit: function(t) {
                l.createChart(t)
            },
            remove: function(t) {
                l.removeChart(t)
            }
        }, ut = function(i, a) {
            if (M.custom.allow_indicator_edit)
                if (ht)
                    ht.sendOriginalData({
                        name: i.name,
                        data: i.customArr,
                        defaultData: i.DEFAULT_ARR
                    }, dt),
                    ht.show(a),
                    t.sudaLog();
                else {
                    var r = M.custom.indicatorpanel_url;
                    O.ssl && (r = t.getSUrl(r, !0)),
                    ht = new et({
                        url: r,
                        z: 10001
                    },nt(ut, null, i, a))
                }
        }, At = {
            fixIdctW: !0,
            stock: u,
            iTo: W,
            iMgr: b,
            onClkTT: ut,
            h: M.DIMENSION.H_T_G,
            eh: M.DIMENSION.H_T_B,
            withHBg: !0,
            onClkMain: ft,
            usrObj: O,
            type: D,
            initMgr: L
        };
        return l = new a
    }
    function et(i, a) {
        function r(t, i) {
            for (var a in t)
                t.hasOwnProperty(a) && (t[a] = i + t[a])
        }
        var s = "sinafinancehtml5indicatorscfgpanel"
          , e = "sinatkchart_indicatorscfgpanel~"
          , h = {
            LOADED: "loaded",
            HIDE: "hide",
            REMOVE: "remove",
            EDIT: "edit",
            DRAGSTART: "dragstart",
            DRAGGING: "dragging",
            PICKCOLOR: "pickcolor",
            COLORPICKED: "colorpicked",
            OPEN: "open"
        };
        r(h, e);
        var l, o, n, c, f = 250, d = 0, u = 80, A = 35, p = 25;
        vt && (vt.onok = function(t, i) {
            l && l.contentWindow && l.contentWindow.postMessage(JSON.stringify({
                cmd: h.COLORPICKED,
                data: {
                    color: t.hex,
                    target: i
                }
            }), "*")
        }
        );
        var v = function(t) {
            var i;
            try {
                i = JSON.parse(t.data)
            } catch (t) {}
            if (i && i.cmd)
                switch (i.cmd) {
                case h.LOADED:
                    a && a();
                    break;
                case h.HIDE:
                    l.style.display = "none",
                    vt && vt.hide();
                    break;
                case h.REMOVE:
                case h.EDIT:
                    var r = i.cmd.split("~")[1];
                    o[r](i.data),
                    vt && vt.hide();
                    break;
                case h.DRAGSTART:
                    n = +l.style.left.replace(/[^0-9.]/g, ""),
                    c = +l.style.top.replace(/[^0-9.]/g, "");
                    break;
                case h.DRAGGING:
                    var s = i.data;
                    l.style.left = n + s.movedX + "px",
                    l.style.top = c + s.movedY + "px";
                    break;
                case h.PICKCOLOR:
                    s = i.data,
                    vt && vt.show(+s.x + +l.style.left.replace(/[^0-9.]/g, ""), +s.y + +l.style.top.replace(/[^0-9.]/g, ""), s.target, s.color)
                }
        }
          , g = function() {
            l || (l = t.iframer({
                attribute: {
                    id: s,
                    src: i.url
                },
                style: {
                    margin: "0 auto",
                    width: f + "px",
                    border: "1px solid #aaa",
                    position: "absolute",
                    zIndex: i.z
                }
            }),
            ct.addHandler(window, "message", v))
        };
        this.sendOriginalData = function(i, a) {
            if (l) {
                o = a;
                var r = Math.min(i.data.length || 1, 5);
                switch (d = u + A * r,
                i.name) {
                case "MA":
                case "VOLUME":
                case "TVOL":
                case "EXPMA":
                    d += p
                }
                l.style.height = d + "px",
                l.contentWindow && l.contentWindow.postMessage(JSON.stringify({
                    cmd: h.OPEN,
                    data: i
                }), "*"),
                t.stc(["inc", i.name].join("_"))
            }
        }
        ,
        this.show = function(i) {
            if (l) {
                var a, r;
                i.changedTouches ? (a = i.changedTouches[0].clientX,
                r = i.changedTouches[0].clientY) : (a = i.clientX,
                r = i.clientY);
                var s = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight
                  , e = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
                r + d + 30 > s && (r = Math.max(s - d - 30, 1)),
                a + f + 3 > e && (a = 28),
                l.style.left = a + "px",
                l.style.top = (document.body.scrollTop ? document.body.scrollTop : document.documentElement.scrollTop) + r + "px",
                l.style.display = "",
                t.suda("show_indicator_param")
            }
        }
        ,
        g()
    }
    var ht, lt = t.oc, ot = t.$C, nt = t.fBind, ct = t.xh5_EvtUtil, ft = i.xh5_ibPainter, dt = i.xh5_Canvas, ut = t.xh5_PosUtil, At = t.dateUtil, pt = t.bridge, vt = t.colorPicker, gt = t.HQ_DOMAIN, mt = ["VOLUME", "MACD", "KDJ", "RSI", "BOLL", "WR", "BBIBOLL", "SAR", "DMI", "EMV", "ROC", "PSY", "OBV", "WVAD", "CCI", "TRIX", "DMA", "EXPMA", "BIAS", "ASI", "VR", "BRAR"], bt = ["TVOL", "LB", "MACD", "BOLL", "RSI", "BBIBOLL", "ROC", "TRIX", "DMA", "EXPMA", "BIAS", "VR"], wt = {}, yt = "ignore_", Dt = yt + "istpre", Mt = .4, Nt = .5;
    a.prototype = {
        storageVer: "v1",
        STORAGE_PREFIX: "sinatkchart_indicators~",
        loadGlobalSetting: function() {
            var t = this;
            pt.load({
                uid: [this.cfg.uid, (new Date).getTime(), Math.floor(987654321 * Math.random() + 1)].join("|"),
                key: this.STORAGE_PREFIX + (this.sname || this.name) + "_" + this.storageVer
            }, function(i) {
                if (i) {
                    var a;
                    try {
                        a = JSON.parse(i)
                    } catch (r) {}
                    a && t.newParam(a, !0)
                }
            }, !0)
        },
        saveGlobalSetting: function(t) {
            pt.save({
                uid: [this.cfg.uid, (new Date).getTime()].join("|"),
                key: this.STORAGE_PREFIX + (this.sname || this.name) + "_" + this.storageVer,
                value: t
            })
        },
        gdsd: function(t) {
            var i;
            if ("k" === this.proxyCfg.type)
                this.disMod = 1,
                this.tkProp.close = "close",
                i = t;
            else {
                this.disMod = this.cfg.datas.tDataLen,
                this.tkProp.close = "price",
                i = [];
                for (var a = 0, r = t.length; r > a; a++)
                    i = i.concat(t[a])
            }
            return i
        }
    },
    a.prototype.mr = function() {
        function i(t) {
            var i = s.h - t;
            if (i >= 0) {
                var a = "t" === s.proxyCfg.type ? s.cfg.DIMENSION.h_t : s.cfg.DIMENSION.h_k;
                if (1 > a + t)
                    return;
                s.h = i,
                e(t)
            }
        }
        function a() {
            var t = ot("span");
            return t.style.display = "block",
            t.style.cursor = "row-resize",
            t.style.borderTop = "2px dotted #000",
            t.style.borderBottom = "2px dotted #000",
            t.style.width = "77px",
            t.style.height = "2px",
            t
        }
        var r, s = this, e = this.proxyCfg.initMgr.innerResize, h = .1, l = 40, o = void 0, n = function(t) {
            ct.preventDefault(t);
            var a = t.changedTouches ? t.changedTouches[0].pageY : t.pageY;
            isNaN(a) && (a = t.offsetY);
            var s = a - r;
            r = a,
            s && i(s)
        }, c = function() {
            ct.removeHandler(window, "mousemove", n),
            ct.removeHandler(window, "mouseup", c),
            ct.removeHandler(o, "touchmove", n),
            ct.removeHandler(o, "touchend", c),
            t.suda("indicator_reheight")
        }, f = function(i) {
            r = isNaN(i.pageY) ? i.offsetY : i.pageY,
            t.xh5_deviceUtil.istd ? (ct.addHandler(o, "touchend", c),
            ct.addHandler(o, "touchmove", n)) : (ct.addHandler(window, "mouseup", c),
            ct.addHandler(window, "mousemove", n),
            t.xh5_deviceUtil.allowt && (ct.addHandler(o, "touchend", c),
            ct.addHandler(o, "touchmove", n)))
        }, d = function() {
            o = ot("div"),
            o.style.position = "absolute",
            o.style.right = s.cfg.DIMENSION.K_RIGHT_W + l + "px",
            o.style.color = "#000",
            o.style.opacity = h,
            o.style.zIndex = s.cfg.PARAM.I_Z_INDEX + 2,
            o.style.paddingTop = "3px",
            t.xh5_deviceUtil.istd ? ct.addHandler(o, "touchstart", f) : (ct.addHandler(o, "mousedown", f),
            t.xh5_deviceUtil.allowt && ct.addHandler(o, "touchstart", f),
            ct.addHandler(o, "mouseover", function() {
                o.style.opacity = 1
            }),
            ct.addHandler(o, "mouseout", function() {
                o.style.opacity = h
            }))
        }, u = function() {
            var t = new a;
            o.appendChild(t)
        };
        return d(),
        u(),
        o
    }
    ,
    a.prototype.rab = function() {
        function i(t) {
            var i = r.wrap
              , a = r.wrap.parentNode
              , s = n(i, t);
            s && ("-1" == t ? a.insertBefore(i, s) : a.insertBefore(s, i))
        }
        function a(t) {
            var i = ot("span");
            return i.style.marginLeft = r.cfg.DIMENSION.K_RIGHT_W + "px",
            i.style.cursor = "pointer",
            i.innerHTML = t ? "\u25b2" : "\u25bc",
            i.setAttribute("data-dir", t ? "-1" : "1"),
            i
        }
        var r = this
          , s = .1
          , e = void 0
          , h = function(t) {
            ct.preventDefault(t);
            var a = t.target;
            if (a) {
                var r = a.getAttribute("data-dir");
                null !== r && i(r)
            }
        }
          , l = function() {
            e = ot("div"),
            e.style.position = "absolute",
            e.style.right = r.cfg.DIMENSION.K_RIGHT_W + "px",
            e.style.color = "#000",
            e.style.opacity = s,
            e.style.zIndex = r.cfg.PARAM.I_Z_INDEX + 2,
            t.xh5_deviceUtil.istd ? ct.addHandler(e, "touchend", h) : (ct.addHandler(e, "click", h),
            t.xh5_deviceUtil.allowt && ct.addHandler(e, "touchend", h),
            ct.addHandler(e, "mouseover", function() {
                e.style.opacity = 1
            }),
            ct.addHandler(e, "mouseout", function() {
                e.style.opacity = s
            }))
        }
          , o = function() {
            var t = new a(!0)
              , i = new a;
            e.appendChild(t),
            e.appendChild(i)
        }
          , n = function(t, i) {
            var a;
            return a = -1 == i ? t.previousSibling : t.nextSibling,
            a && 0 == a.id.indexOf("blankctn_") && (a = null),
            a
        };
        return l(),
        o(),
        e
    }
    ,
    a.prototype.ic = function(i) {
        var a = this.proxyCfg.iTo;
        this.h = isNaN(i.h) ? this.cfg.DIMENSION.h_k : i.h,
        this.customArr = t.clone(this.DEFAULT_ARR, null),
        this.wrap = ot("div"),
        this.selfCfg.ctnId && (this.wrap.id = this.selfCfg.ctnId),
        this.wrap.style.fontSize = this.wrap.style.lineHeight = this.cfg.STYLE.FONT_SIZE + "px";
        for (var r in this.proxyCfg.style)
            this.proxyCfg.style.hasOwnProperty(r) && (this.wrap.style[r] = this.proxyCfg.style[r]);
        if (this.proxyCfg.titleCtn)
            this.titleCtn = this.proxyCfg.titleCtn;
        else if (!this.isBlank) {
            this.titleCtn = ot("div"),
            this.titleCtn.style.position = "absolute",
            this.titleCtn.style.zIndex = this.cfg.PARAM.I_Z_INDEX + 1;
            var s = this;
            if (ct.addHandler(this.titleCtn, "touchstart", function(t) {
                s.cfg.custom.touch_prevent && ct.preventDefault(t)
            }),
            this.titleCtn.style.width = "100%",
            !this.cfg.PARAM.isFlash) {
                if (this.cfg.custom.indicator_reorder) {
                    var e = this.rab();
                    this.titleCtn.appendChild(e)
                }
                if (this.cfg.custom.indicator_reheight) {
                    var h = this.mr();
                    this.titleCtn.appendChild(h)
                }
            }
            this.wrap.appendChild(this.titleCtn)
        }
        this.isBlank ? this.wrap.style.height = this.h + "px" : (this.line = new ft({
            setting: this.cfg,
            sd: this,
            withHBg: this.proxyCfg.withHBg,
            reO: {
                h: this.h,
                mh: this.mh,
                eh: this.eh
            },
            nu: this.nu,
            dt: !1,
            iMgr: this.proxyCfg.iMgr,
            iTo: nt(a, null, this),
            iClk: this.proxyCfg.onClkMain
        }),
        !isNaN(this.proxyCfg.lz) && (this.line.getCanvas().style.zIndex = this.proxyCfg.lz),
        this.wrap.appendChild(this.line.getWrap())),
        this.proxyCfg.ctn && this.proxyCfg.ctn.appendChild(this.wrap)
    }
    ,
    a.prototype.initAndCalcAll = function() {}
    ,
    a.prototype.resize = function(t) {
        this.h = t.h,
        this.mh = t.mh,
        this.eh = t.eh,
        this.line && this.line.resize({
            h: this.h,
            mh: this.mh,
            eh: this.eh
        })
    }
    ,
    a.prototype.getFromToM = new function() {
        this.reset = function(t) {
            var i = t.loadedFlag;
            if (i)
                for (var a in i)
                    i.hasOwnProperty(a) && (i[a] = null,
                    delete i[a]);
            t.loadedFromTo = void 0
        }
        ,
        this.get = function(t) {
            if (!t.viewState.startDate || !t.viewState.endDate)
                return !1;
            var i = t.loadedFlag
              , a = t.loadedFromTo
              , r = 1989
              , s = 2099;
            if (a) {
                if (r >= a[0])
                    return;
                s = a[0]
            }
            t.loadedFromTo = [r, s];
            var e = i["_" + r]
              , h = i["_" + s];
            if (e && h)
                return !1;
            for (h ? s -= 1 : e && (r += 1),
            e = [r, "01", "01"].join("-"),
            h = [s, "12", "31"].join("-"); s >= r; )
                i["_" + r++] = !0;
            return [e, h]
        }
    }
    ,
    a.prototype.loadUrlData = function() {
        var i = this.getFromToM.get(this);
        if (i) {
            var a = i[0]
              , r = i[1]
              , s = this.aliasymbol || this.symbol
              , e = "_" + s + "_" + (new Date).getDate()
              , h = this.selfDataUrl.replace("$symbol", s).replace("$cb", "var%20" + e + "=").replace("$from", a).replace("$to", r);
            this.proxyCfg.usrObj.ssl && (h = t.getSUrl(h, !0));
            var l = this;
            t.load(h, function() {
                var i = window[e];
                window[e] = null,
                l.urlData || (l.urlData = {
                    day: [],
                    week: [],
                    month: []
                });
                var a = l.df(i)
                  , r = l.urlData.day;
                if (r.length > 1) {
                    for (var s = r[0].date, h = a.length; h-- && !(a[h].date.getFullYear() == s.getFullYear() && a[h].date.getMonth() == s.getMonth() && a[h].date.getDate() < s.getDate()); )
                        ;
                    a.splice(h + 1, a.length - h - 1)
                }
                r.splice.apply(r, [0, 0].concat(a));
                var o, n, c = [], f = [], d = r.length, u = r[0], A = {}, p = {}, v = {};
                for (o = l.customArr.length; o--; )
                    v[l.customArr[o].prop] = void 0;
                v.date = void 0;
                for (n in v)
                    v.hasOwnProperty(n) && (t.isDate(u[n]) ? (A[n] = u[n],
                    p[n] = u[n]) : (A[n] = 1 * u[n],
                    p[n] = 1 * u[n]));
                if (1 == d)
                    c.push(A),
                    f.push(p);
                else {
                    for (o = 1; d > o; o++) {
                        u = r[o],
                        At.gw(r[o - 1].date, u.date) || (c.push(A),
                        A = {});
                        for (n in v)
                            v.hasOwnProperty(n) && (A[n] = t.isDate(u[n]) ? u[n] : (1 * A[n] || 0) + 1 * u[n]);
                        At.gm(r[o - 1].date, u.date) || (f.push(p),
                        p = {});
                        for (n in v)
                            v.hasOwnProperty(n) && (p[n] = t.isDate(u[n]) ? u[n] : (1 * p[n] || 0) + 1 * u[n])
                    }
                    c.push(A),
                    f.push(p)
                }
                l.urlData.week = c,
                l.urlData.month = f,
                l.toReCalc = !0,
                l.cb(l)
            })
        }
    }
    ,
    a.prototype.newData = function(t, i, a) {
        if (t && !(t.length < 1)) {
            var r = t[t.length - 1];
            if (168 == a && At.gw(r.date, i.date) || 720 == a && At.gm(r.date, i.date))
                return void (r.date = i.date);
            for (var s, e = {}, h = this.customArr.length; h--; )
                s = this.customArr[h].prop,
                e[s] = i[s] || 0;
            e.date = i.date,
            t.push(e)
        }
    }
    ,
    a.prototype.updateData = function(i, a, r, s) {
        if (a && !(a.length < 1)) {
            var e = a[a.length - 1];
            if (s) {
                if (!At.stbd(e.date, i.date))
                    return i.date > e.date ? void this.newData(a, i, r) : void 0;
                if (!t.kUtil.spk(e.time, i.time, "00:00", r))
                    return void this.newData(a, i, r)
            } else if (!At.stbd(i.date, e.date))
                return i.date > e.date ? void this.newData(a, i, r) : void 0;
            e = a[a.length - 1];
            for (var h, l = this.customArr.length; l--; ) {
                h = this.customArr[l].prop;
                var o = Number(i[h]);
                if (t.isNum(i[h]))
                    switch (r) {
                    case 167:
                    case 168:
                    case 169:
                    case 719:
                    case 720:
                    case 721:
                        e[h] += i[h + "update"] || 0;
                        break;
                    default:
                        e[h] = o
                    }
            }
        }
    }
    ,
    a.prototype.doUpdate = function(t) {
        t && this.urlData && (this.urlData.day && this.updateData(t, this.urlData.day, 24),
        this.urlData.week && this.updateData(t, this.urlData.week, 168),
        this.urlData.month && this.updateData(t, this.urlData.month, 720),
        this.toReCalc = !0,
        this.cb(this))
    }
    ,
    a.prototype.udf = function(t) {
        return t
    }
    ,
    a.prototype.update = function() {
        if (this.selfDataUrlUpdate && !(++this.updateCount < this.UPDATE_THRESHOLD)) {
            this.updateCount >= this.UPDATE_THRESHOLD && (this.updateCount = 0);
            var i = At.ddt(this.viewState.startDate).getFullYear()
              , a = At.ddt(this.viewState.endDate).getFullYear()
              , r = [i, 1, 1].join("-")
              , s = [a, 12, 31].join("-")
              , e = this.aliasymbol || this.symbol
              , h = "_" + e + (new Date).getTime()
              , l = this.selfDataUrlUpdate.replace("$symbol", e).replace("$cb", "var%20" + h + "=").replace("$from", r).replace("$to", s);
            this.proxyCfg.usrObj.ssl && (l = t.getSUrl(l, !0));
            var o = this;
            t.load(l, function() {
                var t = window[h];
                window[h] = null;
                var i = o.udf(t);
                i && o.doUpdate(i)
            })
        }
    }
    ,
    a.prototype.createPlayingData = function() {
        if (this.datas)
            for (var t, i = this.labelMaxP - this.labelMinP, a = 0, r = this.datas.length; r > a; a++) {
                t = this.datas[a];
                for (var s = this.customArr.length; s--; ) {
                    var e = this.customArr[s].prop;
                    t[e + "y"] = this.h * (this.labelMaxP - t[e]) / i
                }
            }
    }
    ,
    a.prototype.setPricePos = function(t) {
        !t || this.separate > 0 ? (this.labelMinP = this.minPrice,
        this.labelMaxP = this.maxPrice) : (this.labelMaxP = t[0],
        this.labelMinP = t[1],
        this.pricePosArr = t),
        this.createPlayingData()
    }
    ,
    a.prototype.generateSettings = function() {
        if (this.param && this.param.length > 0)
            for (var i = 0, a = Math.min(this.param.length, this.DEFAULT_ARR.length); a > i; i++) {
                var r = this.param[i]
                  , s = Number(r.v);
                this.customArr[i].v = s > 0 ? s : this.DEFAULT_ARR[i].v,
                this.customArr[i].color = t.isColor(r.color) ? r.color : this.DEFAULT_ARR[i].color
            }
    }
    ,
    a.prototype.newParam = function(i, a) {
        var r = this.sname || this.name
          , s = !1;
        if (i ? (wt[r] = i,
        t.stc("np_" + r, i)) : (s = !0,
        i = wt[r]),
        this.param = i,
        this.generateSettings(),
        this.genIndicator(this.customArr, this.asPChart ? "" : this.alias || this.name),
        a) {
            var e = this.cfg.datas.isT ? this.proxyCfg.stock.tDb.get() : this.proxyCfg.stock.kDb.get();
            return void (e && (this.initAndCalcAll(e),
            this.asPChart ? this.setPricePos(this.pricePosArr) : this.drawCalc(),
            this.draw(!0)))
        }
        if (this.cfg.custom.storage_lv > 0)
            if (i) {
                if (s)
                    return;
                this.cfg.custom.storage_lv > 1 && this.saveGlobalSetting(i)
            } else
                this.loadGlobalSetting()
    }
    ,
    a.prototype.syncI = function() {
        if (this.datas && this.proxyCfg.iMgr)
            if (this.proxyCfg.iMgr.isIng())
                this.proxyCfg.iMgr.isMoving() && this.indicatorI(this.datas[this.datas.length - 1]);
            else if ("t" != this.proxyCfg.type)
                this.indicatorI(this.datas[this.datas.length - 1]);
            else if (this.proxyCfg.stock)
                if (5 == this.proxyCfg.stock.viewState.end) {
                    var t;
                    t = this.proxyCfg.stock.realLen >= 0 ? this.proxyCfg.stock.realLen >= this.disMod ? 0 == this.proxyCfg.stock.realLen ? 0 : this.proxyCfg.stock.realLen - 1 : this.proxyCfg.stock.realLen : this.disMod - 1,
                    4 != this.proxyCfg.stock.viewState.start && (t = (this.proxyCfg.stock.viewState.end - this.proxyCfg.stock.viewState.start - 1) * this.disMod + t),
                    this.indicatorI(this.datas[t])
                } else
                    this.indicatorI(this.datas[this.datas.length - 1])
    }
    ,
    a.prototype.setRange = function() {
        if (this.datas) {
            for (var t = this.viewState.start * this.disMod, i = this.viewState.end * this.disMod, a = i - t; this.datas.length > a; )
                this.datas.length--;
            for (; this.datas.length < a; )
                this.datas.push({});
            for (var r = Number.MAX_VALUE, s = -Number.MAX_VALUE, e = t; i > e; e++) {
                var h = this.datas[e - t];
                if (h.date = this.oriArr[e].date,
                !this.selfArr[e] || !this.selfArr[e][Dt])
                    for (var l in this.selfArr[e])
                        if (this.selfArr[e].hasOwnProperty(l)) {
                            if (h[l] = this.selfArr[e][l],
                            0 == l.indexOf(yt))
                                continue;
                            h[l] > s && (s = h[l]),
                            h[l] < r && (r = h[l])
                        }
            }
            this.minPrice = r,
            this.maxPrice = s,
            this.syncI()
        }
    }
    ,
    a.prototype.drawCalc = function() {
        if (this.datas) {
            for (var t = this.viewState.start * this.disMod, i = this.viewState.end * this.disMod, a = i - t; this.datas.length > a; )
                this.datas.length--;
            for (; this.datas.length < a; )
                this.datas.push({});
            var r, s, e = Number.MAX_VALUE, h = -Number.MAX_VALUE;
            for (r = t; i > r; r++)
                if (s = this.datas[r - t],
                s.date = this.oriArr[r].date,
                !this.selfArr[r] || !this.selfArr[r][Dt])
                    for (var l in this.selfArr[r])
                        if (this.selfArr[r].hasOwnProperty(l)) {
                            if (s[l] = this.selfArr[r][l],
                            0 == l.indexOf(yt))
                                continue;
                            s[l] > h && (h = s[l]),
                            s[l] < e && (e = s[l])
                        }
            switch (this.name) {
            case "ADL":
            case "MACD":
                h = Math.max(Math.abs(h), Math.abs(e)),
                e = -h;
                break;
            case "BIAS":
            case "BRAR":
            case "DMA":
            case "EMV":
            case "KDJ":
            case "ROC":
            case "VR":
            case "WVAD":
                this.vaObj.min = e,
                this.vaObj.max = h;
                break;
            case "CCI":
                e > 0 && (e = 0),
                0 > h && (h = 0),
                this.vaObj.min = e,
                this.vaObj.max = h;
                break;
            case "TOR":
                e = 0;
                break;
            default:
                this.vaObj && (h = this.vaObj.max,
                e = this.vaObj.min)
            }
            this.labelMaxP = h,
            this.labelMinP = e;
            var o = h - e;
            for (r = 0; a > r; r++) {
                s = this.datas[r];
                for (var n = this.customArr.length; n--; ) {
                    var c = this.customArr[n].prop;
                    s[c + "y"] = this.h * (h - s[c]) / (o || 1)
                }
            }
            this.syncI()
        }
    }
    ,
    a.prototype.clearDraw = function() {
        this.line.clear(!1),
        this.interact(0 / 0)
    }
    ,
    a.prototype.draw = function(t, i) {
        if (this.__iOffsetX = isNaN(i) ? this.__iOffsetX : i,
        this.datas) {
            this.line.clear(!0, this.cfg.PARAM.getHd());
            var a, r, s = this.datas.length;
            this.cfg.datas.isT ? (a = this.cfg.DIMENSION.w_t / s,
            r = a * Nt) : (a = this.cfg.DIMENSION.w_k / Math.max(s, this.cfg.PARAM.minCandleNum),
            r = this.__iOffsetX - a * Mt);
            for (var e, h = this.customArr.length; h--; ) {
                var l = this.customArr[h].prop + "y";
                e = r,
                this.line.newStyle(this.customArr[h].color, !0, this.lw);
                for (var o = 0; s > o; o++)
                    0 == o ? this.line.moveTo(e, this.datas[o][l]) : this.line.lineTo(e, this.datas[o][l]),
                    e += a;
                this.line.stroke()
            }
            t && this.line.drawBg(this.__iOffsetX),
            this.vaObj && this.drawValueRange()
        }
    }
    ,
    a.prototype.drawValueRange = function() {
        var i = this.line.getG();
        i.globalCompositeOperation = "destination-over";
        var a = this.vaObj.min
          , r = this.vaObj.max
          , s = r - a;
        if (!isNaN(this.vaObj.upper) && !isNaN(this.vaObj.lower)) {
            var e = this.vaObj.upper
              , h = this.vaObj.lower
              , l = this.h * (r - e) / s
              , o = this.h * (r - h) / s
              , n = o - l;
            i.fillStyle = t.hex2dec(this.customArr[0].color, .2),
            i.fillRect(0, l, this.cfg.DIMENSION.w_k, n)
        }
        var c = this.h * (isNaN(this.vaObj.glv) ? r / 2 : r - this.vaObj.glv) / s;
        c += .5,
        this.line.newStyle(this.cfg.COLOR.GRID, !0, 1),
        this.line.moveTo(0, c),
        this.line.lineTo(this.cfg.DIMENSION.w_k, c),
        i.stroke()
    }
    ,
    a.prototype.genIdctParam = function(t) {
        t = t || {};
        var i = isNaN(t.width) ? this.proxyCfg.titleW || this.cfg.DIMENSION.getStageW() : t.width
          , a = isNaN(t.height) ? this.cfg.DIMENSION.H_T_T || 14 : t.height;
        return {
            hd: this.cfg.PARAM.getHd(),
            width: i,
            height: a
        }
    }
    ,
    a.prototype.genTitleCanvas = function(i) {
        function a() {
            var a = new dt
              , r = a.g
              , l = s.cfg.datas.isT;
            if (this.canvas = a.canvas,
            t.isFunc(s.proxyCfg.onClkTT)) {
                var o = t.xh5_deviceUtil.istd ? "touchend" : "click";
                ct.addHandler(this.canvas, o, nt(s.proxyCfg.onClkTT, null, s));
                var n = this.canvas.style;
                n.cursor = "pointer",
                n.position = "relative",
                n.zIndex = s.cfg.PARAM.I_Z_INDEX + 1
            }
            var c = function(t, i) {
                a.resize(s.genIdctParam({
                    width: t,
                    height: i
                })),
                r.font = s.cfg.STYLE.FONT_SIZE + "px " + s.cfg.STYLE.FONT_FAMILY,
                r.textBaseline = "top"
            }
              , f = 9
              , d = 13
              , u = 2;
            this.setTxt = function(a) {
                var o = s.cfg.DIMENSION.posX
                  , n = l ? s.cfg.DIMENSION.w_t : s.cfg.DIMENSION.w_k
                  , A = s.cfg.DIMENSION.extend_draw
                  , p = r.measureText(i).width
                  , v = s.cfg.DIMENSION.getStageW()
                  , g = .35 * v
                  , m = "TFLOW" == s.name && 400 > n ? 55 : 80
                  , b = s.cfg.DIMENSION.H_T_T;
                u > b && (b = 14);
                var w = 1;
                if (a) {
                    for (var y, D, M, N = o + (p > 0 ? f : 0), O = [], S = a.length, I = 0; S > I; I++)
                        if (y = a[I],
                        y.t || !isNaN(y.n)) {
                            switch (D = (y.t ? y.t + ": " : "") + (isNaN(y.n) ? "--" : t.strUtil.ps(y.n, h.nfloat)),
                            s.name) {
                            case "TFLOW":
                                I == a.length - 1 && (D += "\u5143");
                                break;
                            case "TZY":
                            case "TZYS":
                                D += "%"
                            }
                            M = e ? Math.max(m, r.measureText(D).width || 0) : r.measureText(D).width || 0,
                            O.push({
                                str: D,
                                w: M,
                                color: y.c
                            }),
                            N += M + d
                        }
                    N -= d;
                    var T = Math.ceil(N / n);
                    T > S && (T = S),
                    T > 1 ? (b *= T,
                    N = v) : N = Math.floor(Math.max(N, g)),
                    N = Math.min(v, N);
                    var k;
                    A ? (k = o,
                    s.cfg.DIMENSION.H_T_T < u && (k += s.cfg.DIMENSION.W_T_L),
                    c(N, b)) : (c(N, b),
                    s.cfg.DIMENSION.H_T_T > u - 1 && (r.textAlign = "right",
                    r.fillStyle = s.cfg.COLOR.T_T,
                    r.fillText(i, o, w)),
                    k = o + (p > 0 ? f : 0)),
                    r.textAlign = "left";
                    for (var x = k, C = 0, _ = O.length; _ > C && (y = O[C],
                    r.fillStyle = y.color,
                    r.fillText(y.str, k, w),
                    k += y.w + d,
                    !(C >= _ - 1)); C++)
                        k - o + O[C + 1].w > n && (w += s.cfg.STYLE.FONT_SIZE,
                        k = x)
                } else
                    s.cfg.DIMENSION.H_T_T < u && (o += s.cfg.DIMENSION.W_T_L),
                    c(o, b),
                    r.fillStyle = s.cfg.COLOR.T_T,
                    r.textAlign = A ? "left" : "right",
                    r.fillText(i, o, w)
            }
            ,
            this.setTxt()
        }
        function r() {
            var a = ot("div");
            this.canvas = a;
            var r = ot("div");
            r.style.cssFloat = "left",
            r.style.textAlign = "right",
            r.style.marginRight = "9px",
            r.style.overflow = "hidden";
            var e = ot("div");
            a.appendChild(r),
            a.appendChild(e);
            var l = a.style;
            t.isFunc(s.proxyCfg.onClkTT) && (t.xh5_deviceUtil.istd ? ct.addHandler(a, "click", nt(s.proxyCfg.onClkTT, null, s)) : (ct.addHandler(a, "click", nt(s.proxyCfg.onClkTT, null, s)),
            t.xh5_deviceUtil.allowt && ct.addHandler(a, "touchend", nt(s.proxyCfg.onClkTT, null, s))),
            l.cursor = "pointer",
            l.position = "relative",
            l.zIndex = s.cfg.PARAM.I_Z_INDEX + 1);
            var o = s.cfg.datas.isT;
            this.setTxt = function(a) {
                var n = o ? s.cfg.DIMENSION.w_t : s.cfg.DIMENSION.w_k
                  , c = "TFLOW" == s.name ? 400 : 350
                  , f = c > n ? 55 : 80
                  , d = s.cfg.DIMENSION.extend_draw;
                r.style.width = e.style.marginLeft = s.cfg.DIMENSION.posX + "px",
                l.color = s.cfg.COLOR.T_T,
                l.fontSize = s.cfg.STYLE.FONT_SIZE + "px",
                l.fontFamily = s.cfg.STYLE.FONT_FAMILY;
                var u = i || "";
                if (a) {
                    d ? (r.innerHTML = "",
                    s.cfg.DIMENSION.H_T_T < 2 && (e.style.marginLeft = "50px")) : r.innerHTML = s.cfg.DIMENSION.H_T_T > 1 ? u : "",
                    e.innerHTML = "";
                    for (var A, p, v, g = 0, m = a.length; m > g; g++)
                        if (p = a[g],
                        p.t || !isNaN(p.n)) {
                            switch (s.name) {
                            case "DPDK":
                            case "TZY":
                                return;
                            case "TZYS":
                            case "DPDKS":
                            case "SAR":
                                if ("SAR" == s.name) {
                                    if (!s.asPChart && "SAR" != p.t)
                                        continue
                                } else if ("DPDKS" == s.name && "mn" == p.t)
                                    continue;
                                var b = "<span style='color:#000;'>--";
                                switch (p.t) {
                                case "SAR":
                                    b += "</span>";
                                    break;
                                default:
                                    b += "%</span>"
                                }
                                if (v = (p.t ? p.t + ": " : "") + b,
                                !isNaN(p.n)) {
                                    v = v.replace("--", t.strUtil.ps(p.n, h.nfloat));
                                    var w;
                                    w = "DPDK" == s.name || "SAR" == p.t ? p.c : p.n > 0 ? s.cfg.COLOR.K_RISE : p.n < 0 ? s.cfg.COLOR.K_FALL : s.cfg.COLOR.K_N,
                                    v = v.replace("#000", w)
                                }
                                break;
                            case "VOLUME":
                            case "TVOL":
                            case "MA":
                                v = (p.t ? p.t + ": " : "") + (isNaN(p.n) ? 0 : p.n.toFixed(h.nfloat));
                                break;
                            case "SUNSPOT":
                                v = "SUNSPOT" === p.t ? p.n ? (p.t ? p.t + ": " : "") + (isNaN(p.n) ? "--" : t.strUtil.ps(p.n, 0)) + "\u7ea7" : "" : (p.t ? p.t + ": " : "") + (isNaN(p.n) ? "--" : t.strUtil.ps(p.n, h.nfloat));
                                break;
                            default:
                                v = (p.t ? p.t + ": " : "") + (isNaN(p.n) ? "--" : t.strUtil.ps(p.n, h.nfloat)),
                                "TFLOW" == s.name && g == a.length - 1 && (v += "\u5143")
                            }
                            A = 11,
                            e.innerHTML += "<span style='float:left;min-width:" + f + "px;margin-right:" + A + "px;color:" + p.c + "'>" + v + "</span>"
                        }
                } else
                    r.innerHTML = d ? "" : u,
                    e.innerHTML = ""
            }
            ,
            this.setTxt()
        }
        var s = this
          , e = this.proxyCfg.fixIdctW
          , h = this.proxyCfg.usrObj;
        return s.cfg.custom.indicator_cvs_title ? new a : new r
    }
    ,
    a.prototype.genIndicator = function(t, i) {
        if (t) {
            this.indicatorArr = [];
            for (var a = 0, r = t.length; r > a; a++)
                this.indicatorArr.push(t[a]);
            this.titleO || (this.titleO = this.genTitleCanvas(i),
            this.titleCtn.appendChild(this.titleO.canvas))
        }
    }
    ,
    a.prototype.indicatorI = function(t) {
        if (this.indicatorArr) {
            for (var i, a, r = [], s = 0, e = this.indicatorArr.length; e > s; s++)
                i = this.indicatorArr[s],
                a = t[i.prop],
                "t" == this.proxyCfg.type && ("volume" == i.prop || /^tvol\w+$/.test(i.prop)) && t[i.prop] < 0 && (a = 0),
                r.push({
                    n: a,
                    c: i.color,
                    t: i.idct
                });
            return this.titleO && this.titleO.setTxt(r),
            r
        }
    }
    ,
    a.prototype.interact = function(t) {
        return !isNaN(t) && this.datas && this.datas.length ? (t >= this.datas.length && (t = this.datas.length - 1),
        this.indicatorI(this.datas[t])) : (this.titleO && this.titleO.setTxt(null),
        null)
    }
    ,
    a.prototype.rfs = function() {
        this.selfCfg.allowrfs ? (this.titleO && t.domGc(this.titleO.canvas),
        t.domGc(this.wrap),
        clearInterval(this.updateId)) : this.wrap.style.display = "none"
    }
    ;
    var Ot = function() {
        function t(t) {
            return null === t ? "Null" : void 0 === t ? "Undefined" : a.call(t).slice(8, -1)
        }
        function i(t, i, a) {
            switch (t) {
            case "+":
                return i + a;
            case "-":
                return i - a;
            case "*":
                return i * a;
            case "/":
                return a ? i / a : null
            }
        }
        var a = Object.prototype.toString
          , r = Math.min
          , s = Math.max
          , e = Math.abs
          , h = function(t, i, a) {
            if (i) {
                for (var r = [], s = 0, e = t.length; e > s; s++)
                    r.push(a ? a(t[s][i]) : t[s][i]);
                return r
            }
            return t
        }
          , l = function(t) {
            for (var i = 0, a = t.length; a--; )
                i += t[a];
            return i
        }
          , o = function(t, i) {
            for (var a, r = [], s = 0, e = 0, h = t.length; h > s; s++)
                t[s] && (e += t[s]),
                s >= i - 1 ? (a = e / i,
                t[s - i + 1] && (e -= t[s - i + 1])) : a = e / (s + 1),
                r.push(a);
            return r
        }
          , n = function(t, i) {
            for (var a = [t[0]], r = 1, s = t.length; s > r; r++)
                a.push((2 * t[r] + (i - 1) * a[r - 1]) / (i + 1));
            return a
        }
          , c = function(t, i, a) {
            for (var r = [t[0]], s = 1, e = t.length; e > s; s++)
                r.push((a * t[s] + (i - a) * r[s - 1]) / i);
            return r
        }
          , f = function(t, i) {
            for (var a = [], r = 0; i > r; r++)
                a.push(null);
            for (var s = t.length; s > r; r++)
                a.push(t[r - i]);
            return a
        }
          , d = function(t, i, a, r) {
            function s(t) {
                if (!(t >= n))
                    if (c[t] = Math.min.apply(null, o.slice(t - i, t)),
                    u[t] = 1,
                    c[t] > o[t])
                        e(t + 1);
                    else
                        for (d[t] = Math.max.apply(null, l.slice(t - i + 1, t + 1)),
                        f[t] = a; n - 1 > t; ) {
                            if (c[t + 1] = c[t] + f[t] * (d[t] - c[t]) / 100,
                            u[t + 1] = 1,
                            c[t + 1] > o[t + 1])
                                return void e(t + 2);
                            d[t + 1] = Math.max.apply(null, l.slice(t - i + 2, t + 2)),
                            l[t + 1] > d[t] ? (f[t + 1] = f[t] + a,
                            f[t + 1] > r && (f[t + 1] = r)) : f[t + 1] = f[t],
                            t++
                        }
            }
            function e(t) {
                if (!(t >= n)) {
                    if (c[t] = Math.max.apply(null, l.slice(t - i, t)),
                    u[t] = 0,
                    c[t] < l[t])
                        return void s(t + 1);
                    for (d[t] = Math.min.apply(null, o.slice(t - i + 1, t + 1)),
                    f[t] = a; n - 1 > t; ) {
                        if (c[t + 1] = c[t] + f[t] * (d[t] - c[t]) / 100,
                        u[t + 1] = 0,
                        c[t + 1] < l[t + 1])
                            return void s(t + 2);
                        d[t + 1] = Math.min.apply(null, o.slice(t - i + 2, t + 2)),
                        o[t + 1] < d[t] ? (f[t + 1] = f[t] + a,
                        f[t + 1] > r && (f[t + 1] = r)) : f[t + 1] = f[t],
                        t++
                    }
                }
            }
            var l = h(t, "high")
              , o = h(t, "low")
              , n = t.length
              , c = []
              , f = []
              , d = []
              , u = [];
            return l[i] > l[0] || o[i] > o[0] ? s(i) : e(i),
            {
                data: c,
                direction: u
            }
        }
          , u = function(t) {
            for (var i = 0, a = t.length, r = a; r--; )
                i += t[r];
            return i / a
        }
          , A = function(t, i) {
            for (var a = u(t), r = t.length, s = 0, e = r; e--; )
                s += Math.pow(t[e] - a, 2);
            return Math.sqrt(s / (i ? r - i : r))
        }
          , p = function(t, i) {
            for (var a = [], r = 0, s = t.length; s > r; r++)
                a.push(i > r ? A(t.slice(0, r + 1), 1) : A(t.slice(r - i + 1, r + 1), 1));
            return a
        }
          , v = function(t) {
            for (var i = u(t), a = 0, r = t.length, s = r; s--; )
                a += e(t[s] - i);
            return a / r
        }
          , g = function(t, i) {
            for (var a = [], r = 0, s = t.length; s > r; r++)
                a.push(i > r ? v(t.slice(0, r + 1)) : v(t.slice(r - i + 1, r + 1)));
            return a
        }
          , m = function(t, i) {
            for (var a = [], r = t.length, e = s.apply(null, t), h = 0; r > h; h++)
                a.push(i ? s.apply(null, i > h ? t.slice(0, h + 1) : t.slice(h - i + 1, h + 1)) : e);
            return a
        }
          , b = function(t, i) {
            for (var a = [], s = t.length, e = r.apply(null, t), h = 0; s > h; h++)
                a.push(i ? r.apply(null, i > h ? t.slice(0, h + 1) : t.slice(h - i + 1, h + 1)) : e);
            return a
        }
          , w = function(i) {
            switch (t(i)) {
            case "Number":
                return e(i);
            case "Array":
                for (var a = [], r = 0, s = i.length; s > r; r++)
                    a.push(e(i[r]));
                return a;
            default:
                throw new Error("argument of Function calcABS was error!")
            }
        }
          , y = function(i, a) {
            var r, e, h;
            switch (t(i)) {
            case "Array":
                switch (t(a)) {
                case "Array":
                    for (r = [],
                    e = 0,
                    h = i.length; h > e; e++)
                        r.push(s(i[e], a[e]));
                    return r;
                case "Number":
                    for (r = [],
                    e = 0,
                    h = i.length; h > e; e++)
                        r.push(s(i[e], a));
                    return r;
                default:
                    throw new Error("argument of Function calcMAX was error!")
                }
                break;
            case "Number":
                switch (t(a)) {
                case "Array":
                    for (r = [],
                    e = 0,
                    h = a.length; h > e; e++)
                        r.push(s(i, a[e]));
                    return r;
                case "Number":
                    return s(i, a);
                default:
                    throw new Error("argument of Function calcMAX was error!")
                }
                break;
            default:
                throw new Error("argument of Function calcMAX was error!")
            }
        }
          , D = function(t, i) {
            var a = [];
            if (i)
                for (var r = 0, s = t.length; s > r; r++)
                    a.push(l(i > r ? t.slice(0, r + 1) : t.slice(r - i + 1, r + 1)));
            else {
                var e = 0;
                for (r = 0,
                s = t.length; s > r; r++)
                    e += t[r],
                    a.push(e)
            }
            return a
        }
          , M = function(a, r, s) {
            var e, h, l = [], o = a.length;
            switch (t(r)) {
            case "Array":
                for (h = r.length,
                e = 0; o > e; e++)
                    l.push("Number" == t(a[e]) && "Number" == t(r[e]) ? i(s, a[e], r[e]) : null);
                for (; l.length < h; )
                    l.push(null);
                break;
            case "Number":
                for (e = 0; o > e; e++)
                    l.push("Number" == t(a[e]) ? i(s, a[e], r) : null);
                break;
            default:
                throw Error("the Second argument of Function operateArr is wrong!")
            }
            return l
        };
        return {
            getArr: h,
            calcMA: o,
            calcEMA: n,
            calcSMA: c,
            calcREF: f,
            calcSAR: d,
            calcA: u,
            calcSD: A,
            calcSTD: p,
            calcAVEDEV: g,
            calcHHV: m,
            calcLLV: b,
            calcABS: w,
            calcMAX: y,
            calcSUM: D,
            operateArr: M
        }
    }();
   
    var St = function() {
        var i = function(t) {
            var i = function() {
                for (var t, i, a = {
                    BF: l
                }, r = [{
                    h: "http://127.0.0.1",
                    a: a
                }, {
                    h: "http://localhost",
                    a: a
                }, {
                    h: "http://xuan.sina.com.cn",
                    a: a
                }, {
                    h: "http://tmp.sina.com.cn",
                    a: a
                }, {
                    h: "https://touzi.sina.cn/",
                    a: a
                }, {
                    h: "http://touzi.sina.cn/",
                    a: a
                }, {
                    h: "https://touzi.sina.com.cn/",
                    a: a
                }, {
                    h: "http://touzi.sina.com.cn/",
                    a: a
                }], s = document.location.href, e = r.length; e--; )
                    if (i = r[e],
                    0 === s.indexOf(i.h)) {
                        t = i.a;
                        break
                    }
                return t
            }
              , a = i();
            if (a && t)
                for (var r in a)
                    a.hasOwnProperty(r) && (t[r] = a[r])
        }
          , a = function(i, a) {
            var r = i.name
              , s = i.param
              , e = a ? "r_" : "s_";
            t.stc(e + r, s)
        };
        return {
            doStc: a,
            auth: i
        }
    }();
    return new function() {
        this.VER = "6.6.5",
        this.get = function(i, a) {
            t.isFunc(a) && a({
                tChart: st,
                pChart: rt
            })
        }
    }
});
;